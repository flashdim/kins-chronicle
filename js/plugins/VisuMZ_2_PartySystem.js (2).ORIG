//=============================================================================
// VisuStella MZ - Party System
// VisuMZ_2_PartySystem.js
//=============================================================================

var Imported = Imported || {};
Imported.VisuMZ_2_PartySystem = true;

var VisuMZ = VisuMZ || {};
VisuMZ.PartySystem = VisuMZ.PartySystem || {};
VisuMZ.PartySystem.version = 1.19;

//=============================================================================
 /*:
 * @target MZ
 * @plugindesc [RPG Maker MZ] [Tier 2] [Version 1.19] [PartySystem]
 * @author VisuStella
 * @url http://www.yanfly.moe/wiki/Party_System_VisuStella_MZ
 * @orderAfter VisuMZ_0_CoreEngine
 *
 * @help
 * ============================================================================
 * Introduction
 * ============================================================================
 *
 * RPG Maker MZ only gives game projects the ability to switch party members
 * within the main menu and nothing more. There's no inherent functionality to
 * lock party members, make party members required, and/or give players the
 * ability to switch party members mid-battle.
 *
 * This plugin will add in all of those functions as well as a dedicated scene
 * for switching party members. Party switching will allow party members to be
 * removed, swapped, and sorted. Through the usage of Plugin Commands, party
 * members can also be locked and/or required for party presence.
 *
 * Those using the VisuStella MZ Battle Core will also have access to features
 * in this plugin that aren't available otherwise. These features give players
 * the functionality to switch out the whole party lineup mid-battle and/or
 * individual party member switching.
 *
 * Features include all (but not limited to) the following:
 * 
 * * Custom scene dedicated to party management.
 * * Change the maximum number of party members that can participate in battle.
 * * Plugin Commands to lock party members.
 * * Plugin Commands to make certain party members required.
 * * Added functionality with Battle Core to switch party members mid-battle.
 * * This comes in the form of changing either the whole party at once.
 * * Or switching individual members out one at a time.
 *
 * ============================================================================
 * Requirements
 * ============================================================================
 *
 * This plugin is made for RPG Maker MZ. This will not work in other iterations
 * of RPG Maker.
 *
 * ------ Tier 2 ------
 *
 * This plugin is a Tier 2 plugin. Place it under other plugins of lower tier
 * value on your Plugin Manager list (ie: 0, 1, 2, 3, 4, 5). This is to ensure
 * that your plugins will have the best compatibility with the rest of the
 * VisuStella MZ library.
 *
 * ============================================================================
 * Major Changes
 * ============================================================================
 *
 * This plugin adds some new hard-coded features to RPG Maker MZ's functions.
 * The following is a list of them.
 *
 * ---
 *
 * Main Menu Formation Command
 *
 * - This command is now changed to send the player to Scene_Party for the
 * player to have a dedicated scene for changing the party.
 *
 * ---
 *
 * Battle Members Array
 *
 * - Previously, the battle members are decided by which actors are lined up
 * first in the party roster. This has been changed to give players the freedom
 * to have a party size less than the maximum. This change is made by changing
 * the way the battle members are determined by using a new array. However, any
 * and all functions utilize the $gameParty.battleMembers() function will still
 * behave as normal.
 *
 * ---
 *
 * Formation Change OK Function
 *
 * - RPG Maker MZ did not do anything with the Game_Actor.isFormationChangeOk
 * function so this plugin overwrote it completely to allow for the new
 * lock and require features to work.
 *
 * ---
 *
 * ============================================================================
 * Extra Features
 * ============================================================================
 *
 * There are some extra features found if other VisuStella MZ plugins are found
 * present in the Plugin Manager list.
 *
 * ---
 *
 * VisuMZ_1_BattleCore
 *
 * - If the VisuStella MZ Battle Core plugin is present, players are able to 
 * access party switching functionality mid-battle at will. This can be in the
 * form of switching out the entire active party roster at once or individually
 * for each actor.
 *
 * - Switching Entire Rosters: This can be done by going into this plugin's
 * Plugin Parameters => General => Party Command Window => Add Party Command.
 * If the Party Command Window is accessible, the player will be able to see
 * the option between 'Auto Battle' and 'Options'.
 *
 * - Individual Member Switching: This requires going to VisuMZ_1_BattleCore's
 * Plugin Parameters => Actor Command Window => Battle Commands => Command List
 * and add in the "party" option. The "party" option can also be added to the
 * <Battle Commands> notetag.
 *
 * ---
 *
 * ============================================================================
 * VisuStella MZ Compatibility
 * ============================================================================
 *
 * While this plugin is compatible with the majority of the VisuStella MZ
 * plugin library, it is not compatible with specific plugins or specific
 * features. This section will highlight the main plugins/features that will
 * not be compatible with this plugin or put focus on how the make certain
 * features compatible.
 *
 * ---
 * 
 * VisuMZ_2_BattleSystemOTB
 * 
 * With Battle System - OTB, the player cannot change entire parties at once
 * from the Party Command Window. The feature will be unaccessible while
 * Order Turn Battle is in play. However, the player can still change party
 * members through the Actor Command Window by having actors replace other
 * actors. Party changing is also available through battle events, Common
 * Events, and script calls.
 * 
 * ---
 *
 * ============================================================================
 * Plugin Commands
 * ============================================================================
 *
 * The following are Plugin Commands that come with this plugin. They can be
 * accessed through the Plugin Command event command.
 *
 * ---
 * 
 * === Party Plugin Commands ===
 * 
 * ---
 *
 * Party: Call Party Scene
 * - Calls the party changing scene.
 *
 * ---
 *
 * Party: Change Max Battle Members
 * - Changes the number of max battle members possible.
 * - Cannot be use mid-battle.
 *
 *   Max Members:
 *   - Changes the number of max battle members possible.
 *   - Use 0 for the game's default number.
 *
 * ---
 *
 * Party: Lock/Unlock Member(s)
 * - Allows you to lock/unlock a party member.
 * - Locked actors cannot change their party position.
 *
 *   Actor ID(s):
 *   - Select which actor(s) to lock/unlock.
 *   - Locked actors cannot change their party position.
 *
 *   Lock?:
 *   - Lock the selected actor(s)?
 *
 * ---
 * 
 * Party: Move Actor(s) to Active
 * - Map Only.
 * - Moves an actor to the active party if there is room.
 * - The actor needs to have joined the party.
 * 
 *   Actor ID(s):
 *   - Select which actor(s) to move to the active party if there is room.
 * 
 * ---
 * 
 * Party: Move Actor(s) to Reserve
 * - Map Only.
 * - Moves an actor to the reserve party.
 * - Must be 1 actor left.
 * - The actor needs to have joined the party.
 * 
 *   Actor ID(s):
 *   - Select which actor(s) to move to the reserve party.
 * 
 * ---
 * 
 * Party: Move Party Index to Reserve
 * - Map only.
 * - Moves an actor in a specific party index to reserve.
 * - Must be 1 actor left.
 * 
 *   Index:
 *   - Type in which index to move.
 *   - Index values start at 0.
 *   - You may use JavaScript code.
 * 
 * ---
 * 
 * Party: Move Random Reserve to Active
 * - Map only.
 * - Moves a random actor from the reserve party to active.
 * - Must be enough space in active party.
 * 
 * ---
 *
 * Party: Require Member(s)
 * - Allows you to require/free a party member.
 * - Required actors must be in the party to exit the scene.
 *
 *   Actor ID(s):
 *   - Select which actor(s) to require/free.
 *   - Required actors must be in the party to exit the scene.
 *
 *   Require?:
 *   - Make the selected actor(s) required?
 *
 * ---
 *
 * ============================================================================
 * Plugin Parameters: General Settings
 * ============================================================================
 *
 * These Plugin Parameters control the overall behaviors pertaining to the
 * Party System added with this plugin. These behaviors range from the maximum
 * number of members that can participate in battle to the availability of the
 * party switching mechanics.
 *
 * ---
 *
 * General
 * 
 *   Max Battle Members:
 *   - Maximum number of battle members.
 *
 * ---
 *
 * Party Scene
 * 
 *   Add Remove Command:
 *   - Add the 'Remove' command to the party scene?
 * 
 *   Locked Member Icon:
 *   - Icon used for a locked party member.
 * 
 *   Required Member Icon:
 *   - Icon used for a required party member.
 *
 * ---
 *
 * Party Command Window
 * - These require VisuMZ_1_BattleCore!
 * 
 *   Add Party Command:
 *   - Add the 'Party' command to the Party Command Window?
 * 
 *   Command Cooldown:
 *   - Cooldown (in turns) for this command to be available again.
 *
 * ---
 *
 * Actor Command Window
 * - These require VisuMZ_1_BattleCore!
 * 
 *   Add Switch Command:
 *   - Add the 'Switch' command to the Actor Command Window?
 * 
 *   Command Cooldown:
 *   - Cooldown (in turns) for this command to be available again.
 * 
 *   Switch Out Animation?:
 *   - Show the sprites switching out when using individual party
 *     member switching?
 * 
 *   TPB: Immediate Action:
 *   - Allow actors to immediate act upon switching in for TPB battle systems?
 *
 * ---
 *
 * ============================================================================
 * Plugin Parameters: Vocabulary Settings
 * ============================================================================
 *
 * These Plugin Parameters control the text that you see in-game related to the
 * Party System plugin.
 *
 * ---
 *
 * General
 * 
 *   Active Party:
 *   - Vocabulary used to represent the Active Party.
 * 
 *   Reserve Party:
 *   - Vocabulary used to represent the Reserve Party.
 * 
 *   Status:
 *   - Vocabulary used to represent the Status Window.
 * 
 *   Show Back Rectangles?:
 *   - Show back rectangles of darker colors to display information better?
 * 
 *     Back Rectangle Color:
 *     - Use #rrggbb for custom colors or regular numbers for text colors
 *       from the Window Skin.
 *
 * ---
 *
 * Party Scene > Windows
 * 
 *   Empty:
 *   - For the party and status windows when no actor is selected.
 * 
 *   Remove:
 *   - For the remove option.
 *
 * ---
 *
 * Party Scene > Button Assist
 * 
 *   Swap Positions:
 *   - Button assist text for the page up/down commands.
 *   - Requires VisuMZ_0_CoreEngine!
 * 
 *   Remove:
 *   - Button assist text for the removal command.
 *   - Requires VisuMZ_0_CoreEngine!
 * 
 *   Sort:
 *   - Button assist text for the sort command.
 *   - Requires VisuMZ_0_CoreEngine!
 * 
 *   Swap In:
 *   - Button assist text for swapping in actors.
 *   - Requires VisuMZ_0_CoreEngine!
 * 
 *   Swap Out:
 *   - Button assist text for swapping out actors.
 *   - Requires VisuMZ_0_CoreEngine!
 *
 * ---
 *
 * Battle Scene
 * 
 *   Party Command:
 *   - Command text for entering Party Scene.
 *   - Requires VisuMZ_1_BattleCore!
 * 
 *   Help: Formation:
 *   - Help text for Formation command.
 *   - Requires VisuMZ_1_BattleCore!
 * 
 *   Queue Message:
 *   - Message to say the Party Scene is queued.
 *   - Requires VisuMZ_1_BattleCore!
 * 
 *   Switch Command:
 *   - Command text for switching out members.
 *   - Requires VisuMZ_1_BattleCore!
 * 
 *   Help: Switch:
 *   - Help text for Switch command.
 *   - Requires VisuMZ_1_BattleCore!
 *
 * ---
 *
 * ============================================================================
 * Plugin Parameters: Background Settings
 * ============================================================================
 *
 * Background settings for Scene_Party.
 *
 * ---
 *
 * Background Settings
 * 
 *   Snapshop Opacity:
 *   - Snapshot opacity for the scene.
 * 
 *   Background 1:
 *   - Filename used for the bottom background image.
 *   - Leave empty if you don't wish to use one.
 * 
 *   Background 2:
 *   - Filename used for the upper background image.
 *   - Leave empty if you don't wish to use one.
 *
 * ---
 *
 * ============================================================================
 * Plugin Parameters: Window Settings
 * ============================================================================
 *
 * If you don't like the locations of the windows in Scene_Party, change them
 * up with these Plugin Parameters, provided that you have an understanding of
 * JavaScript code.
 *
 * ---
 *
 * Active Party Label
 * Active Party Window
 * Reserve Party Label
 * Reserve Party Window
 * Status Label
 * Status Window
 * Battle Switch Window
 * 
 *   Background Type:
 *   - Select background type for this window.
 * 
 *   Columns:
 *   - Available only for the Reserve Party Window.
 *   - How many columns do you want there to be for the window?
 * 
 *   Actor Graphic:
 *   - Available only for Active Party Window and Reserve Party Window.
 *   - Choose how the actor graphics appear in the specific windows.
 *     - Face
 *     - Map Sprite
 *     - Sideview Battler (Requires VisuMZ_1_MainMenuCore)
 * 
 *     Map Sprite:
 *     Sideview Battler:
 * 
 *       Offset X:
 *       Offset Y:
 *       - If showing map sprites, offset the x or y coordinates.
 * 
 *   JS: X, Y, W, H:
 *   - Code used to determine the dimensions for this window.
 *
 * ---
 *
 * ============================================================================
 * Terms of Use
 * ============================================================================
 *
 * 1. These plugins may be used in free or commercial games provided that they
 * have been acquired through legitimate means at VisuStella.com and/or any
 * other official approved VisuStella sources. Exceptions and special
 * circumstances that may prohibit usage will be listed on VisuStella.com.
 * 
 * 2. All of the listed coders found in the Credits section of this plugin must
 * be given credit in your games or credited as a collective under the name:
 * "VisuStella".
 * 
 * 3. You may edit the source code to suit your needs, so long as you do not
 * claim the source code belongs to you. VisuStella also does not take
 * responsibility for the plugin if any changes have been made to the plugin's
 * code, nor does VisuStella take responsibility for user-provided custom code
 * used for custom control effects including advanced JavaScript notetags
 * and/or plugin parameters that allow custom JavaScript code.
 * 
 * 4. You may NOT redistribute these plugins nor take code from this plugin to
 * use as your own. These plugins and their code are only to be downloaded from
 * VisuStella.com and other official/approved VisuStella sources. A list of
 * official/approved sources can also be found on VisuStella.com.
 *
 * 5. VisuStella is not responsible for problems found in your game due to
 * unintended usage, incompatibility problems with plugins outside of the
 * VisuStella MZ library, plugin versions that aren't up to date, nor
 * responsible for the proper working of compatibility patches made by any
 * third parties. VisuStella is not responsible for errors caused by any
 * user-provided custom code used for custom control effects including advanced
 * JavaScript notetags and/or plugin parameters that allow JavaScript code.
 *
 * 6. If a compatibility patch needs to be made through a third party that is
 * unaffiliated with VisuStella that involves using code from the VisuStella MZ
 * library, contact must be made with a member from VisuStella and have it
 * approved. The patch would be placed on VisuStella.com as a free download
 * to the public. Such patches cannot be sold for monetary gain, including
 * commissions, crowdfunding, and/or donations.
 * 
 * 7. If this VisuStella MZ plugin is a paid product, all project team members
 * must purchase their own individual copies of the paid product if they are to
 * use it. Usage includes working on related game mechanics, managing related
 * code, and/or using related Plugin Commands and features. Redistribution of
 * the plugin and/or its code to other members of the team is NOT allowed
 * unless they own the plugin itself as that conflicts with Article 4.
 * 
 * 8. Any extensions and/or addendums made to this plugin's Terms of Use can be
 * found on VisuStella.com and must be followed.
 *
 * ============================================================================
 * Credits
 * ============================================================================
 * 
 * If you are using this plugin, credit the following people in your game:
 * 
 * Team VisuStella
 * * Yanfly
 * * Arisu
 * * Olivia
 * * Irina
 *
 * ============================================================================
 * Changelog
 * ============================================================================
 * 
 * Version 1.19: June 18, 2021
 * * Compatibility Update
 * ** Added compatibility functionality for future plugins.
 * 
 * Version 1.18: April 16, 2021
 * * Documentation Update!
 * ** Fixed typo. Fix made by Arisu.
 * 
 * Version 1.17: March 26, 2021
 * * Documentation Update!
 * ** Added "VisuStella MZ Compatibility" section for detailed compatibility
 *    explanations with the VisuMZ_2_BattleSystemOTB plugin.
 * 
 * Version 1.16: March 19, 2021
 * * Compatibility Update
 * ** Added compatibility functionality for future plugins.
 * 
 * Version 1.15: March 5, 2021
 * * Documentation Update!
 * ** Help file updated for new features.
 * * New Features
 * ** New Plugin Parameter added by Irina:
 * *** Plugin Parameters > Gneral > Battle Scene > Battle Party Icon
 * **** For some reason, we never had a setting that lets you change the party
 *      icon. Well, now there is!
 * 
 * Version 1.14: February 5, 2021
 * * Documentation Update!
 * ** Help file updated for new features.
 * * New Features!
 * ** New Plugin Commands added by Arisu!
 * *** Party: Move Party Index to Reserve
 * **** Moves an actor in a specific party index to reserve.
 *      Map only. Must be 1 actor left. You may use code.
 * *** Party: Move Random Reserve to Active
 * **** Moves a random actor from the reserve party to active.
 *      Map only. Must be enough space in active party.
 * 
 * Version 1.13: January 29, 2021
 * * Documentation Update!
 * ** Help file updated for new features.
 * * New Features!
 * ** New Plugin Commands added by Arisu!
 * *** Party: Move Actor(s) to Active
 * **** Map only. Moves an actor to the active party if there is room.
 * *** Party: Move Actor(s) to Reserve
 * **** Map only. Moves an actor to the reserve party.
 * 
 * Version 1.12: January 15, 2021
 * * Bug Fixes!
 * ** For battle testing, if the number of battle test members exceeds the
 *    maximum battle member slots, trim them until they match. Fix by Olivia.
 * 
 * Version 1.11: January 1, 2021
 * * Compatibility Update
 * ** Plugins should be more compatible with one another.
 * 
 * Version 1.10: December 25, 2020
 * * Compatibility Update
 * ** Plugins should be more compatible with one another.
 * 
 * Version 1.09: December 18, 2020
 * * Bug Fixes!
 * ** Removing party members in the active party by event command will now be
 *    properly removed from the party. Fix made by Yanfly.
 * 
 * Version 1.08: December 4, 2020
 * * Bug Fixes!
 * ** With TPB battle systems, after switching out party members, the battle
 *    system will no longer carry over any previous active battle members in
 *    the command window. Fix made by Yanfly.
 * * Compatibility Update!
 * ** Plugins should be more compatible with one another.
 * 
 * Version 1.07: November 22, 2020
 * * Bug Fixes!
 * ** With Active TPB, switching out a party member mid-action is no longer
 *    possible to prevent bugs. Intead, there party switching action will be
 *    queued and take effect after the action has been completed. Fix made by
 *    Yanfly.
 * * Compatibility Update!
 * ** Game_Party.swapOrder function now works with this plugin. However, keep
 *    in mind that due to how this party system plugin allows you have empty
 *    slots in the active battle party, this function will fill in the empty
 *    slots upon usage. Update made by Yanfly.
 *
 * Version 1.06: November 1, 2020
 * * Compatibility Update!
 * ** Plugins should be more compatible with one another.
 * 
 * Version 1.05: October 25, 2020
 * * Bug Fixes!
 * ** Plugin Command "Party: Change Max Battle Members" now works again.
 *    Fix made by Arisu.
 *
 * Version 1.04: October 18, 2020
 * * Compatibility Update!
 * ** Plugins should be more compatible with one another.
 * 
 * Version 1.03: October 11, 2020
 * * Bug Fixes!
 * ** Adding party members during battle through the party window command will
 *    no longer cause crashes after they input an action. Fix made by Yanfly.
 * 
 * Version 1.02: October 4, 2020
 * * Bug Fixes!
 * ** Adding party members during test play should now work again.
 *    Fix made by Irina.
 * ** Changing party members mid-battle through the actor command should now
 *    refresh the party followers afterwards. Fix made by Yanfly.
 * * New Features!
 * ** New Plugin Parameter added by Arisu!
 * *** General > Party Command Window > TPB: Immediate Action
 * **** Allow actors to immediate act upon switching in for TPB battle systems?
 * 
 * Version 1.01: September 27, 2020
 * * Bug Fixes!
 * ** When switching actors with states, buffs, and/or debuffs already applied,
 *    the state icons found in the status window will now switch over properly,
 *    too. Fix made by Arisu.
 *
 * Version 1.00: September 7, 2020
 * * Finished Plugin!
 *
 * ============================================================================
 * End of Helpfile
 * ============================================================================
 *
 * @ --------------------------------------------------------------------------
 *
 * @command CallPartyScene
 * @text Party: Call Party Scene
 * @desc Calls the party changing scene.
 *
 * @ --------------------------------------------------------------------------
 *
 * @command ChangeMaxBattleMembers
 * @text Party: Change Max Battle Members
 * @desc Changes the number of max battle members possible.
 * Cannot be use mid-battle.
 *
 * @arg Value:eval
 * @text Max Members
 * @desc Changes the number of max battle members possible.
 * Use 0 for the game's default number.
 * @default 4
 *
 * @ --------------------------------------------------------------------------
 *
 * @command LockPartyMembers
 * @text Party: Lock/Unlock Member(s)
 * @desc Allows you to lock/unlock a party member.
 * Locked actors cannot change their party position.
 *
 * @arg Actors:arraynum
 * @text Actor ID(s)
 * @type actor[]
 * @desc Select which actor(s) to lock/unlock.
 * Locked actors cannot change their party position.
 * @default ["1"]
 * 
 * @arg Lock:eval
 * @text Lock?
 * @type boolean
 * @on Lock
 * @off Unlock
 * @desc Lock the selected actor(s)?
 * @default true
 *
 * @ --------------------------------------------------------------------------
 *
 * @command MoveActorsToActive
 * @text Party: Move Actor(s) to Active
 * @desc Moves an actor to the active party if there is room.
 * Map only. The actor needs to have joined the party.
 *
 * @arg Actors:arraynum
 * @text Actor ID(s)
 * @type actor[]
 * @desc Select which actor(s) to move to the active party if there is room.
 * @default ["1"]
 *
 * @ --------------------------------------------------------------------------
 *
 * @command MoveActorsToReserve
 * @text Party: Move Actor(s) to Reserve
 * @desc Moves an actor to the reserve party. Must be 1 actor left.
 * Map only. The actor needs to have joined the party.
 *
 * @arg Actors:arraynum
 * @text Actor ID(s)
 * @type actor[]
 * @desc Select which actor(s) to move to the reserve party.
 * @default ["1"]
 *
 * @ --------------------------------------------------------------------------
 *
 * @command MovePartyIndexToReserve
 * @text Party: Move Party Index to Reserve
 * @desc Moves an actor in a specific party index to reserve.
 * Map only. Must be 1 actor left.
 *
 * @arg Index:eval
 * @text Party Index
 * @desc Type in which index to move. Index values start at 0.
 * You may use JavaScript code.
 * @default 0
 *
 * @ --------------------------------------------------------------------------
 *
 * @command MoveRandomToActive
 * @text Party: Move Random Reserve to Active
 * @desc Moves a random actor from the reserve party to active.
 * Map only. Must be enough space in active party.
 *
 * @ --------------------------------------------------------------------------
 *
 * @command RequirePartyMembers
 * @text Party: Require Member(s)
 * @desc Allows you to require/free a party member.
 * Required actors must be in the party to exit the scene.
 *
 * @arg Actors:arraynum
 * @text Actor ID(s)
 * @type actor[]
 * @desc Select which actor(s) to require/free.
 * Required actors must be in the party to exit the scene.
 * @default ["1"]
 * 
 * @arg Require:eval
 * @text Require?
 * @type boolean
 * @on Require
 * @off Don't Require
 * @desc Make the selected actor(s) required?
 * @default true
 *
 * @ --------------------------------------------------------------------------
 *
 * @ ==========================================================================
 * @ Plugin Parameters
 * @ ==========================================================================
 *
 * @param BreakHead
 * @text --------------------------
 * @default ----------------------------------
 *
 * @param PartySystem
 * @default Plugin Parameters
 *
 * @param ATTENTION
 * @default READ THE HELP FILE
 *
 * @param BreakSettings
 * @text --------------------------
 * @default ----------------------------------
 *
 * @param General:struct
 * @text General Settings
 * @type struct<General>
 * @desc General settings pertaining to Party-related mechanics.
 * @default {"General":"","MaxBattleMembers:num":"4","PartyScene":"","AddRemoveCmd:eval":"true","LockIcon:num":"195","RequireIcon:num":"87","DrawBackRect:eval":"true","BackRectColor:str":"19","PartyCmdWin":"","PartyCmdWinAddParty:eval":"false","PartyCmdCooldown:num":"1","tpbImmediateAction:eval":"true","ActorCmdWin":"","ActorCmdWinAddParty:eval":"true","ActorCmdCooldown:num":"1","SwitchOutAnimation:eval":"true"}
 *
 * @param Vocab:struct
 * @text Vocabulary Settings
 * @type struct<Vocab>
 * @desc These settings let you adjust the text displayed for this plugin.
 * @default {"General":"","ActiveParty:str":"Active Party","ReserveParty:str":"Reserve Party","Status:str":"Status","PartyScene":"","Windows":"","Empty:str":"- Empty -","Remove:str":"Remove","ButtonAssist":"","AssistSwapPosition:str":"Quick Swap","AssistRemove:str":"Remove","AssistSort:str":"Sort","AssistSwapIn:str":"Swap In","AssistSwapOut:str":"Swap Out","BattleScene":"","BattlePartyCmd:str":"Party","BattleHelpFormation:json":"\"Change up your party formation.\"","QueuePartyScene:str":"%1 Menu queued after action is complete.","BattleSwitchOut:str":"Switch","BattleHelpSwitch:json":"\"Switch out this party member with another.\""}
 *
 * @param BgSettings:struct
 * @text Background Settings
 * @type struct<BgSettings>
 * @desc Background settings for Scene_Party.
 * @default {"SnapshotOpacity:num":"192","BgFilename1:str":"","BgFilename2:str":""}
 *
 * @param Window:struct
 * @text Window Settings
 * @type struct<Window>
 * @desc These settings let you control how the windows appear in Scene_Party.
 * @default {"ActivePartyLabel":"","ActivePartyLabelBgType:num":"0","ActivePartyLabelRect:func":"\"const wx = 0;\\nconst wy = this.mainAreaTop();\\nconst ww = Graphics.boxWidth;\\nconst wh = Window_Base.prototype.lineHeight();\\nreturn new Rectangle(wx, wy, ww, wh);\"","ActivePartyWindow":"","ActivePartyWindowBgType:num":"0","ActivePartyGraphic:str":"face","ActivePartyMapSprite":"","ActiveSpriteOffsetX:num":"0","ActiveSpriteOffsetY:num":"4","ActivePartySvBattler":"","ActiveBattlerOffsetX:num":"0","ActiveBattlerOffsetY:num":"4","ActivePartyWindowRect:func":"\"const wx = 0;\\nconst wy = this._activePartyLabel.y + this._activePartyLabel.height;\\nconst ww = Graphics.boxWidth;\\nconst wh = ImageManager.faceHeight + $gameSystem.windowPadding() * 2 + 2;\\nreturn new Rectangle(wx, wy, ww, wh);\"","ReservePartyLabel":"","ReservePartyLabelBgType:num":"0","ReservePartyLabelRect:func":"\"const ww = Math.max(240, Math.min(Graphics.boxWidth - 576, Math.round(Graphics.boxWidth / 2)));\\nconst wx = this.isRightInputMode() ? (Graphics.boxWidth - ww) : 0;\\nconst wy = this._activePartyWindow.y + this._activePartyWindow.height;\\nconst wh = Window_Base.prototype.lineHeight();\\nreturn new Rectangle(wx, wy, ww, wh);\"","ReservePartyWindow":"","ReservePartyWindowBgType:num":"0","ReserveItemThickness:num":"2","ReservePartyGraphic:str":"face","ReservePartyMapSprite":"","ReserveSpriteOffsetX:num":"24","ReserveSpriteOffsetY:num":"4","ReservePartySvBattler":"","ReserveBattlerOffsetX:num":"48","ReserveBattlerOffsetY:num":"4","ReservePartyWindowRect:func":"\"const ww = this._reservePartyLabel.width;\\nconst wx = this._reservePartyLabel.x;\\nconst wy = this._reservePartyLabel.y + this._reservePartyLabel.height;\\nconst wh = this.mainAreaHeight() - this._reservePartyLabel.height - this._activePartyWindow.height - this._activePartyLabel.height;\\nreturn new Rectangle(wx, wy, ww, wh);\"","StatusLabel":"","StatusLabelBgType:num":"0","StatusLabelRect:func":"\"const ww = Graphics.boxWidth - this._reservePartyLabel.width;\\nconst wx = this.isRightInputMode() ? 0 : (Graphics.boxWidth - ww);\\nconst wy = this._activePartyWindow.y + this._activePartyWindow.height;\\nconst wh = Window_Base.prototype.lineHeight();\\nreturn new Rectangle(wx, wy, ww, wh);\"","StatusWindow":"","StatusWindowBgType:num":"0","StatusWindowDraw:func":"\"// Draw Empty\\nif (!this._actor) {\\n    this.drawItemDarkRect(0, 0, this.innerWidth, this.innerHeight);\\n    const y = Math.round((this.innerHeight - this.lineHeight()) / 2);\\n    this.changeTextColor(ColorManager.systemColor());\\n    this.drawText(TextManager.emptyPartyMember, 0, y, this.innerWidth, 'center');\\n    return;\\n}\\n\\n// Draw Face and Simple Status\\nthis.drawActorFace(this._actor, 1, 0, ImageManager.faceWidth, ImageManager.faceHeight);\\nthis.drawActorSimpleStatus(this._actor, ImageManager.faceWidth + 36, 0);\\n\\n// Declare Constants\\nconst lineHeight = this.lineHeight();\\nconst params = this.actorParams();\\nconst paramWidth = Math.round(this.innerWidth / 2);\\nconst paramHeight = Math.ceil(params.length / 2) * lineHeight;\\nconst baseX = 0;\\nlet x = 0;\\nlet y = ImageManager.faceHeight + lineHeight / 2;\\n\\n// Draw Parameters\\nfor (const param of params) {\\n    this.drawItemDarkRect(x, y, paramWidth, lineHeight);\\n    this.drawParamName(param, x, y, paramWidth);\\n    this.drawParamValue(param, x, y, paramWidth);\\n\\n    if (x === baseX) {\\n        x += paramWidth;\\n    } else {\\n        x = baseX;\\n        y += lineHeight;\\n    }\\n}\"","StatusWindowRect:func":"\"const ww = this._statusPartyLabel.width;\\nconst wx = this.isRightInputMode() ? 0 : (Graphics.boxWidth - ww);\\nconst wy = this._reservePartyWindow.y;\\nconst wh = this._reservePartyWindow.height;\\nreturn new Rectangle(wx, wy, ww, wh);\"","BattleSwitchWindow":"","BattleSwitchWindowBgType:num":"0","BattleSwitchWindowRect:func":"\"const padding = $gameSystem.windowPadding() * 2;\\nlet ww = 516 + padding;\\nlet wh = Window_PartyBattleSwitch.prototype.itemHeight() * 4 + padding;\\nlet wx = Math.round(Graphics.boxWidth - ww) / 2;\\nlet wy = Math.round(Graphics.boxHeight - wh - this._statusWindow.height) / 2;\\nwy = wy.clamp(0, Graphics.boxHeight - wh - this._statusWindow.height);\\nreturn new Rectangle(wx, wy, ww, wh);\""}
 *
 * @param BreakEnd1
 * @text --------------------------
 * @default ----------------------------------
 *
 * @param End Of
 * @default Plugin Parameters
 *
 * @param BreakEnd2
 * @text --------------------------
 * @default ----------------------------------
 *
 */
/* ----------------------------------------------------------------------------
 * General Settings
 * ----------------------------------------------------------------------------
 */
/*~struct~General:
 *
 * @param General
 *
 * @param MaxBattleMembers:num
 * @text Max Battle Members
 * @parent General
 * @type number
 * @min 1
 * @desc Maximum number of battle members.
 * @default 4
 *
 * @param BattleScene
 * @text Battle Scene
 *
 * @param BattlePartyIcon:num
 * @text Battle Party Icon
 * @parent BattleScene
 * @desc Icon used for changing party members.
 * @default 75
 *
 * @param PartyScene
 * @text Party Scene
 *
 * @param AddRemoveCmd:eval
 * @text Add Remove Command
 * @parent PartyScene
 * @type boolean
 * @on Add Command
 * @off Don't Add
 * @desc Add the 'Remove' command to the party scene?
 * @default true
 *
 * @param LockIcon:num
 * @text Locked Member Icon
 * @parent PartyScene
 * @desc Icon used for a locked party member.
 * @default 195
 *
 * @param RequireIcon:num
 * @text Required Member Icon
 * @parent PartyScene
 * @desc Icon used for a required party member.
 * @default 87
 *
 * @param DrawBackRect:eval
 * @text Show Back Rectangles?
 * @parent PartyScene
 * @type boolean
 * @on Draw
 * @off Don't Draw
 * @desc Show back rectangles of darker colors to display information better?
 * @default true
 *
 * @param BackRectColor:str
 * @text Back Rectangle Color
 * @parent DrawBackRect:eval
 * @desc Use #rrggbb for custom colors or regular numbers
 * for text colors from the Window Skin.
 * @default 19
 *
 * @param PartyCmdWin
 * @text Party Command Window
 *
 * @param PartyCmdWinAddParty:eval
 * @text Add Party Command
 * @parent PartyCmdWin
 * @type boolean
 * @on Add Command
 * @off Don't Add
 * @desc Add the 'Party' command to the Party Command Window?
 * @default false
 *
 * @param PartyCmdCooldown:num
 * @text Command Cooldown
 * @parent PartyCmdWin
 * @desc Cooldown (in turns) for this command to be available again.
 * @default 1
 *
 * @param ActorCmdWin
 * @text Actor Command Window
 *
 * @param ActorCmdWinAddParty:eval
 * @text Add Switch Command
 * @parent ActorCmdWin
 * @type boolean
 * @on Add Command
 * @off Don't Add
 * @desc Add the 'Switch' command to the Actor Command Window?
 * @default true
 *
 * @param ActorCmdCooldown:num
 * @text Command Cooldown
 * @parent ActorCmdWin
 * @desc Cooldown (in turns) for this command to be available again.
 * @default 1
 *
 * @param SwitchOutAnimation:eval
 * @text Switch Out Animation?
 * @parent ActorCmdWin
 * @type boolean
 * @on Show
 * @off Don't
 * @desc Show the sprites switching out when using individual party member switching?
 * @default true
 *
 * @param tpbImmediateAction:eval
 * @text TPB: Immediate Action
 * @parent ActorCmdWin
 * @type boolean
 * @on Immediate Action
 * @off Empty Gauge
 * @desc Allow actors to immediate act upon switching in for TPB battle systems?
 * @default true
 *
 */
/* ----------------------------------------------------------------------------
 * Vocabulary Settings
 * ----------------------------------------------------------------------------
 */
/*~struct~Vocab:
 *
 * @param General
 *
 * @param ActiveParty:str
 * @text Active Party
 * @parent General
 * @desc Vocabulary used to represent the Active Party.
 * @default Active Party
 *
 * @param ReserveParty:str
 * @text Reserve Party
 * @parent General
 * @desc Vocabulary used to represent the Reserve Party.
 * @default Reserve Party
 *
 * @param Status:str
 * @text Status
 * @parent General
 * @desc Vocabulary used to represent the Status Window.
 * @default Status
 *
 * @param PartyScene
 * @text Party Scene
 *
 * @param Windows
 * @parent PartyScene
 *
 * @param Empty:str
 * @text Empty
 * @parent Windows
 * @desc For the party and status windows when no actor is selected.
 * @default - Empty -
 *
 * @param Remove:str
 * @text Remove
 * @parent Windows
 * @desc For the remove option.
 * @default Remove
 *
 * @param ButtonAssist
 * @text Button Assist
 * @parent PartyScene
 *
 * @param AssistSwapPosition:str
 * @text Swap Positions
 * @parent ButtonAssist
 * @desc Button assist text for the page up/down commands.
 * Requires VisuMZ_0_CoreEngine!
 * @default Quick Swap
 *
 * @param AssistRemove:str
 * @text Remove
 * @parent ButtonAssist
 * @desc Button assist text for the removal command.
 * Requires VisuMZ_0_CoreEngine!
 * @default Remove
 *
 * @param AssistSort:str
 * @text Sort
 * @parent ButtonAssist
 * @desc Button assist text for the sort command.
 * Requires VisuMZ_0_CoreEngine!
 * @default Sort
 *
 * @param AssistSwapIn:str
 * @text Swap In
 * @parent ButtonAssist
 * @desc Button assist text for swapping in actors.
 * Requires VisuMZ_0_CoreEngine!
 * @default Swap In
 *
 * @param AssistSwapOut:str
 * @text Swap Out
 * @parent ButtonAssist
 * @desc Button assist text for swapping out actors.
 * Requires VisuMZ_0_CoreEngine!
 * @default Swap Out
 *
 * @param BattleScene
 * @text Battle Scene
 *
 * @param BattlePartyCmd:str
 * @text Party Command
 * @parent BattleScene
 * @desc Command text for entering Party Scene.
 * Requires VisuMZ_1_BattleCore!
 * @default Party
 *
 * @param BattleHelpFormation:json
 * @text Help: Formation
 * @parent BattlePartyCmd:str
 * @type note
 * @desc Help text for Formation command.
 * Requires VisuMZ_1_BattleCore!
 * @default "Change up your party formation."
 *
 * @param QueuePartyScene:str
 * @text Queue Message
 * @parent BattlePartyCmd:str
 * @desc Message to say the Party Scene is queued.
 * Requires VisuMZ_1_BattleCore!
 * @default %1 Menu queued after action is complete.
 *
 * @param BattleSwitchOut:str
 * @text Switch Command
 * @parent BattleScene
 * @desc Command text for switching out members.
 * Requires VisuMZ_1_BattleCore!
 * @default Switch
 *
 * @param BattleHelpSwitch:json
 * @text Help: Switch
 * @parent BattleSwitchOut:str
 * @type note
 * @desc Help text for Switch command.
 * Requires VisuMZ_1_BattleCore!
 * @default "Switch out this party member with another."
 *
 */
/* ----------------------------------------------------------------------------
 * Background Settings
 * ----------------------------------------------------------------------------
 */
/*~struct~BgSettings:
 *
 * @param SnapshotOpacity:num
 * @text Snapshop Opacity
 * @type number
 * @min 0
 * @max 255
 * @desc Snapshot opacity for the scene.
 * @default 192
 *
 * @param BgFilename1:str
 * @text Background 1
 * @type file
 * @dir img/titles1/
 * @desc Filename used for the bottom background image.
 * Leave empty if you don't wish to use one.
 * @default 
 *
 * @param BgFilename2:str
 * @text Background 2
 * @type file
 * @dir img/titles2/
 * @desc Filename used for the upper background image.
 * Leave empty if you don't wish to use one.
 * @default 
 *
 */
/* ----------------------------------------------------------------------------
 * Window Settings
 * ----------------------------------------------------------------------------
 */
/*~struct~Window:
 *
 * @param ActivePartyLabel
 * @text Active Party Label
 *
 * @param ActivePartyLabelBgType:num
 * @text Background Type
 * @parent ActivePartyLabel
 * @type select
 * @option 0 - Window
 * @value 0
 * @option 1 - Dim
 * @value 1
 * @option 2 - Transparent
 * @value 2
 * @desc Select background type for this window.
 * @default 0
 *
 * @param ActivePartyLabelRect:func
 * @text JS: X, Y, W, H
 * @parent ActivePartyLabel
 * @type note
 * @desc Code used to determine the dimensions for this window.
 * @default "const wx = 0;\nconst wy = this.mainAreaTop();\nconst ww = Graphics.boxWidth;\nconst wh = Window_Base.prototype.lineHeight();\nreturn new Rectangle(wx, wy, ww, wh);"
 *
 * @param ActivePartyWindow
 * @text Active Party Window
 *
 * @param ActivePartyWindowBgType:num
 * @text Background Type
 * @parent ActivePartyWindow
 * @type select
 * @option 0 - Window
 * @value 0
 * @option 1 - Dim
 * @value 1
 * @option 2 - Transparent
 * @value 2
 * @desc Select background type for this window.
 * @default 0
 *
 * @param ActivePartyGraphic:str
 * @text Actor Graphic
 * @parent ActivePartyWindow
 * @type select
 * @option None
 * @value none
 * @option Face
 * @value face
 * @option Map Sprite
 * @value sprite
 * @option Sideview Battler (Requires VisuMZ_1_MainMenuCore)
 * @value svbattler
 * @desc Choose how the actor graphics appear in the active party menu.
 * @default face
 *
 * @param ActivePartyMapSprite
 * @text Map Sprite
 * @parent ActivePartyGraphic:str
 *
 * @param ActiveSpriteOffsetX:num
 * @text Offset X
 * @parent ActivePartyMapSprite
 * @desc If showing map sprites, offset the x coordinate here from center.
 * @default 0
 *
 * @param ActiveSpriteOffsetY:num
 * @text Offset Y
 * @parent ActivePartyMapSprite
 * @desc If showing map sprites, offset the y coordinate here from bottom.
 * @default 4
 *
 * @param ActivePartySvBattler
 * @text Sideview Battler
 * @parent ActivePartyGraphic:str
 *
 * @param ActiveBattlerOffsetX:num
 * @text Offset X
 * @parent ActivePartySvBattler
 * @desc If showing sideview battlers, offset the x coordinate here from center.
 * @default 0
 *
 * @param ActiveBattlerOffsetY:num
 * @text Offset Y
 * @parent ActivePartySvBattler
 * @desc If showing sideview battlers, offset the y coordinate here from bottom.
 * @default 4
 *
 * @param ActivePartyWindowRect:func
 * @text JS: X, Y, W, H
 * @parent ActivePartyWindow
 * @type note
 * @desc Code used to determine the dimensions for this window.
 * @default "const wx = 0;\nconst wy = this._activePartyLabel.y + this._activePartyLabel.height;\nconst ww = Graphics.boxWidth;\nconst wh = ImageManager.faceHeight + $gameSystem.windowPadding() * 2 + 2;\nreturn new Rectangle(wx, wy, ww, wh);"
 *
 * @param ReservePartyLabel
 * @text Reserve Party Label
 *
 * @param ReservePartyLabelBgType:num
 * @text Background Type
 * @parent ReservePartyLabel
 * @type select
 * @option 0 - Window
 * @value 0
 * @option 1 - Dim
 * @value 1
 * @option 2 - Transparent
 * @value 2
 * @desc Select background type for this window.
 * @default 0
 *
 * @param ReservePartyLabelRect:func
 * @text JS: X, Y, W, H
 * @parent ReservePartyLabel
 * @type note
 * @desc Code used to determine the dimensions for this window.
 * @default "const ww = Math.max(240, Math.min(Graphics.boxWidth - 576, Math.round(Graphics.boxWidth / 2)));\nconst wx = this.isRightInputMode() ? (Graphics.boxWidth - ww) : 0;\nconst wy = this._activePartyWindow.y + this._activePartyWindow.height;\nconst wh = Window_Base.prototype.lineHeight();\nreturn new Rectangle(wx, wy, ww, wh);"
 *
 * @param ReservePartyWindow
 * @text Reserve Party Window
 *
 * @param ReservePartyWindowBgType:num
 * @text Background Type
 * @parent ReservePartyWindow
 * @type select
 * @option 0 - Window
 * @value 0
 * @option 1 - Dim
 * @value 1
 * @option 2 - Transparent
 * @value 2
 * @desc Select background type for this window.
 * @default 0
 *
 * @param ReserveCol:num
 * @text Columns
 * @parent ReservePartyWindow
 * @type number
 * @min 1
 * @desc How many columns do you want there to be for the window?
 * @default 1
 *
 * @param ReserveItemThickness:num
 * @text Row Thickness
 * @parent ReservePartyWindow
 * @type number
 * @min 1
 * @desc How many rows thick do you want selectable items to be?
 * @default 2
 *
 * @param ReservePartyGraphic:str
 * @text Actor Graphic
 * @parent ReservePartyWindow
 * @type select
 * @option None
 * @value none
 * @option Face
 * @value face
 * @option Map Sprite
 * @value sprite
 * @option Sideview Battler (Requires VisuMZ_1_MainMenuCore)
 * @value svbattler
 * @desc Choose how the actor graphics appear in the reserve party menu.
 * @default face
 *
 * @param ReservePartyMapSprite
 * @text Map Sprite
 * @parent ReservePartyGraphic:str
 *
 * @param ReserveSpriteOffsetX:num
 * @text Offset X
 * @parent ReservePartyMapSprite
 * @desc If showing map sprites, offset the x coordinate here from left.
 * @default 24
 *
 * @param ReserveSpriteOffsetY:num
 * @text Offset Y
 * @parent ReservePartyMapSprite
 * @desc If showing map sprites, offset the y coordinate here from bottom.
 * @default 4
 *
 * @param ReservePartySvBattler
 * @text Sideview Battler
 * @parent ReservePartyGraphic:str
 *
 * @param ReserveBattlerOffsetX:num
 * @text Offset X
 * @parent ReservePartySvBattler
 * @desc If showing sideview battlers, offset the x coordinate here from left.
 * @default 48
 *
 * @param ReserveBattlerOffsetY:num
 * @text Offset Y
 * @parent ReservePartySvBattler
 * @desc If showing sideview battlers, offset the y coordinate here from bottom.
 * @default 4
 *
 * @param ReservePartyWindowRect:func
 * @text JS: X, Y, W, H
 * @parent ReservePartyWindow
 * @type note
 * @desc Code used to determine the dimensions for this window.
 * @default "const ww = this._reservePartyLabel.width;\nconst wx = this._reservePartyLabel.x;\nconst wy = this._reservePartyLabel.y + this._reservePartyLabel.height;\nconst wh = this.mainAreaHeight() - this._reservePartyLabel.height - this._activePartyWindow.height - this._activePartyLabel.height;\nreturn new Rectangle(wx, wy, ww, wh);"
 *
 * @param StatusLabel
 * @text Status Label
 *
 * @param StatusLabelBgType:num
 * @text Background Type
 * @parent StatusLabel
 * @type select
 * @option 0 - Window
 * @value 0
 * @option 1 - Dim
 * @value 1
 * @option 2 - Transparent
 * @value 2
 * @desc Select background type for this window.
 * @default 0
 *
 * @param StatusLabelRect:func
 * @text JS: X, Y, W, H
 * @parent StatusLabel
 * @type note
 * @desc Code used to determine the dimensions for this window.
 * @default "const ww = Graphics.boxWidth - this._reservePartyLabel.width;\nconst wx = this.isRightInputMode() ? 0 : (Graphics.boxWidth - ww);\nconst wy = this._activePartyWindow.y + this._activePartyWindow.height;\nconst wh = Window_Base.prototype.lineHeight();\nreturn new Rectangle(wx, wy, ww, wh);"
 *
 * @param StatusWindow
 * @text Status Window
 *
 * @param StatusWindowBgType:num
 * @text Background Type
 * @parent StatusWindow
 * @type select
 * @option 0 - Window
 * @value 0
 * @option 1 - Dim
 * @value 1
 * @option 2 - Transparent
 * @value 2
 * @desc Select background type for this window.
 * @default 0
 *
 * @param StatusWindowDraw:func
 * @text JS: Draw Data
 * @parent StatusWindow
 * @type note
 * @desc Code used to draw the display data in the Status Window.
 * @default "// Draw Empty\nif (!this._actor) {\n    this.drawItemDarkRect(0, 0, this.innerWidth, this.innerHeight);\n    const y = Math.round((this.innerHeight - this.lineHeight()) / 2);\n    this.changeTextColor(ColorManager.systemColor());\n    this.drawText(TextManager.emptyPartyMember, 0, y, this.innerWidth, 'center');\n    return;\n}\n\n// Draw Face and Simple Status\nthis.drawActorFace(this._actor, 1, 0, ImageManager.faceWidth, ImageManager.faceHeight);\nthis.drawActorSimpleStatus(this._actor, ImageManager.faceWidth + 36, 0);\n\n// Declare Constants\nconst lineHeight = this.lineHeight();\nconst params = this.actorParams();\nconst paramWidth = Math.round(this.innerWidth / 2);\nconst paramHeight = Math.ceil(params.length / 2) * lineHeight;\nconst baseX = 0;\nlet x = 0;\nlet y = ImageManager.faceHeight + lineHeight / 2;\n\n// Draw Parameters\nfor (const param of params) {\n    this.drawItemDarkRect(x, y, paramWidth, lineHeight);\n    this.drawParamName(param, x, y, paramWidth);\n    this.drawParamValue(param, x, y, paramWidth);\n\n    if (x === baseX) {\n        x += paramWidth;\n    } else {\n        x = baseX;\n        y += lineHeight;\n    }\n}"
 *
 * @param StatusWindowRect:func
 * @text JS: X, Y, W, H
 * @parent StatusWindow
 * @type note
 * @desc Code used to determine the dimensions for this window.
 * @default "const ww = this._statusPartyLabel.width;\nconst wx = this.isRightInputMode() ? 0 : (Graphics.boxWidth - ww);\nconst wy = this._reservePartyWindow.y;\nconst wh = this._reservePartyWindow.height;\nreturn new Rectangle(wx, wy, ww, wh);"
 *
 * @param BattleSwitchWindow
 * @text Battle Switch Window
 *
 * @param BattleSwitchWindowBgType:num
 * @text Background Type
 * @parent BattleSwitchWindow
 * @type select
 * @option 0 - Window
 * @value 0
 * @option 1 - Dim
 * @value 1
 * @option 2 - Transparent
 * @value 2
 * @desc Select background type for this window.
 * @default 0
 *
 * @param BattleSwitchWindowRect:func
 * @text JS: X, Y, W, H
 * @parent BattleSwitchWindow
 * @type note
 * @desc Code used to determine the dimensions for this window.
 * Does not apply to Border Battle Layout style.
 * @default "const padding = $gameSystem.windowPadding() * 2;\nlet ww = 516 + padding;\nlet wh = Window_PartyBattleSwitch.prototype.itemHeight() * 4 + padding;\nlet wx = Math.round(Graphics.boxWidth - ww) / 2;\nlet wy = Math.round(Graphics.boxHeight - wh - this._statusWindow.height) / 2;\nwy = wy.clamp(0, Graphics.boxHeight - wh - this._statusWindow.height);\nreturn new Rectangle(wx, wy, ww, wh);"
 *
 */
//=============================================================================

const _0x1545=['isSceneMap','currentSymbol','drawItemImageFace','assistSortPartyMembers','HDGDk','mapId','Game_Party_initialize','isPartyCommandEnabled','GdyMG','drawItemImageSvActor','call','itemPadding','4811uuPoSJ','setHandler','Game_Battler_onBattleStart','playEquip','StatusLabelRect','drawActorPartyIconsVert','drawActorPartyIcons','buttonAssistKey3','onPartySwitchOk','VisuMZ_1_MainMenuCore','innerWidth','selectActor','open','faceHeight','WARNING:\x20Party\x20Change\x20command\x20is\x20unavailable\x20for\x20Window_PartyCommand\x20for\x20this\x20Battle\x20System','LxZRE','shift','1zdjsLG','max','sort','ARRAYJSON','refreshAllWindows','XCpHv','onActiveOk','_statusPartyLabel','createPartySwitchWindow','actor','fillRect','followers','Value','ActiveBattlerOffsetY','stepForward','jqjrJ','StatusLabelBgType','smoothSelect','_partyCommandWindow','AddRemoveCmd','rawBattleMembers','itemHeight','addNonBattleTestMembers','cursorUp','ceil','setStatusWindow','terminate','buttonAssistText1','_statusPartyWindow','round','drawActorName','_partyMemberSwitchWindow','isFormationChangeOk','changePaintOpacity','isRightInputMode','addChild','ReserveCol','clearPartySwitchCommandCooldown','ReserveParty','StatusWindowRect','updatePadding','_helpWindow','removeActorFromBattleMembers','_pagedownButton','status','_actorCommandWindow','VisuMZ_2_BattleSystemETB','lineHeight','createCustomBackgroundImages','isFTB','direction','setActor','update','parameters','contents','isShiftShortcutEnabled','createPageButtons','Game_Party_setupStartingMembers','updateHelp','placeBasicGauges','actor%1-stateIcon','CNlKF','ActivePartyLabelBgType','onReserveOk','emptyPartyMember','_tpbState','battlePartyChangeIcon','loadSvActor','Game_Unit_inBattle','drawActorClass','%1\x20is\x20incorrectly\x20placed\x20on\x20the\x20plugin\x20list.\x0aIt\x20is\x20a\x20Tier\x20%2\x20plugin\x20placed\x20over\x20other\x20Tier\x20%3\x20plugins.\x0aPlease\x20reorder\x20the\x20plugin\x20list\x20from\x20smallest\x20to\x20largest\x20tier\x20numbers.','activeParty','updatePartySwitch','maxItems','reservePartyWindowRect','VisuMZ_2_BattleSystemBTB','active','sprite','text','NgLXT','Window_PartyCommand_updateHelp','initMaxBattleMembers','VisuMZ_0_CoreEngine','registerCommand','Game_Actor_setup','initialize','RequirePartyMembers','Window_ActorCommand_updateHelp','processOk','increaseTurn','AssistRemove','isActiveTpb','postPartySwitchMenuTpb','applyBattlePartySwitchCooldown','_pageupButton','getBackgroundOpacity','isPTB','drawActorSimpleStatus','isPreviousScene','refresh','startSwitchInAnimation','MaxBattleMembers','PartySystem','hlVke','drawText','drawActorFace','playCursorSound','Scene_Battle_isTimeActive','TCKsH','floor','ActivePartyGraphic','_battleMembers','popScene','nameStartPosition','recoverAll','jIcDM','processDrawItem','createBackground','createActorCommandWindow','_activePartyLabel','_scene','itemRect','reserveMembers','BattleManager_setup','assistSwapOutPartyMember','_partySystemBattleCommandCooldown','nAWbw','changeLevel','itemRectWithPadding','concat','BattleSwitchWindowRect','yfumJ','_reservePartyWindow','checkShiftSortShortcut','drawActorPartyIconsHorz','isAlive','svbattler','updateBattleProcess','780953GDZhCK','iconWidth','zFUga','includes','isTriggered','Game_Party_swapOrder','battlePartySwitchCooldown','ActivePartyLabelRect','_rowThickness','faceName','createInnerSprite','Status','_lastIndex','addActor','match','ActorCmdWinAddParty','SceneManager_isPreviousSceneBattleTransitionable','General','snapForBackground','FUNC','LockIcon','removePartyMember','Scene_Battle_createAllWindows','isImmediateTpb','OCmyL','lockPartyMemberIcon','canSwitchPartyInBattle','_activePartyWindow','regenerateAll','battler','_statusWindow','BattleSwitchWindowBgType','loadPartyImages','Game_Battler_regenerateAll','helpAreaHeight','actorId','SwitchOutAnimation','getInputButtonString','addPartyCommand','reservePartyLabelRect','Scene_Base_isAutosaveEnabled','1FQIHkE','rRgDn','systemColor','ofiuI','addFormationCommand','push','ReservePartyLabelRect','_tpbChargeTime','isCTB','isAnyInputWindowActive','statusWindowRect','SFXMb','getParamValue','Srxko','updateBattlePartySwitchCooldown','Game_Party_setupBattleTest','quickSwap','create','battleMembers','ARRAYSTRUCT','sortActionOrdersBTB','makeActions','statusLabelRect','Scene_Battle_isAnyInputWindowActive','VisuMZ_2_BattleSystemFTB','initPartySystem','teamBasedFirstAvailableMember','width','processCancel','otbReturnBattlerToTurnOrders','filter','assistRemovePartyMember','oOqjM','changeTextColor','loadFace','slice','_partySystemSwitchOut','MoveRandomToActive','_callSceneParty','paramValueByName','Scene_Battle_updateBattleProcess','loadTitle2','Game_Troop_increaseTurn','NUM','_battleMaxSize','isQueueFormationMenu','_partySwitchDuration','isShiftRemoveShortcutEnabled','%1\x20is\x20missing\x20a\x20required\x20plugin.\x0aPlease\x20install\x20%2\x20into\x20the\x20Plugin\x20Manager.','iconHeight','_callPartyMemberSwitch','QueuePartyScene','_subject','isFormationCommandAdded','_debug','_otb_actionBattlersNext','StatusWindowBgType','battlePartySwitchCmd','reserveParty','isAutosaveEnabled','uiInputPosition','axQdf','ReservePartyWindowRect','drawItemImage','kGojT','processCursorMove','DisplayedParams','ensureCursorVisible','itemLineRect','clearPartyBattleCommandCooldown','format','swapOrderPartySystemPlugin','loadCharacter','ReserveBattlerOffsetX','VisuMZ_2_BattleSystemPTB','_clickHandler','exit','addRemoveCommand','random','gewzS','BgFilename2','prototype','CoreEngine','checkShiftRemoveShortcut','currentActor','anyRequiredPartyMembersInReserve','drawItemImageSprite','addActorToBattleMembersAtIndex','ARRAYNUM','trim','_backSprite1','SceneManager_isNextSceneBattleTransitionable','getPartySystemBackColor','reselect','addText','maxCols','BattlePartyCmd','drawParamText','padding','addLoadListener','isCurrentItemEnabled','activePartyLabelRect','isSTB','setBattler','tpbImmediateAction','drawSvActor','allMembers','1573984NUFAlb','version','hpColor','isOTB','center','isTimeActive','activate','isPartyCommandAdded','_partySwitchBattleCommandCooldown','Game_Party_addActor','processPartySwitchMember','dEDsN','return\x200','Actors','uUnIF','_actorGraphic','callPartyMemberSwitch','defaultMaxBattleMembers','Window','_reservePartyLabel','cancel','%1\x27s\x20version\x20does\x20not\x20match\x20plugin\x27s.\x20Please\x20update\x20it\x20in\x20the\x20Plugin\x20Manager.','battlePartyChangeCmd','innerHeight','createActivePartyLabel','battlePartySwitchCmdHelp','tLIzi','preparePartySwitchMember','ActiveParty','SnapshotOpacity','_partySwitchTargetActor','setBackgroundOpacity','rearrangePartyActors','assistSwapInPartyMember','Require','initEquips','Settings','setupStartingMembers','setBackgroundType','actorParams','_inputting','partyChangeRefresh','battlerName','description','1iPDIqf','_logWindow','WKmuD','loadTitle1','drawItem','createStatusWindow','maxBattleMembers','ActivePartyWindowRect','faceWidth','Sprite_Actor_update','#%1','Scene_Battle_createPartyCommandWindowBattleCore','getColor','4120612eGneyD','createPartyCommandWindowBattleCore','BattleHelpFormation','NzHwR','_partyLocked','startMove','statusParty','removeActionBattlersOTB','addCommand','characterName','partySwitchWindowRectBorder','commandPartyMemberSwitch','_actors','ODqbL','MoveActorsToActive','ActiveSpriteOffsetX','param','initBattleMembers','AssistSort','AnSpY','dimColor2','parse','TxeNb','AssistSwapIn','_battleSystemIncompatibilityError','length','requiredPartyMemberIcon','ARRAYEVAL','clear','cursorPagedown','right','WAbOQ','formation','YtaeR','ActivePartyWindowBgType','_currentActor','Vocab','Scene_Battle_createActorCommandWindow','gXlPU','_tpbSceneChangeCacheActor','OAiRr','drawDarkRect','testBattlers','DrawBackRect','select','hasBattleSystemIncompatibilities','border','drawItemDarkRect','gyCdE','onBattleStart','isSceneBattle','_actor','toLowerCase','needsPageButtons','drawItemStatus','NcNAk','drawRemoveCommand','ReserveSpriteOffsetY','AssistSwapPosition','MovePartyIndexToReserve','deactivate','cursorPageup','VisuMZ_2_BattleSystemOTB','name','setBattlePartySwitchCooldown','\x5cI[%1]%2','_actionBattlers','isEnabled','isCancelEnabled','_partyRequired','isShowPartySwitchOutAnimation','isActor','isTpb','members','onReserveCancel','height','isBTB','HSEMi','Remove','ReserveSpriteOffsetX','changeMaxBattleMembers','YBTJA','activePartyWindowRect','face','startOpacity','wXBWY','charged','centerSprite','BattleSwitchOut','isPreviousSceneBattleTransitionable','partySwitchWindowRect','onBattlePartySwitch','map','createActivePartyWindow','drawIcon','level','BgSettings','TipmU','isNextScene','_windowLayer','paJEC','constructor','setup','ReserveItemThickness','skillItemWindowRectBorderStyle','VisuMZ_2_BattleSystemSTB','BgFilename1','ActiveBattlerOffsetX','ReserveBattlerOffsetY','close','inBattle','ActiveTpbFormationMessage','startSwitchOutAnimation','createStatusLabel','bitmap','setPartyRequirement','gaugeBackColor','bind','onPartySwitchCancel','aOxrJ','952895NZukRB','BattleHelpSwitch','buttonAssistText3','omlLh','createReservePartyLabel','1061683SSkNyU','callUpdateHelp','drawItemEmpty','indexOf','adjustSprite','setupBattleTest','requestRefresh','paintOpacity','ReservePartyLabelBgType','drawActorCharacter','zSqAz','addWindow','min','ConvertParams','drawParamValue','isOkEnabled','_bypassAutoSavePartySystem','buttonAssistText4','checkInitBattleMembers','EVAL','remove','index','createAllWindows','isSceneParty','swapOrder','gradientFillRect','111vINKLx','textColor','addActorToBattleMembers','_backSprite2','isRequiredInParty','resetFontSettings','isFormationCommandEnabled','assistSwapPositions','callFormation','makeActionOrders','commandStyle','drawParamName','11135mcLtda','Param','refreshOG','uiMenuStyle','272LGgbmm','dimColor1','Game_Party_removeActor','setText','battlePartyChangeCmdHelp','isAppeared','KJQgK','commandFormation','StatusWindowDraw'];const _0x55fab9=_0xc3fe;(function(_0x3e1af4,_0xb2497c){const _0x44ae41=_0xc3fe;while(!![]){try{const _0x3d7ff1=parseInt(_0x44ae41(0x1d0))*parseInt(_0x44ae41(0x180))+parseInt(_0x44ae41(0x31a))*-parseInt(_0x44ae41(0x17b))+parseInt(_0x44ae41(0x2ee))+parseInt(_0x44ae41(0x25a))*parseInt(_0x44ae41(0x283))+-parseInt(_0x44ae41(0x1aa))*-parseInt(_0x44ae41(0x1bf))+parseInt(_0x44ae41(0x19a))*parseInt(_0x44ae41(0x1a6))+-parseInt(_0x44ae41(0x327));if(_0x3d7ff1===_0xb2497c)break;else _0x3e1af4['push'](_0x3e1af4['shift']());}catch(_0x18c34b){_0x3e1af4['push'](_0x3e1af4['shift']());}}}(_0x1545,0xd8b8a));var label='PartySystem',tier=tier||0x0,dependencies=[],pluginData=$plugins[_0x55fab9(0x2a1)](function(_0x32b392){const _0x507e94=_0x55fab9;return _0x32b392[_0x507e94(0x1fc)]&&_0x32b392[_0x507e94(0x319)][_0x507e94(0x25d)]('['+label+']');})[0x0];VisuMZ[label][_0x55fab9(0x312)]=VisuMZ[label][_0x55fab9(0x312)]||{},VisuMZ[_0x55fab9(0x18d)]=function(_0x396012,_0x588590){const _0x4abda2=_0x55fab9;for(const _0x55296c in _0x588590){if(_0x4abda2(0x18a)!=='iwygO'){if(_0x55296c['match'](/(.*):(.*)/i)){const _0x4e1134=String(RegExp['$1']),_0x1e07b9=String(RegExp['$2'])['toUpperCase']()[_0x4abda2(0x2dc)]();let _0x3eb4c6,_0x284516,_0x4c04ad;switch(_0x1e07b9){case _0x4abda2(0x2ae):_0x3eb4c6=_0x588590[_0x55296c]!==''?Number(_0x588590[_0x55296c]):0x0;break;case _0x4abda2(0x2db):_0x284516=_0x588590[_0x55296c]!==''?JSON[_0x4abda2(0x33c)](_0x588590[_0x55296c]):[],_0x3eb4c6=_0x284516[_0x4abda2(0x15f)](_0x424229=>Number(_0x424229));break;case _0x4abda2(0x193):_0x3eb4c6=_0x588590[_0x55296c]!==''?eval(_0x588590[_0x55296c]):null;break;case _0x4abda2(0x342):_0x284516=_0x588590[_0x55296c]!==''?JSON[_0x4abda2(0x33c)](_0x588590[_0x55296c]):[],_0x3eb4c6=_0x284516['map'](_0x2129d3=>eval(_0x2129d3));break;case'JSON':_0x3eb4c6=_0x588590[_0x55296c]!==''?JSON[_0x4abda2(0x33c)](_0x588590[_0x55296c]):'';break;case _0x4abda2(0x1d3):_0x284516=_0x588590[_0x55296c]!==''?JSON[_0x4abda2(0x33c)](_0x588590[_0x55296c]):[],_0x3eb4c6=_0x284516[_0x4abda2(0x15f)](_0x341618=>JSON[_0x4abda2(0x33c)](_0x341618));break;case _0x4abda2(0x26d):_0x3eb4c6=_0x588590[_0x55296c]!==''?new Function(JSON[_0x4abda2(0x33c)](_0x588590[_0x55296c])):new Function(_0x4abda2(0x2fa));break;case'ARRAYFUNC':_0x284516=_0x588590[_0x55296c]!==''?JSON[_0x4abda2(0x33c)](_0x588590[_0x55296c]):[],_0x3eb4c6=_0x284516[_0x4abda2(0x15f)](_0x4bff2b=>new Function(JSON[_0x4abda2(0x33c)](_0x4bff2b)));break;case'STR':_0x3eb4c6=_0x588590[_0x55296c]!==''?String(_0x588590[_0x55296c]):'';break;case'ARRAYSTR':_0x284516=_0x588590[_0x55296c]!==''?JSON['parse'](_0x588590[_0x55296c]):[],_0x3eb4c6=_0x284516[_0x4abda2(0x15f)](_0x2d0c2a=>String(_0x2d0c2a));break;case'STRUCT':_0x4c04ad=_0x588590[_0x55296c]!==''?JSON[_0x4abda2(0x33c)](_0x588590[_0x55296c]):{},_0x3eb4c6=VisuMZ[_0x4abda2(0x18d)]({},_0x4c04ad);break;case _0x4abda2(0x296):_0x284516=_0x588590[_0x55296c]!==''?JSON['parse'](_0x588590[_0x55296c]):[],_0x3eb4c6=_0x284516[_0x4abda2(0x15f)](_0x5c7345=>VisuMZ[_0x4abda2(0x18d)]({},JSON[_0x4abda2(0x33c)](_0x5c7345)));break;default:continue;}_0x396012[_0x4e1134]=_0x3eb4c6;}}else _0x219bfd[_0x4abda2(0x236)][_0x4abda2(0x2f7)]['call'](this,_0x3cd5f7),this[_0x4abda2(0x19c)](_0x2112a2),_0x124013['isSceneBattle']()&&(_0x57c88d[_0x4abda2(0x365)]&&_0x28e2f9[_0x4abda2(0x2f1)]()&&(_0x52ba03[_0x4abda2(0x32e)](),_0x12593f[_0x4abda2(0x2a0)](_0x13335e[_0x4abda2(0x1d9)](_0x1cee36))));}return _0x396012;},(_0x5ae689=>{const _0x47f666=_0x55fab9,_0x20a576=_0x5ae689[_0x47f666(0x366)];for(const _0x12d587 of dependencies){if(_0x47f666(0x2fc)!==_0x47f666(0x2fc))_0x4f6165[_0x47f666(0x2ba)][_0x22ab54]=this;else{if(!Imported[_0x12d587]){alert(_0x47f666(0x2b3)[_0x47f666(0x2c9)](_0x20a576,_0x12d587)),SceneManager['exit']();break;}}}const _0x2084f5=_0x5ae689['description'];if(_0x2084f5[_0x47f666(0x268)](/\[Version[ ](.*?)\]/i)){if('EkbeB'!=='EkbeB')_0x13259b[_0x47f666(0x32e)](),_0x425702['otbReturnBattlerToTurnOrders'](_0x26a495[_0x47f666(0x1d9)](_0x2a6dac));else{const _0x41bf78=Number(RegExp['$1']);_0x41bf78!==VisuMZ[label][_0x47f666(0x2ef)]&&(alert(_0x47f666(0x303)[_0x47f666(0x2c9)](_0x20a576,_0x41bf78)),SceneManager[_0x47f666(0x2cf)]());}}if(_0x2084f5[_0x47f666(0x268)](/\[Tier[ ](\d+)\]/i)){const _0x1c65d5=Number(RegExp['$1']);_0x1c65d5<tier?(alert(_0x47f666(0x216)[_0x47f666(0x2c9)](_0x20a576,_0x1c65d5,tier)),SceneManager[_0x47f666(0x2cf)]()):tier=Math[_0x47f666(0x1d1)](_0x1c65d5,tier);}VisuMZ[_0x47f666(0x18d)](VisuMZ[label][_0x47f666(0x312)],_0x5ae689[_0x47f666(0x205)]);})(pluginData),PluginManager[_0x55fab9(0x223)](pluginData[_0x55fab9(0x366)],'CallPartyScene',_0x50dcb8=>{const _0x2af2d5=_0x55fab9;SceneManager[_0x2af2d5(0x288)](Scene_Party);}),PluginManager['registerCommand'](pluginData[_0x55fab9(0x366)],'ChangeMaxBattleMembers',_0x4f6231=>{const _0xef745e=_0x55fab9;if($gameParty[_0xef745e(0x171)]())return;VisuMZ['ConvertParams'](_0x4f6231,_0x4f6231);const _0x8e162e=_0x4f6231[_0xef745e(0x1dc)];$gameParty['changeMaxBattleMembers'](_0x8e162e);}),PluginManager[_0x55fab9(0x223)](pluginData[_0x55fab9(0x366)],_0x55fab9(0x335),_0x51d648=>{const _0x21a2d8=_0x55fab9;if(!SceneManager[_0x21a2d8(0x1b3)]())return;VisuMZ[_0x21a2d8(0x18d)](_0x51d648,_0x51d648);const _0x2c0572=_0x51d648[_0x21a2d8(0x2fb)];for(const _0x1df552 of _0x2c0572){if(_0x21a2d8(0x164)===_0x21a2d8(0x164))$gameParty[_0x21a2d8(0x19c)](_0x1df552);else{const _0x5e0b2c=this[_0x21a2d8(0x281)]();this[_0x21a2d8(0x301)]=new _0x5082d6(_0x5e0b2c,_0x74c77f['reserveParty']),this[_0x21a2d8(0x301)][_0x21a2d8(0x314)](_0x2d9ee2[_0x21a2d8(0x236)]['Settings'][_0x21a2d8(0x300)]['ReservePartyLabelBgType']),this[_0x21a2d8(0x18b)](this['_reservePartyLabel']);}}$gamePlayer['refresh']();}),PluginManager['registerCommand'](pluginData[_0x55fab9(0x366)],'MoveActorsToReserve',_0x5dfd5c=>{const _0xe54cb3=_0x55fab9;if(!SceneManager[_0xe54cb3(0x1b3)]())return;VisuMZ['ConvertParams'](_0x5dfd5c,_0x5dfd5c);const _0xcaf7dd=_0x5dfd5c['Actors'];for(const _0x2406a7 of _0xcaf7dd){if($gameParty[_0xe54cb3(0x295)]()[_0xe54cb3(0x340)]<=0x1)break;$gameParty[_0xe54cb3(0x1fa)](_0x2406a7);}$gamePlayer[_0xe54cb3(0x233)]();}),PluginManager[_0x55fab9(0x223)](pluginData[_0x55fab9(0x366)],_0x55fab9(0x362),_0x847205=>{const _0x3d7100=_0x55fab9;if(!SceneManager['isSceneMap']())return;if($gameParty[_0x3d7100(0x295)]()['length']<=0x1)return;if(!$gameParty[_0x3d7100(0x23f)])return;if($gameParty[_0x3d7100(0x23f)][_0x3d7100(0x340)]<=0x0)return;VisuMZ[_0x3d7100(0x18d)](_0x847205,_0x847205);const _0x222187=_0x847205['Index'],_0x5328c8=$gameParty[_0x3d7100(0x23f)][_0x222187];$gameParty[_0x3d7100(0x1fa)](_0x5328c8),$gamePlayer[_0x3d7100(0x233)]();}),PluginManager[_0x55fab9(0x223)](pluginData[_0x55fab9(0x366)],_0x55fab9(0x2a8),_0x37946b=>{const _0x1bf3b8=_0x55fab9;if(!SceneManager[_0x1bf3b8(0x1b3)]())return;if($gameParty['battleMembers']()[_0x1bf3b8(0x340)]>=$gameParty[_0x1bf3b8(0x320)]())return;if($gameParty[_0x1bf3b8(0x24a)]()[_0x1bf3b8(0x340)]<=0x0)return;const _0x5518ac=$gameParty[_0x1bf3b8(0x24a)](),_0x10b6cc=_0x5518ac[Math[_0x1bf3b8(0x23d)](Math[_0x1bf3b8(0x2d1)]()*_0x5518ac[_0x1bf3b8(0x340)])],_0x31ef1f=_0x10b6cc[_0x1bf3b8(0x27d)]();$gameParty[_0x1bf3b8(0x19c)](_0x31ef1f),$gamePlayer[_0x1bf3b8(0x233)]();}),PluginManager[_0x55fab9(0x223)](pluginData[_0x55fab9(0x366)],'LockPartyMembers',_0x5b8420=>{const _0x19edc2=_0x55fab9;VisuMZ[_0x19edc2(0x18d)](_0x5b8420,_0x5b8420);const _0x3782f6=_0x5b8420['Actors'][_0x19edc2(0x15f)](_0x4b74e2=>$gameActors[_0x19edc2(0x1d9)](_0x4b74e2))[_0x19edc2(0x194)](null),_0x5f3243=_0x5b8420['Lock'];for(const _0x1cdbcb of _0x3782f6){if(!_0x1cdbcb)continue;_0x1cdbcb['setPartyLock'](_0x5f3243);}}),PluginManager[_0x55fab9(0x223)](pluginData[_0x55fab9(0x366)],_0x55fab9(0x226),_0xaa22a=>{const _0x42249f=_0x55fab9;VisuMZ[_0x42249f(0x18d)](_0xaa22a,_0xaa22a);const _0x5763b9=_0xaa22a['Actors'][_0x42249f(0x15f)](_0x463306=>$gameActors['actor'](_0x463306))[_0x42249f(0x194)](null),_0x2f6c8e=_0xaa22a[_0x42249f(0x310)];for(const _0x4ceac3 of _0x5763b9){if(!_0x4ceac3)continue;_0x4ceac3['setPartyRequirement'](_0x2f6c8e);}}),ImageManager[_0x55fab9(0x273)]=VisuMZ[_0x55fab9(0x236)]['Settings'][_0x55fab9(0x26b)][_0x55fab9(0x26e)],ImageManager['requiredPartyMemberIcon']=VisuMZ['PartySystem']['Settings'][_0x55fab9(0x26b)]['RequireIcon'],TextManager[_0x55fab9(0x217)]=VisuMZ[_0x55fab9(0x236)]['Settings'][_0x55fab9(0x34b)][_0x55fab9(0x30a)],TextManager[_0x55fab9(0x2bd)]=VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x312)][_0x55fab9(0x34b)][_0x55fab9(0x1f6)],TextManager['statusParty']=VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x312)][_0x55fab9(0x34b)][_0x55fab9(0x265)],TextManager[_0x55fab9(0x210)]=VisuMZ['PartySystem'][_0x55fab9(0x312)][_0x55fab9(0x34b)]['Empty'],TextManager['removePartyMember']=VisuMZ['PartySystem'][_0x55fab9(0x312)]['Vocab'][_0x55fab9(0x375)],TextManager[_0x55fab9(0x1a1)]=VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x312)]['Vocab'][_0x55fab9(0x361)],TextManager['assistRemovePartyMember']=VisuMZ['PartySystem'][_0x55fab9(0x312)][_0x55fab9(0x34b)][_0x55fab9(0x22a)],TextManager['assistSortPartyMembers']=VisuMZ['PartySystem'][_0x55fab9(0x312)]['Vocab'][_0x55fab9(0x339)],TextManager[_0x55fab9(0x30f)]=VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x312)][_0x55fab9(0x34b)][_0x55fab9(0x33e)],TextManager[_0x55fab9(0x24c)]=VisuMZ['PartySystem'][_0x55fab9(0x312)][_0x55fab9(0x34b)]['AssistSwapOut'],ColorManager[_0x55fab9(0x326)]=function(_0x49a0d7){const _0x4efb7a=_0x55fab9;return _0x49a0d7=String(_0x49a0d7),_0x49a0d7[_0x4efb7a(0x268)](/#(.*)/i)?_0x4efb7a(0x324)['format'](String(RegExp['$1'])):this[_0x4efb7a(0x19b)](Number(_0x49a0d7));},SceneManager[_0x55fab9(0x197)]=function(){const _0x160472=_0x55fab9;return this[_0x160472(0x248)]&&this[_0x160472(0x248)][_0x160472(0x168)]===Scene_Party;},SceneManager[_0x55fab9(0x1b3)]=function(){const _0x583479=_0x55fab9;return this['_scene']&&this['_scene'][_0x583479(0x168)]===Scene_Map;},VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x24b)]=BattleManager['setup'],BattleManager[_0x55fab9(0x169)]=function(_0x250aec,_0x4c695c,_0x1e40b4){const _0x2217c=_0x55fab9;VisuMZ['PartySystem'][_0x2217c(0x24b)][_0x2217c(0x1bd)](this,_0x250aec,_0x4c695c,_0x1e40b4),$gameParty[_0x2217c(0x2c8)]();},VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x1c1)]=Game_Battler[_0x55fab9(0x2d4)][_0x55fab9(0x358)],Game_Battler[_0x55fab9(0x2d4)][_0x55fab9(0x358)]=function(_0x45f9ec){const _0x323b72=_0x55fab9;VisuMZ[_0x323b72(0x236)]['Game_Battler_onBattleStart'][_0x323b72(0x1bd)](this,_0x45f9ec);if(this['isActor']())this['clearPartySwitchCommandCooldown']();},VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x27b)]=Game_Battler[_0x55fab9(0x2d4)][_0x55fab9(0x276)],Game_Battler[_0x55fab9(0x2d4)][_0x55fab9(0x276)]=function(){const _0x599efd=_0x55fab9;VisuMZ[_0x599efd(0x236)][_0x599efd(0x27b)]['call'](this);if(this[_0x599efd(0x36e)]())this[_0x599efd(0x291)]();},VisuMZ[_0x55fab9(0x236)]['Game_Actor_setup']=Game_Actor[_0x55fab9(0x2d4)][_0x55fab9(0x169)],Game_Actor['prototype'][_0x55fab9(0x169)]=function(_0x529939){const _0x21de7e=_0x55fab9;VisuMZ[_0x21de7e(0x236)][_0x21de7e(0x224)][_0x21de7e(0x1bd)](this,_0x529939),this[_0x21de7e(0x29c)](),this[_0x21de7e(0x1f5)]();},Game_Actor[_0x55fab9(0x2d4)][_0x55fab9(0x29c)]=function(){const _0x1967ac=_0x55fab9;this['_partyLocked']=![],this[_0x1967ac(0x36c)]=![];},Game_Actor[_0x55fab9(0x2d4)][_0x55fab9(0x1f0)]=function(){const _0x4b7dac=_0x55fab9;if(this[_0x4b7dac(0x32b)]===undefined)this[_0x4b7dac(0x29c)]();return!this[_0x4b7dac(0x32b)];},Game_Actor[_0x55fab9(0x2d4)]['setPartyLock']=function(_0x1ab340){const _0x31bc11=_0x55fab9;if(this[_0x31bc11(0x32b)]===undefined)this['initPartySystem']();this[_0x31bc11(0x32b)]=_0x1ab340;},Game_Actor[_0x55fab9(0x2d4)][_0x55fab9(0x19e)]=function(){const _0x10e97f=_0x55fab9;if(this[_0x10e97f(0x36c)]===undefined)this[_0x10e97f(0x29c)]();return this['_partyRequired'];},Game_Actor['prototype'][_0x55fab9(0x176)]=function(_0x2547ce){const _0x2ffa23=_0x55fab9;if(this['_partyRequired']===undefined)this[_0x2ffa23(0x29c)]();this['_partyRequired']=_0x2547ce;},Game_Actor['prototype'][_0x55fab9(0x1f5)]=function(){this['_partySwitchBattleCommandCooldown']=0x0;},Game_Actor['prototype'][_0x55fab9(0x274)]=function(){const _0x21ebd2=_0x55fab9;if(this['_partySwitchBattleCommandCooldown']===undefined)this[_0x21ebd2(0x1f5)]();if(!this[_0x21ebd2(0x1f0)]())return![];if(this[_0x21ebd2(0x19e)]())return![];return this[_0x21ebd2(0x2f6)]<=0x0;},Game_Actor['prototype'][_0x55fab9(0x260)]=function(){const _0x1488c8=_0x55fab9;if(this['_partySwitchBattleCommandCooldown']===undefined)this['clearPartySwitchCommandCooldown']();return this[_0x1488c8(0x2f6)];},Game_Actor[_0x55fab9(0x2d4)][_0x55fab9(0x367)]=function(_0x1d4e6e){const _0x4fa469=_0x55fab9;if(this[_0x4fa469(0x2f6)]===undefined)this[_0x4fa469(0x1f5)]();this[_0x4fa469(0x2f6)]=_0x1d4e6e||0x0;},Game_Actor[_0x55fab9(0x2d4)]['applyBattlePartySwitchCooldown']=function(){const _0x14d8d4=_0x55fab9;if(this['_partySwitchBattleCommandCooldown']===undefined)this['clearPartySwitchCommandCooldown']();const _0x3bbece=VisuMZ[_0x14d8d4(0x236)][_0x14d8d4(0x312)]['General']['ActorCmdCooldown'];this[_0x14d8d4(0x367)](_0x3bbece);},Game_Actor['prototype']['updateBattlePartySwitchCooldown']=function(){const _0x13b823=_0x55fab9;if(this['_partySwitchBattleCommandCooldown']===undefined)this[_0x13b823(0x1f5)]();this['_partySwitchBattleCommandCooldown']--;},Game_Actor[_0x55fab9(0x2d4)]['onBattlePartySwitch']=function(_0x9d9e98){const _0x53f349=_0x55fab9;Imported['VisuMZ_2_BattleSystemCTB']&&BattleManager[_0x53f349(0x28b)]()&&BattleManager['updateTurnOrderCTB']();Imported['VisuMZ_2_BattleSystemSTB']&&BattleManager[_0x53f349(0x2e9)]()&&(BattleManager['updateTurnOrderSTB'](),BattleManager[_0x53f349(0x2b7)]=this,BattleManager[_0x53f349(0x34a)]=this);if(Imported[_0x53f349(0x21b)]&&BattleManager[_0x53f349(0x373)]()){BattleManager[_0x53f349(0x2b7)]=undefined,BattleManager[_0x53f349(0x34a)]=this;const _0x25261a=BattleManager[_0x53f349(0x369)][_0x53f349(0x183)](_0x9d9e98);BattleManager['_actionBattlers'][_0x25261a]=this,BattleManager[_0x53f349(0x297)]();}Imported['VisuMZ_2_BattleSystemFTB']&&BattleManager[_0x53f349(0x201)]()&&(BattleManager['_subject']=this,BattleManager[_0x53f349(0x34a)]=this);if(Imported[_0x53f349(0x365)]&&BattleManager[_0x53f349(0x2f1)]()){BattleManager[_0x53f349(0x2b7)]=this,BattleManager['_currentActor']=this;for(let _0x528b7c=0x0;_0x528b7c<BattleManager[_0x53f349(0x369)][_0x53f349(0x340)];_0x528b7c++){const _0x382944=BattleManager[_0x53f349(0x369)][_0x528b7c];_0x382944===_0x9d9e98&&(_0x53f349(0x31c)!=='WKmuD'?this[_0x53f349(0x2f8)](_0x58c647):BattleManager[_0x53f349(0x369)][_0x528b7c]=this);}for(let _0x47295c=0x0;_0x47295c<BattleManager['_otb_actionBattlersNext'][_0x53f349(0x340)];_0x47295c++){if(_0x53f349(0x167)!=='paJEC'){_0x29bc42[_0x53f349(0x2d4)][_0x53f349(0x353)][_0x53f349(0x1bd)](this,_0xac813b);if(_0x27c04b>=0x0)this[_0x53f349(0x266)]=_0x4f2e50;}else{const _0x39ec88=BattleManager[_0x53f349(0x2ba)][_0x47295c];_0x39ec88===_0x9d9e98&&(BattleManager['_otb_actionBattlersNext'][_0x47295c]=this);}}}},VisuMZ['PartySystem'][_0x55fab9(0x214)]=Game_Unit[_0x55fab9(0x2d4)]['inBattle'],Game_Unit[_0x55fab9(0x2d4)][_0x55fab9(0x171)]=function(){const _0x3f5362=_0x55fab9;if(SceneManager[_0x3f5362(0x197)]())return![];return VisuMZ['PartySystem'][_0x3f5362(0x214)][_0x3f5362(0x1bd)](this);},Game_Party['defaultMaxBattleMembers']=VisuMZ[_0x55fab9(0x236)]['Settings'][_0x55fab9(0x26b)][_0x55fab9(0x235)],VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x1b9)]=Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x225)],Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x225)]=function(){const _0x3c9cd2=_0x55fab9;VisuMZ[_0x3c9cd2(0x236)][_0x3c9cd2(0x1b9)][_0x3c9cd2(0x1bd)](this),this['clearPartyBattleCommandCooldown'](),this[_0x3c9cd2(0x221)](),this[_0x3c9cd2(0x338)]();},Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x2c8)]=function(){const _0xe652d7=_0x55fab9;this[_0xe652d7(0x24d)]=0x0;},Game_Party['prototype'][_0x55fab9(0x274)]=function(){const _0x24b1ae=_0x55fab9;if(this['_partySystemBattleCommandCooldown']===undefined)this[_0x24b1ae(0x2c8)]();return this['_partySystemBattleCommandCooldown']<=0x0;},Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x260)]=function(){const _0x2f6f01=_0x55fab9;if(this[_0x2f6f01(0x24d)]===undefined)this[_0x2f6f01(0x2c8)]();return this[_0x2f6f01(0x24d)];},Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x367)]=function(_0x462ad4){const _0x13297d=_0x55fab9;if(this[_0x13297d(0x24d)]===undefined)this[_0x13297d(0x2c8)]();this[_0x13297d(0x24d)]=_0x462ad4;},Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x22d)]=function(){const _0x2bf02b=_0x55fab9;if(this[_0x2bf02b(0x24d)]===undefined)this['clearPartyBattleCommandCooldown']();this['_partySystemBattleCommandCooldown']=VisuMZ['PartySystem'][_0x2bf02b(0x312)][_0x2bf02b(0x26b)]['PartyCmdCooldown']||0x0;},Game_Party['prototype']['updateBattlePartySwitchCooldown']=function(){const _0x10f6b6=_0x55fab9;if(this[_0x10f6b6(0x24d)]===undefined)this[_0x10f6b6(0x2c8)]();this[_0x10f6b6(0x24d)]--;},Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x221)]=function(){this['_battleMaxSize']=0x0;},Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x377)]=function(_0x1f1ad2){const _0x57ce7e=_0x55fab9;this[_0x57ce7e(0x2af)]=_0x1f1ad2,this[_0x57ce7e(0x338)](!![]),$gamePlayer&&$gamePlayer[_0x57ce7e(0x1db)]()&&$gamePlayer[_0x57ce7e(0x1db)]()['changeMaxBattleMembers']();},Game_Followers['prototype']['changeMaxBattleMembers']=function(){const _0x5a970b=_0x55fab9;if(!SceneManager[_0x5a970b(0x1b3)]())return;this[_0x5a970b(0x169)]();const _0x5e0304=$gameMap[_0x5a970b(0x1b8)](),_0x3a20c2=$gamePlayer['x'],_0x33e1e2=$gamePlayer['y'],_0x57d403=$gamePlayer[_0x5a970b(0x202)]();$gameTemp['_bypassAutoSavePartySystem']=!![],$gamePlayer['reserveTransfer'](_0x5e0304,_0x3a20c2,_0x33e1e2,_0x57d403,0x0),setTimeout(this['clearBypassAutoSave'][_0x5a970b(0x178)](this),0x7d0);},Game_Followers[_0x55fab9(0x2d4)]['clearBypassAutoSave']=function(){$gameTemp['_bypassAutoSavePartySystem']=![];},VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x282)]=Scene_Base[_0x55fab9(0x2d4)][_0x55fab9(0x2be)],Scene_Base[_0x55fab9(0x2d4)][_0x55fab9(0x2be)]=function(){const _0x3199a2=_0x55fab9;if($gameTemp[_0x3199a2(0x190)])return![];return VisuMZ[_0x3199a2(0x236)][_0x3199a2(0x282)][_0x3199a2(0x1bd)](this);},Game_Party[_0x55fab9(0x2d4)]['maxBattleMembers']=function(){const _0x370ac5=_0x55fab9;if(this['_battleMaxSize']===undefined)this[_0x370ac5(0x338)]();return this[_0x370ac5(0x2af)]||Game_Party['defaultMaxBattleMembers'];},Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x192)]=function(){const _0x2acf32=_0x55fab9;if(this[_0x2acf32(0x2af)]===undefined)this['initBattleMembers']();if(!this[_0x2acf32(0x23f)])this[_0x2acf32(0x338)]();while(this[_0x2acf32(0x23f)][_0x2acf32(0x340)]<this['_battleMaxSize']){this[_0x2acf32(0x23f)][_0x2acf32(0x288)](0x0);}},Game_Party['prototype'][_0x55fab9(0x338)]=function(_0x1ffc23){const _0x4500be=_0x55fab9;!_0x1ffc23&&(_0x4500be(0x34d)!==_0x4500be(0x346)?this[_0x4500be(0x2af)]=Game_Party[_0x4500be(0x2ff)]:(_0x559ae5[_0x4500be(0x236)][_0x4500be(0x2ab)][_0x4500be(0x1bd)](this),this[_0x4500be(0x2a9)]&&!_0x2ea01b[_0x4500be(0x2b7)]&&this[_0x4500be(0x1a2)](),this[_0x4500be(0x2b5)]&&!_0x4a8d05[_0x4500be(0x2b7)]&&this['callPartyMemberSwitch']()));this['_battleMembers']=this[_0x4500be(0x333)][_0x4500be(0x2a6)](0x0,this[_0x4500be(0x2af)]);while(this['_battleMembers']['length']<this[_0x4500be(0x2af)]){_0x4500be(0x23c)===_0x4500be(0x23c)?this[_0x4500be(0x23f)][_0x4500be(0x288)](0x0):(_0x41a0cf[_0x4500be(0x2d4)][_0x4500be(0x208)]['call'](this),this[_0x4500be(0x22e)][_0x4500be(0x2ce)]=_0x30a591,this['_pagedownButton'][_0x4500be(0x2ce)]=_0xd2e184);}if($gamePlayer)$gamePlayer[_0x4500be(0x233)]();},Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x295)]=function(){const _0x10cac8=_0x55fab9;return this[_0x10cac8(0x1e4)]()[_0x10cac8(0x2a1)](_0x443108=>!!_0x443108);},Game_Party['prototype'][_0x55fab9(0x1e4)]=function(){const _0x56af6f=_0x55fab9;this['checkInitBattleMembers']();const _0x5a46b8=this['_battleMembers'][_0x56af6f(0x15f)](_0x13195b=>$gameActors[_0x56af6f(0x1d9)](_0x13195b));return SceneManager[_0x56af6f(0x197)]()?_0x5a46b8:_0x5a46b8['filter'](_0x31b91f=>_0x31b91f&&_0x31b91f[_0x56af6f(0x1af)]());},Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x24a)]=function(){const _0x141b69=_0x55fab9,_0x39f291=this[_0x141b69(0x295)]();return this[_0x141b69(0x2ed)]()[_0x141b69(0x2a1)](_0x11efe1=>!_0x39f291[_0x141b69(0x25d)](_0x11efe1));},VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x209)]=Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x313)],Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x313)]=function(){const _0x4bb6b9=_0x55fab9;VisuMZ[_0x4bb6b9(0x236)][_0x4bb6b9(0x209)][_0x4bb6b9(0x1bd)](this),this['initBattleMembers']();},VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x292)]=Game_Party['prototype']['setupBattleTest'],Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x185)]=function(){const _0x13f1ee=_0x55fab9;VisuMZ[_0x13f1ee(0x236)][_0x13f1ee(0x292)][_0x13f1ee(0x1bd)](this),this[_0x13f1ee(0x1e6)]();},Game_Party[_0x55fab9(0x2d4)]['setupBattleTestMembers']=function(){const _0xd3afb9=_0x55fab9;this[_0xd3afb9(0x2af)]=Game_Party['defaultMaxBattleMembers'],this[_0xd3afb9(0x23f)]=[],this['_actors']=[];for(const _0x2d0fd5 of $dataSystem[_0xd3afb9(0x351)]){if(_0xd3afb9(0x286)!==_0xd3afb9(0x290)){const _0x361d93=$gameActors[_0xd3afb9(0x1d9)](_0x2d0fd5['actorId']);if(!_0x361d93)continue;_0x361d93[_0xd3afb9(0x24f)](_0x2d0fd5[_0xd3afb9(0x162)],![]),_0x361d93[_0xd3afb9(0x311)](_0x2d0fd5['equips']),_0x361d93[_0xd3afb9(0x242)](),this['_battleMembers'][_0xd3afb9(0x288)](_0x2d0fd5[_0xd3afb9(0x27d)]),this[_0xd3afb9(0x333)]['push'](_0x2d0fd5[_0xd3afb9(0x27d)]);}else return this[_0xd3afb9(0x1e4)]()[_0xd3afb9(0x2a1)](_0x2b81bf=>!!_0x2b81bf);}while(this[_0xd3afb9(0x23f)]['length']<this['_battleMaxSize']){this['_battleMembers'][_0xd3afb9(0x288)](0x0);}while(this[_0xd3afb9(0x23f)][_0xd3afb9(0x340)]>this['maxBattleMembers']()){'ynuXN'===_0xd3afb9(0x237)?this['callPartyMemberSwitch']():this[_0xd3afb9(0x23f)]['pop']();}if($gamePlayer)$gamePlayer[_0xd3afb9(0x233)]();},Game_Party['prototype'][_0x55fab9(0x1e6)]=function(){const _0x2aebd9=_0x55fab9,_0x4c51b4=this[_0x2aebd9(0x295)]();for(let _0x10af14=0x1;_0x10af14<$dataActors[_0x2aebd9(0x340)];_0x10af14++){if('ODqbL'!==_0x2aebd9(0x334)){const _0xd44f7e=this[_0x2aebd9(0x15d)]();this[_0x2aebd9(0x1ef)]=new _0x5a3e76(_0xd44f7e),this['addWindow'](this[_0x2aebd9(0x1ef)]),this['_partyMemberSwitchWindow']['setHandler']('ok',this[_0x2aebd9(0x1c7)][_0x2aebd9(0x178)](this)),this['_partyMemberSwitchWindow']['setHandler'](_0x2aebd9(0x302),this[_0x2aebd9(0x179)][_0x2aebd9(0x178)](this));}else{const _0x22fb1f=$gameActors[_0x2aebd9(0x1d9)](_0x10af14);if(!_0x22fb1f)continue;if(_0x22fb1f['name']()[_0x2aebd9(0x340)]<=0x0)continue;if(_0x22fb1f[_0x2aebd9(0x366)]()[_0x2aebd9(0x268)](/-----/i))continue;if(_0x4c51b4[_0x2aebd9(0x25d)](_0x22fb1f))continue;this['_actors'][_0x2aebd9(0x288)](_0x22fb1f['actorId']());}}},VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x2f7)]=Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x267)],Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x267)]=function(_0x5019b1){const _0x39371a=_0x55fab9;VisuMZ[_0x39371a(0x236)][_0x39371a(0x2f7)][_0x39371a(0x1bd)](this,_0x5019b1),this[_0x39371a(0x19c)](_0x5019b1),SceneManager[_0x39371a(0x359)]()&&(Imported['VisuMZ_2_BattleSystemOTB']&&BattleManager['isOTB']()&&(BattleManager[_0x39371a(0x32e)](),BattleManager[_0x39371a(0x2a0)]($gameActors[_0x39371a(0x1d9)](_0x5019b1))));},Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x19c)]=function(_0x1adc94){const _0x5e86af=_0x55fab9;this[_0x5e86af(0x192)]();if(this[_0x5e86af(0x23f)][_0x5e86af(0x25d)](_0x1adc94))return;if(!this[_0x5e86af(0x333)][_0x5e86af(0x25d)](_0x1adc94))return;if(!this[_0x5e86af(0x23f)][_0x5e86af(0x25d)](0x0))return;const _0x149cf5=$gameActors[_0x5e86af(0x1d9)](_0x1adc94);if(!_0x149cf5)return;const _0x4aa28f=this['_battleMembers'][_0x5e86af(0x183)](0x0);if(_0x4aa28f<0x0)return;this[_0x5e86af(0x23f)][_0x4aa28f]=_0x1adc94,_0x149cf5[_0x5e86af(0x298)](),this['partyChangeRefresh']();},Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x2da)]=function(_0x5418c2,_0x11608a){const _0xda1d99=_0x55fab9;this[_0xda1d99(0x192)]();if(this[_0xda1d99(0x23f)][_0xda1d99(0x25d)](_0x5418c2))return;if(!this[_0xda1d99(0x23f)][_0xda1d99(0x25d)](0x0))return;const _0xc13bf9=$gameActors[_0xda1d99(0x1d9)](_0x5418c2);if(!_0xc13bf9)return;this[_0xda1d99(0x23f)][_0x11608a]=_0x5418c2,_0xc13bf9[_0xda1d99(0x298)](),this[_0xda1d99(0x317)]();},VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x1ac)]=Game_Party[_0x55fab9(0x2d4)]['removeActor'],Game_Party[_0x55fab9(0x2d4)]['removeActor']=function(_0x23555e){const _0x53c575=_0x55fab9;this['removeActorFromBattleMembers'](_0x23555e),VisuMZ[_0x53c575(0x236)][_0x53c575(0x1ac)]['call'](this,_0x23555e);},Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x1fa)]=function(_0x42da74){const _0xab2027=_0x55fab9;this[_0xab2027(0x192)]();if(!this[_0xab2027(0x23f)]['includes'](_0x42da74))return;if(_0x42da74<=0x0)return;const _0x596082=this[_0xab2027(0x23f)][_0xab2027(0x183)](_0x42da74);this[_0xab2027(0x23f)][_0x596082]=0x0,this[_0xab2027(0x333)][_0xab2027(0x194)](_0x42da74),this[_0xab2027(0x333)][_0xab2027(0x288)](_0x42da74),this[_0xab2027(0x317)]();},Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x317)]=function(){const _0x4d563f=_0x55fab9;this[_0x4d563f(0x30e)](),$gamePlayer[_0x4d563f(0x233)](),$gameMap[_0x4d563f(0x186)]();},Game_Party[_0x55fab9(0x2d4)]['rearrangePartyActors']=function(){const _0x3f1cbd=_0x55fab9;this[_0x3f1cbd(0x192)]();const _0x17f11e=this['battleMembers']()[_0x3f1cbd(0x251)](this[_0x3f1cbd(0x24a)]());this[_0x3f1cbd(0x333)]=_0x17f11e[_0x3f1cbd(0x15f)](_0x185322=>_0x185322?_0x185322[_0x3f1cbd(0x27d)]():0x0)[_0x3f1cbd(0x194)](0x0);},Game_Party[_0x55fab9(0x2d4)]['sortActors']=function(){const _0x47d394=_0x55fab9;this[_0x47d394(0x333)]['sort']((_0x153874,_0x49093a)=>_0x153874-_0x49093a),this[_0x47d394(0x30e)](),this[_0x47d394(0x317)]();},Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x2d8)]=function(){const _0x5ce862=_0x55fab9;for(const _0x4e8a15 of this[_0x5ce862(0x24a)]()){if(!_0x4e8a15)continue;if(_0x4e8a15[_0x5ce862(0x19e)]())return!![];}return![];},VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x25f)]=Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x198)],Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x198)]=function(_0x2a5c45,_0x381598){const _0x398f1f=_0x55fab9;VisuMZ[_0x398f1f(0x236)][_0x398f1f(0x25f)]['call'](this,_0x2a5c45,_0x381598),this['swapOrderPartySystemPlugin'](_0x2a5c45,_0x381598);},Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x2ca)]=function(_0x1507d7,_0x47dd91){const _0x121090=_0x55fab9;this[_0x121090(0x23f)]=[];for(let _0x124284=0x0;_0x124284<this['_actors'][_0x121090(0x340)];_0x124284++){if(_0x121090(0x284)!=='rRgDn')this['_backSprite1']=new _0x2a49d3(_0x498f05[_0x121090(0x31d)](_0x290952['BgFilename1'])),this[_0x121090(0x19d)]=new _0x1dba79(_0x5e1589[_0x121090(0x2ac)](_0x45ad9f[_0x121090(0x2d3)])),this[_0x121090(0x1f3)](this[_0x121090(0x2dd)]),this[_0x121090(0x1f3)](this[_0x121090(0x19d)]),this['_backSprite1'][_0x121090(0x175)][_0x121090(0x2e6)](this['adjustSprite'][_0x121090(0x178)](this,this[_0x121090(0x2dd)])),this[_0x121090(0x19d)][_0x121090(0x175)]['addLoadListener'](this[_0x121090(0x184)][_0x121090(0x178)](this,this['_backSprite2']));else{if(this[_0x121090(0x23f)][_0x121090(0x340)]>=this[_0x121090(0x320)]())break;this['_battleMembers'][_0x124284]=this[_0x121090(0x333)][_0x124284];}}$gamePlayer[_0x121090(0x233)]();},VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x2ad)]=Game_Troop[_0x55fab9(0x2d4)][_0x55fab9(0x229)],Game_Troop[_0x55fab9(0x2d4)][_0x55fab9(0x229)]=function(){const _0x475b92=_0x55fab9;VisuMZ[_0x475b92(0x236)][_0x475b92(0x2ad)][_0x475b92(0x1bd)](this),$gameParty[_0x475b92(0x291)]();},Scene_Menu['prototype'][_0x55fab9(0x1b1)]=function(){const _0x4b8f69=_0x55fab9;SceneManager[_0x4b8f69(0x288)](Scene_Party);};function Scene_Party(){const _0x116347=_0x55fab9;this[_0x116347(0x225)](...arguments);}Scene_Party[_0x55fab9(0x2d4)]=Object[_0x55fab9(0x294)](Scene_MenuBase[_0x55fab9(0x2d4)]),Scene_Party[_0x55fab9(0x2d4)]['constructor']=Scene_Party,Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x225)]=function(){const _0x59b879=_0x55fab9;this[_0x59b879(0x27a)](),Scene_MenuBase[_0x59b879(0x2d4)]['initialize'][_0x59b879(0x1bd)](this);},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x1f2)]=function(){const _0x123535=_0x55fab9;if(ConfigManager[_0x123535(0x1a9)]&&ConfigManager[_0x123535(0x2bf)]!==undefined)return ConfigManager[_0x123535(0x2bf)];else{if(ConfigManager['uiMenuStyle']===![]){if(_0x123535(0x37c)!==_0x123535(0x37c)){const _0x103a33=this[_0x123535(0x1d9)](_0x3f8652),_0x30b5c0=this[_0x123535(0x249)](_0x56a179),_0x5c06fc=_0x5cb27a[_0x123535(0x262)]===0x1;_0x30b5c0['x']+=_0x1b3ad9['iconWidth']*(_0x5c06fc?0x2:0x1);const _0x5dcb96=_0x83843d[_0x123535(0x236)]['Settings'][_0x123535(0x300)],_0xa6631a=_0x30b5c0['x']+_0x5dcb96[_0x123535(0x376)]+this['itemPadding'](),_0x470ea8=_0x30b5c0['y']+_0x30b5c0[_0x123535(0x372)]-_0x5dcb96[_0x123535(0x360)];this['drawActorCharacter'](_0x103a33,_0xa6631a,_0x470ea8);}else return![];}else{if('jqjrJ'!==_0x123535(0x1df))this[_0x123535(0x356)](_0x58185a,_0xae33d2,_0x3f2bac,_0x588ce7),this[_0x123535(0x1a5)](_0x81688d,_0x524abe,_0x1212f7,_0x292d68),this[_0x123535(0x18e)](_0x5b01f9,_0x3288ab,_0x3eaaf7,_0x33e7db),_0x427c12===_0x46f9a3?_0x5d3943+=_0x337b6e:(_0x4e9267=_0x17631b,_0x59068b+=_0x20cec3);else return Scene_MenuBase[_0x123535(0x2d4)][_0x123535(0x1f2)][_0x123535(0x1bd)](this);}}},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x27c)]=function(){return 0x0;},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x35c)]=function(){return!![];},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x208)]=function(){const _0x4219ac=_0x55fab9;Scene_MenuBase[_0x4219ac(0x2d4)][_0x4219ac(0x208)][_0x4219ac(0x1bd)](this),this[_0x4219ac(0x22e)][_0x4219ac(0x2ce)]=undefined,this[_0x4219ac(0x1fb)][_0x4219ac(0x2ce)]=undefined;},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x27a)]=function(){const _0x48a8c6=_0x55fab9;for(const _0x521adb of $gameParty[_0x48a8c6(0x370)]()){ImageManager[_0x48a8c6(0x2a5)](_0x521adb[_0x48a8c6(0x263)]()),ImageManager['loadCharacter'](_0x521adb[_0x48a8c6(0x330)]()),ImageManager[_0x48a8c6(0x213)](_0x521adb[_0x48a8c6(0x318)]());}},Scene_Party[_0x55fab9(0x2d4)]['create']=function(){const _0x112699=_0x55fab9;Scene_MenuBase['prototype'][_0x112699(0x294)]['call'](this),this[_0x112699(0x306)](),this[_0x112699(0x160)](),this['createReservePartyLabel'](),this['createReservePartyWindow'](),this['createStatusLabel'](),this[_0x112699(0x31f)]();},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x306)]=function(){const _0x4bf814=_0x55fab9,_0x25dbe8=this[_0x4bf814(0x2e8)]();this[_0x4bf814(0x247)]=new Window_PartyLabel(_0x25dbe8,TextManager[_0x4bf814(0x217)]),this['_activePartyLabel']['setBackgroundType'](VisuMZ[_0x4bf814(0x236)]['Settings'][_0x4bf814(0x300)][_0x4bf814(0x20e)]),this[_0x4bf814(0x18b)](this['_activePartyLabel']);},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x2e8)]=function(){const _0x4e7543=_0x55fab9;return VisuMZ[_0x4e7543(0x236)]['Settings'][_0x4e7543(0x300)][_0x4e7543(0x261)][_0x4e7543(0x1bd)](this);},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x160)]=function(){const _0x10d0cf=_0x55fab9,_0x164581=this['activePartyWindowRect']();this[_0x10d0cf(0x275)]=new Window_PartyActive(_0x164581),this['_activePartyWindow'][_0x10d0cf(0x314)](VisuMZ[_0x10d0cf(0x236)][_0x10d0cf(0x312)][_0x10d0cf(0x300)][_0x10d0cf(0x349)]),this[_0x10d0cf(0x275)][_0x10d0cf(0x1c0)]('ok',this[_0x10d0cf(0x1d6)][_0x10d0cf(0x178)](this)),this[_0x10d0cf(0x275)][_0x10d0cf(0x1c0)](_0x10d0cf(0x302),this[_0x10d0cf(0x240)]['bind'](this)),this[_0x10d0cf(0x18b)](this[_0x10d0cf(0x275)]);},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x379)]=function(){const _0x3bd00a=_0x55fab9;return VisuMZ[_0x3bd00a(0x236)][_0x3bd00a(0x312)][_0x3bd00a(0x300)][_0x3bd00a(0x321)][_0x3bd00a(0x1bd)](this);},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x1d6)]=function(){const _0x145678=_0x55fab9;this['_reservePartyWindow'][_0x145678(0x2f4)](),this[_0x145678(0x254)]['reselect']();},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x17f)]=function(){const _0x38f6ec=_0x55fab9,_0x12874d=this[_0x38f6ec(0x281)]();this[_0x38f6ec(0x301)]=new Window_PartyLabel(_0x12874d,TextManager[_0x38f6ec(0x2bd)]),this[_0x38f6ec(0x301)][_0x38f6ec(0x314)](VisuMZ[_0x38f6ec(0x236)][_0x38f6ec(0x312)][_0x38f6ec(0x300)][_0x38f6ec(0x188)]),this[_0x38f6ec(0x18b)](this['_reservePartyLabel']);},Scene_Party[_0x55fab9(0x2d4)]['reservePartyLabelRect']=function(){const _0x24afdb=_0x55fab9;return VisuMZ['PartySystem'][_0x24afdb(0x312)][_0x24afdb(0x300)][_0x24afdb(0x289)][_0x24afdb(0x1bd)](this);},Scene_Party[_0x55fab9(0x2d4)]['createReservePartyWindow']=function(){const _0x1e603e=_0x55fab9,_0x97e084=this[_0x1e603e(0x21a)]();this['_reservePartyWindow']=new Window_PartyReserve(_0x97e084),this[_0x1e603e(0x254)][_0x1e603e(0x314)](VisuMZ[_0x1e603e(0x236)][_0x1e603e(0x312)][_0x1e603e(0x300)]['ReservePartyWindowBgType']),this[_0x1e603e(0x254)][_0x1e603e(0x1c0)]('ok',this[_0x1e603e(0x20f)][_0x1e603e(0x178)](this)),this[_0x1e603e(0x254)][_0x1e603e(0x1c0)](_0x1e603e(0x302),this[_0x1e603e(0x371)]['bind'](this)),this[_0x1e603e(0x18b)](this[_0x1e603e(0x254)]);},Scene_Party[_0x55fab9(0x2d4)]['reservePartyWindowRect']=function(){const _0x4160cf=_0x55fab9;return VisuMZ[_0x4160cf(0x236)][_0x4160cf(0x312)][_0x4160cf(0x300)][_0x4160cf(0x2c1)]['call'](this);},Scene_Party[_0x55fab9(0x2d4)]['onReserveOk']=function(){const _0x415b53=_0x55fab9,_0x5ccfc5=this[_0x415b53(0x254)]['pendingIndex'](),_0x1bbe9c=this[_0x415b53(0x275)][_0x415b53(0x2d7)]();if(_0x5ccfc5<0x0){if('yfumJ'!==_0x415b53(0x253))return[0x2,0x3,0x4,0x5,0x6,0x7];else{if(_0x1bbe9c)$gameParty[_0x415b53(0x1fa)](_0x1bbe9c[_0x415b53(0x27d)]());}}else{const _0x2592a9=this[_0x415b53(0x254)][_0x415b53(0x2d7)]()[_0x415b53(0x27d)](),_0x3af140=this[_0x415b53(0x275)][_0x415b53(0x195)]();if(_0x1bbe9c)$gameParty[_0x415b53(0x1fa)](_0x1bbe9c[_0x415b53(0x27d)]());$gameParty[_0x415b53(0x2da)](_0x2592a9,_0x3af140);}this[_0x415b53(0x1d4)](),this['onReserveCancel']();},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x1d4)]=function(){const _0x2f4de1=_0x55fab9;this[_0x2f4de1(0x275)][_0x2f4de1(0x233)](),this[_0x2f4de1(0x254)][_0x2f4de1(0x233)]();},Scene_Party['prototype'][_0x55fab9(0x371)]=function(){const _0x29950b=_0x55fab9;this[_0x29950b(0x254)][_0x29950b(0x363)](),this[_0x29950b(0x254)]['deselect'](),this[_0x29950b(0x275)][_0x29950b(0x2f4)]();},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x174)]=function(){const _0x1034f8=_0x55fab9,_0x5ad0e0=this['statusLabelRect']();this['_statusPartyLabel']=new Window_PartyLabel(_0x5ad0e0,TextManager[_0x1034f8(0x32d)]),this[_0x1034f8(0x1d7)]['setBackgroundType'](VisuMZ[_0x1034f8(0x236)][_0x1034f8(0x312)][_0x1034f8(0x300)][_0x1034f8(0x1e0)]),this[_0x1034f8(0x18b)](this['_statusPartyLabel']);},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x299)]=function(){const _0x104988=_0x55fab9;return VisuMZ[_0x104988(0x236)][_0x104988(0x312)][_0x104988(0x300)][_0x104988(0x1c3)][_0x104988(0x1bd)](this);},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x31f)]=function(){const _0x17c4d5=_0x55fab9,_0x5d79df=this['statusWindowRect']();this['_statusPartyWindow']=new Window_PartyStatus(_0x5d79df),this['_statusPartyWindow'][_0x17c4d5(0x314)](VisuMZ[_0x17c4d5(0x236)][_0x17c4d5(0x312)][_0x17c4d5(0x300)][_0x17c4d5(0x2bb)]),this['addWindow'](this['_statusPartyWindow']),this['_reservePartyWindow'][_0x17c4d5(0x1e9)](this['_statusPartyWindow']),this[_0x17c4d5(0x275)][_0x17c4d5(0x1e9)](this['_statusPartyWindow']);},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x28d)]=function(){const _0x5a0c00=_0x55fab9;return VisuMZ[_0x5a0c00(0x236)]['Settings'][_0x5a0c00(0x300)][_0x5a0c00(0x1f7)][_0x5a0c00(0x1bd)](this);},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x1c6)]=function(){const _0xf1d0f8=_0x55fab9;return TextManager[_0xf1d0f8(0x27f)](_0xf1d0f8(0x1cf));},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x1eb)]=function(){const _0xe8ebb2=_0x55fab9;return TextManager[_0xe8ebb2(0x1a1)];},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x17d)]=function(){const _0x5484ee=_0x55fab9,_0x20071d=this[_0x5484ee(0x275)],_0x3d34cd=this[_0x5484ee(0x254)];if(_0x20071d&&_0x20071d[_0x5484ee(0x21c)]&&_0x20071d[_0x5484ee(0x2d7)]()&&_0x20071d['isShiftRemoveShortcutEnabled']()){if(_0x5484ee(0x28e)!=='yPCPn')return TextManager[_0x5484ee(0x2a2)];else{let _0x3db7ed=0x0;if(!_0x30d67a[_0x5484ee(0x1f0)]())_0x3db7ed+=0x1;if(_0xcd8e91[_0x5484ee(0x19e)]())_0x3db7ed+=0x1;if(_0x3db7ed<=0x1)return this[_0x5484ee(0x256)](_0x252394,_0x3c3e5f,_0x3a324a);_0x2f3fd2+=_0x3812b3[_0x5484ee(0x1ed)]((this[_0x5484ee(0x1ff)]()-_0x2ae54c[_0x5484ee(0x2b4)])/0x2),_0x365da6-=_0x117f9a[_0x5484ee(0x1ed)](this[_0x5484ee(0x1ff)]()/0x2),this[_0x5484ee(0x161)](_0x2c0c1e[_0x5484ee(0x273)],_0x347a63,_0x2af622),_0x6c61a1+=this[_0x5484ee(0x1ff)](),this[_0x5484ee(0x161)](_0x4be701[_0x5484ee(0x341)],_0x171d28,_0x4dce0f);}}else{if(_0x3d34cd&&_0x3d34cd[_0x5484ee(0x21c)]&&$gameParty['reserveMembers']()['length']>0x0){if('HSEMi'!==_0x5484ee(0x374)){if(!this['addRemoveCommand']())return![];const _0x2d31b1=this[_0x5484ee(0x2d7)]();return this[_0x5484ee(0x21c)]&&_0x2d31b1&&_0x2d31b1[_0x5484ee(0x1f0)]();}else return TextManager[_0x5484ee(0x1b6)];}else{if('kQUFn'===_0x5484ee(0x25c))_0x47f9d6[_0x5484ee(0x236)][_0x5484ee(0x1b9)][_0x5484ee(0x1bd)](this),this['clearPartyBattleCommandCooldown'](),this[_0x5484ee(0x221)](),this[_0x5484ee(0x338)]();else return'';}}},Scene_Party['prototype'][_0x55fab9(0x191)]=function(){const _0x1b181b=_0x55fab9;if(this['_activePartyWindow']&&this[_0x1b181b(0x275)][_0x1b181b(0x21c)])return TextManager[_0x1b181b(0x24c)];else{if(this[_0x1b181b(0x254)]&&this['_reservePartyWindow'][_0x1b181b(0x21c)]){if(_0x1b181b(0x20d)===_0x1b181b(0x308))this['initialize'](...arguments);else return TextManager['assistSwapInPartyMember'];}else return Scene_MenuBase[_0x1b181b(0x2d4)]['buttonAssistText4'][_0x1b181b(0x1bd)](this);}},Scene_Party['prototype']['createBackground']=function(){const _0x31feff=_0x55fab9;Scene_MenuBase[_0x31feff(0x2d4)][_0x31feff(0x245)]['call'](this),this[_0x31feff(0x30d)](this['getBackgroundOpacity']()),this[_0x31feff(0x200)]();},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x22f)]=function(){const _0x368ab4=_0x55fab9;return VisuMZ['PartySystem'][_0x368ab4(0x312)][_0x368ab4(0x163)][_0x368ab4(0x30b)];},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x200)]=function(){const _0x12ee39=_0x55fab9,_0x49d5bc={'BgFilename1':VisuMZ[_0x12ee39(0x236)][_0x12ee39(0x312)]['BgSettings'][_0x12ee39(0x16d)],'BgFilename2':VisuMZ[_0x12ee39(0x236)][_0x12ee39(0x312)][_0x12ee39(0x163)]['BgFilename2']};_0x49d5bc&&(_0x49d5bc['BgFilename1']!==''||_0x49d5bc[_0x12ee39(0x2d3)]!=='')&&(this['_backSprite1']=new Sprite(ImageManager[_0x12ee39(0x31d)](_0x49d5bc[_0x12ee39(0x16d)])),this[_0x12ee39(0x19d)]=new Sprite(ImageManager[_0x12ee39(0x2ac)](_0x49d5bc[_0x12ee39(0x2d3)])),this[_0x12ee39(0x1f3)](this[_0x12ee39(0x2dd)]),this['addChild'](this['_backSprite2']),this[_0x12ee39(0x2dd)][_0x12ee39(0x175)][_0x12ee39(0x2e6)](this['adjustSprite'][_0x12ee39(0x178)](this,this[_0x12ee39(0x2dd)])),this[_0x12ee39(0x19d)][_0x12ee39(0x175)][_0x12ee39(0x2e6)](this['adjustSprite'][_0x12ee39(0x178)](this,this['_backSprite2'])));},Scene_Party[_0x55fab9(0x2d4)][_0x55fab9(0x184)]=function(_0x249c33){const _0x29d240=_0x55fab9;this['scaleSprite'](_0x249c33),this[_0x29d240(0x37e)](_0x249c33);},Scene_Party[_0x55fab9(0x2d4)]['terminate']=function(){const _0x2a8eb0=_0x55fab9;Scene_MenuBase[_0x2a8eb0(0x2d4)][_0x2a8eb0(0x1ea)][_0x2a8eb0(0x1bd)](this),$gameParty['partyChangeRefresh']();},Window_StatusBase[_0x55fab9(0x2d4)][_0x55fab9(0x1c5)]=function(_0x4a1419,_0x31be98,_0x3d306f,_0x93109){const _0x25f34d=_0x55fab9;if(!_0x4a1419)return;_0x93109?this[_0x25f34d(0x1c4)](_0x4a1419,_0x31be98,_0x3d306f):this[_0x25f34d(0x256)](_0x4a1419,_0x31be98,_0x3d306f);},Window_StatusBase['prototype'][_0x55fab9(0x256)]=function(_0x48c8c3,_0x253f1c,_0x252063){const _0x9d9820=_0x55fab9;_0x252063+=Math['round']((this[_0x9d9820(0x1ff)]()-ImageManager[_0x9d9820(0x2b4)])/0x2);if(!_0x48c8c3[_0x9d9820(0x1f0)]()){if('GxBHN'==='GxBHN')this[_0x9d9820(0x161)](ImageManager['lockPartyMemberIcon'],_0x253f1c,_0x252063),_0x253f1c+=ImageManager[_0x9d9820(0x25b)]+0x4;else return this[_0x9d9820(0x331)]();}_0x48c8c3[_0x9d9820(0x19e)]()&&(this[_0x9d9820(0x161)](ImageManager[_0x9d9820(0x341)],_0x253f1c,_0x252063),_0x253f1c+=ImageManager[_0x9d9820(0x25b)]+0x4);},Window_StatusBase[_0x55fab9(0x2d4)][_0x55fab9(0x1c4)]=function(_0x315e97,_0x5d21d8,_0x3ecff0){const _0x2329d4=_0x55fab9;let _0x16c27a=0x0;if(!_0x315e97[_0x2329d4(0x1f0)]())_0x16c27a+=0x1;if(_0x315e97[_0x2329d4(0x19e)]())_0x16c27a+=0x1;if(_0x16c27a<=0x1){if(_0x2329d4(0x1b0)!==_0x2329d4(0x1b0)){const _0x5f1515=this[_0x2329d4(0x1d9)](_0x24612a),_0x124fd2=this[_0x2329d4(0x250)](_0xdc87db),_0x2b4972=_0x124fd2['x']+_0x342aa2[_0x2329d4(0x322)]+0x24,_0x25dc75=_0x2b4972+0xb4;this[_0x2329d4(0x1f1)](this[_0x2329d4(0x36a)](_0x5f1515)),this[_0x2329d4(0x1ee)](_0x5f1515,_0x2b4972,_0x124fd2['y']),this[_0x2329d4(0x215)](_0x5f1515,_0x2b4972,_0x124fd2['y']+this[_0x2329d4(0x1ff)]()),this[_0x2329d4(0x20b)](_0x5f1515,_0x25dc75,_0x124fd2['y']),this[_0x2329d4(0x1f1)](!![]);}else return this[_0x2329d4(0x256)](_0x315e97,_0x5d21d8,_0x3ecff0);}_0x3ecff0+=Math[_0x2329d4(0x1ed)]((this[_0x2329d4(0x1ff)]()-ImageManager[_0x2329d4(0x2b4)])/0x2),_0x3ecff0-=Math['round'](this['lineHeight']()/0x2),this[_0x2329d4(0x161)](ImageManager[_0x2329d4(0x273)],_0x5d21d8,_0x3ecff0),_0x3ecff0+=this[_0x2329d4(0x1ff)](),this['drawIcon'](ImageManager[_0x2329d4(0x341)],_0x5d21d8,_0x3ecff0);};function Window_PartyLabel(){const _0x25aff8=_0x55fab9;this[_0x25aff8(0x225)](...arguments);}Window_PartyLabel[_0x55fab9(0x2d4)]=Object[_0x55fab9(0x294)](Window_Base[_0x55fab9(0x2d4)]),Window_PartyLabel['prototype'][_0x55fab9(0x168)]=Window_PartyLabel,Window_PartyLabel[_0x55fab9(0x2d4)][_0x55fab9(0x225)]=function(_0x5891e2,_0x4439a7){const _0x312ab2=_0x55fab9;Window_Base[_0x312ab2(0x2d4)][_0x312ab2(0x225)]['call'](this,_0x5891e2),this[_0x312ab2(0x1ad)](_0x4439a7);},Window_PartyLabel['prototype'][_0x55fab9(0x1f8)]=function(){const _0x4f65f7=_0x55fab9;this[_0x4f65f7(0x2e5)]=0x0;},Window_PartyLabel[_0x55fab9(0x2d4)][_0x55fab9(0x1ad)]=function(_0x43216e){const _0x4a969b=_0x55fab9;this[_0x4a969b(0x206)][_0x4a969b(0x343)](),this[_0x4a969b(0x238)](_0x43216e,0x0,0x0,this[_0x4a969b(0x1c9)],_0x4a969b(0x2f2));};function Window_PartyActive(){const _0x5aa2b2=_0x55fab9;this[_0x5aa2b2(0x225)](...arguments);}function _0xc3fe(_0x37f567,_0x1f5cee){return _0xc3fe=function(_0x15450a,_0xc3fe3){_0x15450a=_0x15450a-0x15d;let _0x1493bf=_0x1545[_0x15450a];return _0x1493bf;},_0xc3fe(_0x37f567,_0x1f5cee);}Window_PartyActive['prototype']=Object[_0x55fab9(0x294)](Window_StatusBase[_0x55fab9(0x2d4)]),Window_PartyActive[_0x55fab9(0x2d4)][_0x55fab9(0x168)]=Window_PartyActive,Window_PartyActive[_0x55fab9(0x2fd)]=VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x312)][_0x55fab9(0x300)][_0x55fab9(0x23e)],Window_PartyActive[_0x55fab9(0x2d4)][_0x55fab9(0x225)]=function(_0x2e52b4){const _0x27f65a=_0x55fab9;Window_StatusBase[_0x27f65a(0x2d4)][_0x27f65a(0x225)][_0x27f65a(0x1bd)](this,_0x2e52b4),this[_0x27f65a(0x233)](),this[_0x27f65a(0x2f4)](),this['smoothSelect'](0x0);},Window_PartyActive[_0x55fab9(0x2d4)][_0x55fab9(0x2d0)]=function(){const _0x51dc09=_0x55fab9;return VisuMZ[_0x51dc09(0x236)][_0x51dc09(0x312)][_0x51dc09(0x26b)]['AddRemoveCmd'];},Window_PartyActive['prototype'][_0x55fab9(0x219)]=function(){const _0x3b3c8b=_0x55fab9;return $gameParty[_0x3b3c8b(0x320)]();},Window_PartyActive[_0x55fab9(0x2d4)][_0x55fab9(0x2e2)]=function(){return $gameParty['maxBattleMembers']();},Window_PartyActive['prototype'][_0x55fab9(0x1e5)]=function(){const _0x38627f=_0x55fab9;return this[_0x38627f(0x305)];},Window_PartyActive[_0x55fab9(0x2d4)]['actor']=function(_0xed9712){const _0x401b28=_0x55fab9;return $gameParty[_0x401b28(0x1e4)]()[_0xed9712];},Window_PartyActive[_0x55fab9(0x2d4)][_0x55fab9(0x2d7)]=function(){const _0x51bce5=_0x55fab9;return this[_0x51bce5(0x1d9)](this[_0x51bce5(0x195)]());},Window_PartyActive['prototype']['isCurrentItemEnabled']=function(){const _0x34a332=_0x55fab9,_0x51c400=this['actor'](this[_0x34a332(0x195)]());return _0x51c400?_0x51c400['isFormationChangeOk']():!![];},Window_PartyActive['prototype'][_0x55fab9(0x36b)]=function(){const _0x56b36b=_0x55fab9;if($gameParty[_0x56b36b(0x370)]()[_0x56b36b(0x340)]<=0x0)return!![];if($gameParty[_0x56b36b(0x2d8)]())return![];return $gameParty[_0x56b36b(0x295)]()[_0x56b36b(0x340)]>0x0;},Window_PartyActive['prototype']['processCursorMove']=function(){const _0x56753b=_0x55fab9;Window_StatusBase[_0x56753b(0x2d4)][_0x56753b(0x2c4)][_0x56753b(0x1bd)](this),this[_0x56753b(0x2d6)]();},Window_PartyActive['prototype']['cursorDown']=function(_0x184b47){const _0x40abee=_0x55fab9;if(this[_0x40abee(0x18f)]()){if(_0x40abee(0x34f)===_0x40abee(0x21f)){if(this[_0x40abee(0x2f6)]===_0x1677c8)this[_0x40abee(0x1f5)]();this[_0x40abee(0x2f6)]--;}else this[_0x40abee(0x228)]();}},Window_PartyActive[_0x55fab9(0x2d4)]['cursorPagedown']=function(){const _0x37fe6f=_0x55fab9,_0x3a780f=this[_0x37fe6f(0x195)](),_0x5337d3=_0x3a780f+0x1>=this[_0x37fe6f(0x219)]()?0x0:_0x3a780f+0x1;this[_0x37fe6f(0x293)](_0x3a780f,_0x5337d3);},Window_PartyActive[_0x55fab9(0x2d4)][_0x55fab9(0x364)]=function(){const _0x14f22b=_0x55fab9,_0x26516c=this[_0x14f22b(0x195)](),_0x2868ef=_0x26516c-0x1<0x0?this[_0x14f22b(0x219)]()-0x1:_0x26516c-0x1;this[_0x14f22b(0x293)](_0x26516c,_0x2868ef);},Window_PartyActive[_0x55fab9(0x2d4)][_0x55fab9(0x293)]=function(_0x559263,_0x1fd8bf){const _0x50e608=_0x55fab9,_0x29ff6e=this[_0x50e608(0x1d9)](_0x559263),_0x381a1c=this[_0x50e608(0x1d9)](_0x1fd8bf);if(_0x29ff6e&&!_0x29ff6e['isFormationChangeOk']())return;if(_0x381a1c&&!_0x381a1c[_0x50e608(0x1f0)]())return;const _0x1ac847=$gameParty[_0x50e608(0x23f)];_0x1ac847[_0x559263]=_0x381a1c?_0x381a1c[_0x50e608(0x27d)]():0x0,_0x1ac847[_0x1fd8bf]=_0x29ff6e?_0x29ff6e[_0x50e608(0x27d)]():0x0,this[_0x50e608(0x233)](),this['playCursorSound'](),this[_0x50e608(0x1e1)](_0x1fd8bf);},Window_PartyActive[_0x55fab9(0x2d4)][_0x55fab9(0x2d6)]=function(){const _0x1690ad=_0x55fab9;if(!this['isShiftRemoveShortcutEnabled']())return;if(Input['isTriggered'](_0x1690ad(0x1cf))){const _0x2a1095=this[_0x1690ad(0x2d7)]();this['processShiftRemoveShortcut']();}},Window_PartyActive[_0x55fab9(0x2d4)]['processShiftRemoveShortcut']=function(){const _0x3b2e60=_0x55fab9;SoundManager[_0x3b2e60(0x1c2)]();const _0x59b1ab=this[_0x3b2e60(0x2d7)]();$gameParty[_0x3b2e60(0x1fa)](_0x59b1ab['actorId']()),this['callUpdateHelp'](),SceneManager[_0x3b2e60(0x248)][_0x3b2e60(0x1d4)]();},Window_PartyActive['prototype'][_0x55fab9(0x2b2)]=function(){const _0x49db79=_0x55fab9;if(!this['addRemoveCommand']())return![];const _0x763283=this['currentActor']();return this['active']&&_0x763283&&_0x763283[_0x49db79(0x1f0)]();},Window_PartyActive[_0x55fab9(0x2d4)][_0x55fab9(0x31e)]=function(_0x2bce92){const _0x5c6ae8=_0x55fab9,_0x5102e5=this[_0x5c6ae8(0x1d9)](_0x2bce92);if(!_0x5102e5)return this[_0x5c6ae8(0x182)](_0x2bce92);this[_0x5c6ae8(0x19f)]();const _0x5d5c12=this[_0x5c6ae8(0x249)](_0x2bce92);this[_0x5c6ae8(0x2c2)](_0x2bce92);const _0x3dee62=_0x5d5c12['y']+_0x5d5c12[_0x5c6ae8(0x372)]-this[_0x5c6ae8(0x1ff)]();this[_0x5c6ae8(0x350)](_0x5d5c12['x'],_0x3dee62,_0x5d5c12[_0x5c6ae8(0x29e)],0x2),this[_0x5c6ae8(0x1c5)](_0x5102e5,_0x5d5c12['x']+0x2,_0x5d5c12['y']),this[_0x5c6ae8(0x1ee)](_0x5102e5,_0x5d5c12['x'],_0x3dee62,_0x5d5c12[_0x5c6ae8(0x29e)]);},Window_PartyActive[_0x55fab9(0x2d4)][_0x55fab9(0x182)]=function(_0x56e2f4){const _0xb4e430=_0x55fab9;this[_0xb4e430(0x19f)]();const _0x2d469d=this[_0xb4e430(0x249)](_0x56e2f4);this[_0xb4e430(0x356)](_0x2d469d['x'],_0x2d469d['y'],_0x2d469d[_0xb4e430(0x29e)],_0x2d469d[_0xb4e430(0x372)]);const _0x3bf0e8=_0x2d469d['y']+Math[_0xb4e430(0x1ed)]((_0x2d469d[_0xb4e430(0x372)]-this['lineHeight']())/0x2);this[_0xb4e430(0x2a4)](ColorManager['systemColor']()),this[_0xb4e430(0x238)](TextManager['emptyPartyMember'],_0x2d469d['x'],_0x3bf0e8,_0x2d469d[_0xb4e430(0x29e)],_0xb4e430(0x2f2));},Window_PartyActive[_0x55fab9(0x2d4)]['drawItemDarkRect']=function(_0x9615fa,_0x1caa91,_0x4e1168,_0x268230,_0x1183ee){const _0x58b4c3=_0x55fab9;_0x1183ee=Math[_0x58b4c3(0x1d1)](_0x1183ee||0x1,0x1);while(_0x1183ee--){_0x268230=_0x268230||this[_0x58b4c3(0x1ff)](),this[_0x58b4c3(0x206)][_0x58b4c3(0x187)]=0xa0;const _0x3e55b3=ColorManager[_0x58b4c3(0x177)]();this[_0x58b4c3(0x206)][_0x58b4c3(0x1da)](_0x9615fa+0x1,_0x1caa91+0x1,_0x4e1168-0x2,_0x268230-0x2,_0x3e55b3),this['contents'][_0x58b4c3(0x187)]=0xff;}},Window_PartyActive[_0x55fab9(0x2d4)]['drawItemImage']=function(_0x35589d){const _0x54c657=_0x55fab9;switch(Window_PartyActive[_0x54c657(0x2fd)][_0x54c657(0x35b)]()[_0x54c657(0x2dc)]()){case _0x54c657(0x37a):this[_0x54c657(0x1b5)](_0x35589d);break;case _0x54c657(0x21d):this[_0x54c657(0x2d9)](_0x35589d);break;case _0x54c657(0x258):Imported[_0x54c657(0x1c8)]&&(_0x54c657(0x2c0)===_0x54c657(0x2c0)?this[_0x54c657(0x1bc)](_0x35589d):_0x4af664[_0x54c657(0x2ea)](_0x16c6a6));break;};},Window_PartyActive[_0x55fab9(0x2d4)][_0x55fab9(0x1b5)]=function(_0x377268){const _0x1bf761=_0x55fab9,_0x51cb3b=this[_0x1bf761(0x1d9)](_0x377268),_0x2bb425=this[_0x1bf761(0x249)](_0x377268),_0x49b5c0=Math[_0x1bf761(0x18c)](ImageManager['faceWidth'],_0x2bb425[_0x1bf761(0x29e)]-0x2),_0x1be1ce=_0x2bb425[_0x1bf761(0x372)]-0x2;this[_0x1bf761(0x1f1)](_0x51cb3b[_0x1bf761(0x1f0)]());const _0xb8aa58=Math['round'](_0x2bb425['x']+(_0x2bb425[_0x1bf761(0x29e)]-_0x49b5c0)/0x2);this[_0x1bf761(0x239)](_0x51cb3b,_0xb8aa58,_0x2bb425['y']+0x1,_0x49b5c0,_0x1be1ce),this[_0x1bf761(0x1f1)](!![]);},Window_PartyActive[_0x55fab9(0x2d4)][_0x55fab9(0x2d9)]=function(_0x414155){const _0x15eb3d=_0x55fab9,_0x573c84=this['actor'](_0x414155),_0x108ca4=this[_0x15eb3d(0x249)](_0x414155),_0x46b588=VisuMZ[_0x15eb3d(0x236)]['Settings']['Window'],_0xc1a128=_0x108ca4['x']+Math['round'](_0x108ca4[_0x15eb3d(0x29e)]/0x2)+_0x46b588[_0x15eb3d(0x336)],_0x1f5da7=_0x108ca4['y']+_0x108ca4[_0x15eb3d(0x372)]-this[_0x15eb3d(0x1ff)]()-_0x46b588['ActiveSpriteOffsetY'];this[_0x15eb3d(0x189)](_0x573c84,_0xc1a128,_0x1f5da7);},Window_PartyActive[_0x55fab9(0x2d4)][_0x55fab9(0x1bc)]=function(_0x2ce3a1){const _0x334e47=_0x55fab9,_0x536e90=this[_0x334e47(0x1d9)](_0x2ce3a1),_0x4caa9e=_0x536e90['battlerName'](),_0xd6e3a8=this[_0x334e47(0x249)](_0x2ce3a1),_0x3941db=VisuMZ[_0x334e47(0x236)][_0x334e47(0x312)]['Window'],_0x42ec57=_0xd6e3a8['x']+Math[_0x334e47(0x1ed)](_0xd6e3a8[_0x334e47(0x29e)]/0x2)+_0x3941db[_0x334e47(0x16e)],_0x3b7ee8=_0xd6e3a8['y']+_0xd6e3a8[_0x334e47(0x372)]-this[_0x334e47(0x1ff)]()-_0x3941db[_0x334e47(0x1dd)];this['drawSvActor'](_0x4caa9e,_0x42ec57,_0x3b7ee8);},Window_PartyActive['prototype'][_0x55fab9(0x350)]=function(_0x4ede60,_0x535172,_0x41bd4f,_0x15f114){const _0x593c0f=_0x55fab9,_0x1fe2c7=ColorManager[_0x593c0f(0x1ab)](),_0x1eca5f=ColorManager[_0x593c0f(0x33b)](),_0x19d6b4=_0x41bd4f/0x2,_0x53930e=this['lineHeight']();while(_0x15f114--){if(_0x593c0f(0x348)!==_0x593c0f(0x2d2))this['contents'][_0x593c0f(0x199)](_0x4ede60,_0x535172,_0x19d6b4,_0x53930e,_0x1eca5f,_0x1fe2c7),this[_0x593c0f(0x206)][_0x593c0f(0x199)](_0x4ede60+_0x19d6b4,_0x535172,_0x19d6b4,_0x53930e,_0x1fe2c7,_0x1eca5f);else{this['checkInitBattleMembers']();if(!this[_0x593c0f(0x23f)][_0x593c0f(0x25d)](_0x11c430))return;if(_0x36ab25<=0x0)return;const _0x580b61=this[_0x593c0f(0x23f)][_0x593c0f(0x183)](_0x72d050);this['_battleMembers'][_0x580b61]=0x0,this[_0x593c0f(0x333)][_0x593c0f(0x194)](_0x2db92e),this[_0x593c0f(0x333)]['push'](_0x43a80f),this[_0x593c0f(0x317)]();}}},Window_PartyActive[_0x55fab9(0x2d4)]['drawActorName']=function(_0xe73c32,_0x49b9c8,_0x26e11b,_0x4cae61){const _0x315eb8=_0x55fab9;_0x4cae61=_0x4cae61||0xa8,this['changeTextColor'](ColorManager[_0x315eb8(0x2f0)](_0xe73c32)),this[_0x315eb8(0x238)](_0xe73c32[_0x315eb8(0x366)](),_0x49b9c8,_0x26e11b,_0x4cae61,_0x315eb8(0x2f2));},Window_PartyActive[_0x55fab9(0x2d4)]['setStatusWindow']=function(_0x43b089){const _0xfa0c2d=_0x55fab9;this[_0xfa0c2d(0x278)]=_0x43b089,this[_0xfa0c2d(0x181)]();},Window_PartyActive[_0x55fab9(0x2d4)][_0x55fab9(0x181)]=function(){const _0x58e0ed=_0x55fab9;if(this['_statusWindow'])this['_statusWindow']['setActor'](this[_0x58e0ed(0x1d9)](this['index']()));};function Window_PartyReserve(){this['initialize'](...arguments);}Window_PartyReserve['prototype']=Object[_0x55fab9(0x294)](Window_StatusBase[_0x55fab9(0x2d4)]),Window_PartyReserve[_0x55fab9(0x2d4)][_0x55fab9(0x168)]=Window_PartyReserve,Window_PartyReserve['_actorGraphic']=VisuMZ[_0x55fab9(0x236)]['Settings'][_0x55fab9(0x300)]['ReservePartyGraphic'],Window_PartyReserve[_0x55fab9(0x262)]=VisuMZ['PartySystem'][_0x55fab9(0x312)]['Window'][_0x55fab9(0x16a)],Window_PartyReserve['prototype'][_0x55fab9(0x225)]=function(_0x51a3a6){const _0x217fec=_0x55fab9;Window_StatusBase[_0x217fec(0x2d4)][_0x217fec(0x225)][_0x217fec(0x1bd)](this,_0x51a3a6),this[_0x217fec(0x266)]=0x0,this[_0x217fec(0x233)]();},Window_PartyReserve[_0x55fab9(0x2d4)][_0x55fab9(0x2e2)]=function(){const _0x581284=_0x55fab9;return VisuMZ[_0x581284(0x236)]['Settings'][_0x581284(0x300)][_0x581284(0x1f4)]||0x1;},Window_PartyReserve[_0x55fab9(0x2d4)][_0x55fab9(0x1e5)]=function(){const _0x387846=_0x55fab9;return this[_0x387846(0x1ff)]()*Window_PartyReserve[_0x387846(0x262)]+0x6;},Window_PartyReserve['prototype'][_0x55fab9(0x2d0)]=function(){const _0x59fc85=_0x55fab9;return VisuMZ[_0x59fc85(0x236)][_0x59fc85(0x312)][_0x59fc85(0x26b)][_0x59fc85(0x1e3)];},Window_PartyReserve['prototype'][_0x55fab9(0x219)]=function(){const _0x6e0ef8=_0x55fab9;let _0x1c0d1a=$gameParty['reserveMembers']()['length'];if(this[_0x6e0ef8(0x2d0)]())_0x1c0d1a++;return _0x1c0d1a;},Window_PartyReserve[_0x55fab9(0x2d4)][_0x55fab9(0x1d9)]=function(_0x1d487e){return $gameParty['reserveMembers']()[_0x1d487e];},Window_PartyReserve[_0x55fab9(0x2d4)]['currentActor']=function(){const _0x3b46b9=_0x55fab9;return this[_0x3b46b9(0x1d9)](this['index']());},Window_PartyReserve[_0x55fab9(0x2d4)]['playOkSound']=function(){SoundManager['playEquip']();},Window_PartyReserve[_0x55fab9(0x2d4)][_0x55fab9(0x2e7)]=function(){const _0x4ac464=_0x55fab9,_0x22274b=this[_0x4ac464(0x1d9)](this['index']());return _0x22274b?_0x22274b['isFormationChangeOk']():!![];},Window_PartyReserve[_0x55fab9(0x2d4)]['processCursorMove']=function(){const _0x19b937=_0x55fab9;Window_StatusBase['prototype']['processCursorMove']['call'](this),this[_0x19b937(0x255)]();},Window_PartyReserve[_0x55fab9(0x2d4)][_0x55fab9(0x1e7)]=function(_0x4ce61c){const _0x109857=_0x55fab9;if(this[_0x109857(0x195)]()<=0x0){if('Ewunw'===_0x109857(0x1b7))return _0xf84d2d[_0x109857(0x320)]();else this[_0x109857(0x29f)]();}else Window_StatusBase[_0x109857(0x2d4)]['cursorUp']['call'](this,_0x4ce61c);},Window_PartyReserve[_0x55fab9(0x2d4)][_0x55fab9(0x344)]=function(){const _0x1e6c4c=_0x55fab9,_0x288a27=this[_0x1e6c4c(0x195)](),_0x1a14b6=_0x288a27+0x1>=this[_0x1e6c4c(0x219)]()-0x1?0x0:_0x288a27+0x1;this[_0x1e6c4c(0x293)](_0x288a27,_0x1a14b6);},Window_PartyReserve[_0x55fab9(0x2d4)]['cursorPageup']=function(){const _0x6129a6=_0x55fab9,_0x3622e4=this['index'](),_0x566124=_0x3622e4-0x1<0x0?this[_0x6129a6(0x219)]()-0x2:_0x3622e4-0x1;this[_0x6129a6(0x293)](_0x3622e4,_0x566124);},Window_PartyReserve[_0x55fab9(0x2d4)]['quickSwap']=function(_0x46cc2a,_0x359f04){const _0x17aec1=_0x55fab9,_0x3b05fb=this[_0x17aec1(0x1d9)](_0x46cc2a),_0x15c3e5=this[_0x17aec1(0x1d9)](_0x359f04);if(!_0x3b05fb?.['isFormationChangeOk']()||!_0x15c3e5?.[_0x17aec1(0x1f0)]())return;else{if(!_0x3b05fb||!_0x15c3e5){if(_0x17aec1(0x32a)==='XmYdX')this['callFormation']();else return;}}const _0x1953f2=$gameParty[_0x17aec1(0x333)],_0x5ed97d=_0x1953f2[_0x17aec1(0x183)](_0x3b05fb[_0x17aec1(0x27d)]()),_0x445651=_0x1953f2[_0x17aec1(0x183)](_0x15c3e5[_0x17aec1(0x27d)]());_0x1953f2[_0x5ed97d]=_0x15c3e5?_0x15c3e5[_0x17aec1(0x27d)]():0x0,_0x1953f2[_0x445651]=_0x3b05fb?_0x3b05fb[_0x17aec1(0x27d)]():0x0,this[_0x17aec1(0x233)](),this[_0x17aec1(0x23a)](),this[_0x17aec1(0x1e1)](_0x359f04);},Window_PartyReserve['prototype'][_0x55fab9(0x255)]=function(){const _0x59b152=_0x55fab9;if(!this[_0x59b152(0x207)]())return;if(Input[_0x59b152(0x25e)](_0x59b152(0x1cf))){if(_0x59b152(0x17e)!=='qkRFZ')this['processShiftSortShortcut']();else{const _0x510564=this[_0x59b152(0x195)](),_0x587d42=_0x510564-0x1<0x0?this[_0x59b152(0x219)]()-0x1:_0x510564-0x1;this[_0x59b152(0x293)](_0x510564,_0x587d42);}}},Window_PartyReserve[_0x55fab9(0x2d4)]['processShiftSortShortcut']=function(){const _0x136d68=_0x55fab9;SoundManager[_0x136d68(0x1c2)](),$gameParty['sortActors'](),this[_0x136d68(0x1e1)](0x0),SceneManager[_0x136d68(0x248)]['refreshAllWindows']();},Window_PartyReserve[_0x55fab9(0x2d4)][_0x55fab9(0x207)]=function(){const _0x57cc8a=_0x55fab9;return this[_0x57cc8a(0x21c)];},Window_PartyReserve[_0x55fab9(0x2d4)]['pendingIndex']=function(){const _0x349b54=_0x55fab9,_0x59ab37=this[_0x349b54(0x2d7)]();return _0x59ab37?_0x59ab37[_0x349b54(0x195)]():-0x1;},Window_PartyReserve[_0x55fab9(0x2d4)][_0x55fab9(0x353)]=function(_0x5b0c71){const _0x124ed3=_0x55fab9;Window_StatusBase[_0x124ed3(0x2d4)][_0x124ed3(0x353)][_0x124ed3(0x1bd)](this,_0x5b0c71);if(_0x5b0c71>=0x0)this[_0x124ed3(0x266)]=_0x5b0c71;},Window_PartyReserve['prototype'][_0x55fab9(0x2e0)]=function(){const _0x21c592=_0x55fab9;this['_lastIndex']=Math[_0x21c592(0x18c)](this[_0x21c592(0x266)],this[_0x21c592(0x219)]()-0x1),this['smoothSelect'](this[_0x21c592(0x266)]),this[_0x21c592(0x2c6)](!![]),this['cursorVisible']=!![];},Window_PartyReserve['prototype'][_0x55fab9(0x31e)]=function(_0x2e5be9){const _0x48cb6e=_0x55fab9,_0x58a35a=this[_0x48cb6e(0x1d9)](_0x2e5be9);if(!_0x58a35a)return this['drawRemoveCommand'](_0x2e5be9);const _0x2245c6=this[_0x48cb6e(0x2c7)](_0x2e5be9);this[_0x48cb6e(0x2c2)](_0x2e5be9);const _0x2e63a1=0xa8,_0x37983c=Window_PartyReserve['_rowThickness']===0x1,_0x358d22=ImageManager['iconWidth']*(_0x37983c?0x2:0x1),_0x1e73ae=this[_0x48cb6e(0x241)]()+this[_0x48cb6e(0x1be)](),_0xdecf68=_0x2245c6[_0x48cb6e(0x29e)]-_0x2e63a1,_0x33fda0=_0x2245c6['x']+_0x358d22+Math[_0x48cb6e(0x18c)](_0x1e73ae,_0xdecf68),_0x6fcad0=_0x37983c?![]:!![];this[_0x48cb6e(0x1f1)](_0x58a35a[_0x48cb6e(0x1f0)]()),this['drawActorPartyIcons'](_0x58a35a,_0x2245c6['x'],_0x2245c6['y'],_0x6fcad0),this['drawActorName'](_0x58a35a,_0x33fda0,_0x2245c6['y'],_0x2e63a1),this[_0x48cb6e(0x1f1)](!![]);},Window_PartyReserve['prototype'][_0x55fab9(0x241)]=function(){const _0x24df4e=_0x55fab9,_0x235406=VisuMZ[_0x24df4e(0x236)]['Settings'][_0x24df4e(0x300)];switch(Window_PartyReserve[_0x24df4e(0x2fd)]['toLowerCase']()[_0x24df4e(0x2dc)]()){case _0x24df4e(0x37a):return ImageManager['faceWidth'];case _0x24df4e(0x21d):return _0x235406['ReserveSpriteOffsetX']*0x2;case _0x24df4e(0x258):return _0x235406[_0x24df4e(0x2cc)]*0x2;};},Window_PartyReserve['prototype'][_0x55fab9(0x35f)]=function(_0x5ca9f0){const _0x32dadf=_0x55fab9,_0x401c3f=this[_0x32dadf(0x2c7)](_0x5ca9f0);this[_0x32dadf(0x1f1)](!![]);const _0x197e69=TextManager[_0x32dadf(0x26f)];this[_0x32dadf(0x238)](_0x197e69,_0x401c3f['x'],_0x401c3f['y'],_0x401c3f[_0x32dadf(0x29e)],_0x32dadf(0x2f2));},Window_PartyReserve[_0x55fab9(0x2d4)][_0x55fab9(0x2c2)]=function(_0x42b85e){const _0x1be0d0=_0x55fab9;switch(Window_PartyReserve[_0x1be0d0(0x2fd)]['toLowerCase']()['trim']()){case _0x1be0d0(0x37a):this[_0x1be0d0(0x1b5)](_0x42b85e);break;case _0x1be0d0(0x21d):this[_0x1be0d0(0x2d9)](_0x42b85e);break;case'svbattler':Imported[_0x1be0d0(0x1c8)]&&this['drawItemImageSvActor'](_0x42b85e);break;};},Window_PartyReserve['prototype']['drawItemImageFace']=function(_0x4d83c6){const _0x1e3892=_0x55fab9,_0x2212e6=this[_0x1e3892(0x1d9)](_0x4d83c6),_0x2a5aa5=this[_0x1e3892(0x249)](_0x4d83c6),_0x2eac3b=Window_PartyReserve[_0x1e3892(0x262)]===0x1;_0x2a5aa5['x']+=ImageManager[_0x1e3892(0x25b)]*(_0x2eac3b?0x2:0x1);const _0x49c6d3=ImageManager[_0x1e3892(0x322)],_0x2ddbb7=_0x2a5aa5['height']-0x2;this[_0x1e3892(0x1f1)](_0x2212e6[_0x1e3892(0x1f0)]()),this[_0x1e3892(0x239)](_0x2212e6,_0x2a5aa5['x']+0x1,_0x2a5aa5['y']+0x1,_0x49c6d3,_0x2ddbb7),this['changePaintOpacity'](!![]);},Window_PartyReserve['prototype'][_0x55fab9(0x2d9)]=function(_0x376a51){const _0x1678ba=_0x55fab9,_0x432536=this[_0x1678ba(0x1d9)](_0x376a51),_0x30801e=this[_0x1678ba(0x249)](_0x376a51),_0x486f80=Window_PartyReserve[_0x1678ba(0x262)]===0x1;_0x30801e['x']+=ImageManager[_0x1678ba(0x25b)]*(_0x486f80?0x2:0x1);const _0x296839=VisuMZ['PartySystem'][_0x1678ba(0x312)][_0x1678ba(0x300)],_0x508c24=_0x30801e['x']+_0x296839[_0x1678ba(0x376)]+this[_0x1678ba(0x1be)](),_0x5d836d=_0x30801e['y']+_0x30801e[_0x1678ba(0x372)]-_0x296839['ReserveSpriteOffsetY'];this['drawActorCharacter'](_0x432536,_0x508c24,_0x5d836d);},Window_PartyReserve[_0x55fab9(0x2d4)]['drawItemImageSvActor']=function(_0x15ae81){const _0x36f595=_0x55fab9,_0x37932d=this['actor'](_0x15ae81),_0x1f3a57=_0x37932d[_0x36f595(0x318)](),_0x1a681a=this[_0x36f595(0x249)](_0x15ae81),_0x200be7=Window_PartyReserve['_rowThickness']===0x1;_0x1a681a['x']+=ImageManager[_0x36f595(0x25b)]*(_0x200be7?0x2:0x1);const _0xf6ddbd=VisuMZ[_0x36f595(0x236)][_0x36f595(0x312)][_0x36f595(0x300)],_0x3f2649=_0x1a681a['x']+_0xf6ddbd['ReserveBattlerOffsetX']+this[_0x36f595(0x1be)](),_0x50daf8=_0x1a681a['y']+_0x1a681a['height']-_0xf6ddbd[_0x36f595(0x16f)];this[_0x36f595(0x2ec)](_0x1f3a57,_0x3f2649,_0x50daf8);},Window_PartyReserve['prototype'][_0x55fab9(0x1e9)]=function(_0x3e69ab){const _0xa23ca7=_0x55fab9;this['_statusWindow']=_0x3e69ab,this[_0xa23ca7(0x181)]();},Window_PartyReserve[_0x55fab9(0x2d4)][_0x55fab9(0x181)]=function(){const _0x239c40=_0x55fab9;this[_0x239c40(0x278)]&&this[_0x239c40(0x278)]['setActor'](this[_0x239c40(0x1d9)](this[_0x239c40(0x195)]()));};function Window_PartyStatus(){const _0x2e837c=_0x55fab9;this[_0x2e837c(0x225)](...arguments);}Window_PartyStatus['prototype']=Object[_0x55fab9(0x294)](Window_StatusBase['prototype']),Window_PartyStatus[_0x55fab9(0x2d4)][_0x55fab9(0x168)]=Window_PartyStatus,Window_PartyStatus[_0x55fab9(0x2d4)][_0x55fab9(0x225)]=function(_0x21cd18){const _0x42a60e=_0x55fab9;this['_actor']=null,Window_StatusBase[_0x42a60e(0x2d4)][_0x42a60e(0x225)][_0x42a60e(0x1bd)](this,_0x21cd18);},Window_PartyStatus[_0x55fab9(0x2d4)][_0x55fab9(0x356)]=function(_0x295d4a,_0x492e09,_0x2a6f1f,_0x397ccc,_0x4365c0){const _0x5c7b6a=_0x55fab9;if(VisuMZ['PartySystem'][_0x5c7b6a(0x312)]['General'][_0x5c7b6a(0x352)]===![])return;_0x4365c0=Math[_0x5c7b6a(0x1d1)](_0x4365c0||0x1,0x1);while(_0x4365c0--){_0x397ccc=_0x397ccc||this['lineHeight'](),this[_0x5c7b6a(0x206)][_0x5c7b6a(0x187)]=0xa0;const _0x4715f9=ColorManager['getPartySystemBackColor']();this[_0x5c7b6a(0x206)][_0x5c7b6a(0x1da)](_0x295d4a+0x1,_0x492e09+0x1,_0x2a6f1f-0x2,_0x397ccc-0x2,_0x4715f9),this[_0x5c7b6a(0x206)]['paintOpacity']=0xff;}},ColorManager[_0x55fab9(0x2df)]=function(){const _0x186416=_0x55fab9,_0x360aad=VisuMZ[_0x186416(0x236)]['Settings'][_0x186416(0x26b)];let _0x32eb6b=_0x360aad['BackRectColor']!==undefined?_0x360aad['BackRectColor']:0x13;return ColorManager[_0x186416(0x326)](_0x32eb6b);},Window_PartyStatus[_0x55fab9(0x2d4)][_0x55fab9(0x203)]=function(_0x21f7e4){const _0xde96c7=_0x55fab9;if(this[_0xde96c7(0x35a)]===_0x21f7e4)return;this[_0xde96c7(0x35a)]=_0x21f7e4;if(_0x21f7e4){const _0x53e3f1=ImageManager[_0xde96c7(0x2a5)](_0x21f7e4[_0xde96c7(0x263)]());_0x53e3f1[_0xde96c7(0x2e6)](this['refresh']['bind'](this));}else this['refresh']();},Window_PartyStatus[_0x55fab9(0x2d4)]['refresh']=function(){const _0x42f932=_0x55fab9;Window_StatusBase[_0x42f932(0x2d4)][_0x42f932(0x233)][_0x42f932(0x1bd)](this),this[_0x42f932(0x206)][_0x42f932(0x343)](),this[_0x42f932(0x19f)](),VisuMZ[_0x42f932(0x236)][_0x42f932(0x312)][_0x42f932(0x300)][_0x42f932(0x1b2)]['call'](this);},Window_PartyStatus[_0x55fab9(0x2d4)][_0x55fab9(0x1a8)]=function(){const _0x37fb0a=_0x55fab9;if(!this[_0x37fb0a(0x35a)]){if(_0x37fb0a(0x357)!==_0x37fb0a(0x357))this[_0x37fb0a(0x23f)][_0x37fb0a(0x288)](0x0);else{this['drawItemDarkRect'](0x0,0x0,this[_0x37fb0a(0x1c9)],this[_0x37fb0a(0x305)]);const _0x1c8fb0=Math[_0x37fb0a(0x1ed)]((this[_0x37fb0a(0x305)]-this['lineHeight']())/0x2);this[_0x37fb0a(0x2a4)](ColorManager[_0x37fb0a(0x285)]()),this[_0x37fb0a(0x238)](TextManager[_0x37fb0a(0x210)],0x0,_0x1c8fb0,this[_0x37fb0a(0x1c9)],_0x37fb0a(0x2f2));return;}}this['drawActorFace'](this['_actor'],0x1,0x0,ImageManager[_0x37fb0a(0x322)],ImageManager[_0x37fb0a(0x1cc)]),this[_0x37fb0a(0x231)](this[_0x37fb0a(0x35a)],ImageManager['faceWidth']+0x24,0x0);const _0xd5b569=this[_0x37fb0a(0x1ff)](),_0xcc7d30=this[_0x37fb0a(0x315)](),_0x2e6b51=Math[_0x37fb0a(0x1ed)](this['innerWidth']/0x2),_0xdb0395=Math[_0x37fb0a(0x1e8)](_0xcc7d30[_0x37fb0a(0x340)]/0x2)*_0xd5b569,_0x4fc2ac=0x0;let _0x4a06a4=0x0,_0x23f8fd=ImageManager[_0x37fb0a(0x1cc)]+_0xd5b569/0x2;for(const _0x17b23f of _0xcc7d30){this[_0x37fb0a(0x356)](_0x4a06a4,_0x23f8fd,_0x2e6b51,_0xd5b569),this[_0x37fb0a(0x1a5)](_0x17b23f,_0x4a06a4,_0x23f8fd,_0x2e6b51),this['drawParamValue'](_0x17b23f,_0x4a06a4,_0x23f8fd,_0x2e6b51),_0x4a06a4===_0x4fc2ac?_0x37fb0a(0x2c3)!==_0x37fb0a(0x2c3)?(_0x1582b8[_0x37fb0a(0x2a5)](_0x16c069[_0x37fb0a(0x263)]()),_0x692cd[_0x37fb0a(0x2cb)](_0x54fdb8[_0x37fb0a(0x330)]()),_0x44ddde[_0x37fb0a(0x213)](_0x370f4d[_0x37fb0a(0x318)]())):_0x4a06a4+=_0x2e6b51:(_0x4a06a4=_0x4fc2ac,_0x23f8fd+=_0xd5b569);}},Window_PartyStatus[_0x55fab9(0x2d4)][_0x55fab9(0x315)]=function(){const _0x55ccc5=_0x55fab9;return Imported['VisuMZ_0_CoreEngine']?VisuMZ[_0x55ccc5(0x2d5)][_0x55ccc5(0x312)][_0x55ccc5(0x1a7)][_0x55ccc5(0x2c5)]:[0x2,0x3,0x4,0x5,0x6,0x7];},Window_PartyStatus[_0x55fab9(0x2d4)][_0x55fab9(0x1a5)]=function(_0x4dac3b,_0x3c9410,_0x125bb8,_0x1077bd){const _0x3814eb=_0x55fab9,_0x43db36=this['itemPadding']();_0x1077bd-=_0x43db36*0x2;if(Imported[_0x3814eb(0x222)])this[_0x3814eb(0x2e4)](_0x3c9410+_0x43db36,_0x125bb8,_0x1077bd,_0x4dac3b,![]);else{const _0x1a8a4f=TextManager[_0x3814eb(0x337)](_0x4dac3b);this[_0x3814eb(0x2a4)](ColorManager[_0x3814eb(0x285)]()),this['drawText'](_0x1a8a4f,_0x3c9410+_0x43db36,_0x125bb8,_0x1077bd);}},Window_PartyStatus[_0x55fab9(0x2d4)][_0x55fab9(0x18e)]=function(_0x4e76ff,_0x5106b0,_0x5ec562,_0x3cc71a){const _0x2aa680=_0x55fab9;this['resetFontSettings']();const _0x82c6b0=this[_0x2aa680(0x1be)](),_0x33f7df=this[_0x2aa680(0x28f)](_0x4e76ff);this[_0x2aa680(0x238)](_0x33f7df,_0x5106b0+_0x82c6b0,_0x5ec562,_0x3cc71a-_0x82c6b0*0x2,_0x2aa680(0x345));},Window_PartyStatus[_0x55fab9(0x2d4)][_0x55fab9(0x28f)]=function(_0x5bdac4){const _0x3257cb=_0x55fab9,_0x500267=this[_0x3257cb(0x35a)];return Imported[_0x3257cb(0x222)]?_0x500267[_0x3257cb(0x2aa)](_0x5bdac4,!![]):_0x500267[_0x3257cb(0x337)](_0x5bdac4);};function Window_PartyBattleSwitch(){const _0x1e62dc=_0x55fab9;this[_0x1e62dc(0x225)](...arguments);}Window_PartyBattleSwitch[_0x55fab9(0x2d4)]=Object[_0x55fab9(0x294)](Window_StatusBase[_0x55fab9(0x2d4)]),Window_PartyBattleSwitch[_0x55fab9(0x2d4)][_0x55fab9(0x168)]=Window_PartyBattleSwitch,Window_PartyBattleSwitch['prototype'][_0x55fab9(0x225)]=function(_0x54ffbc){const _0x3ca152=_0x55fab9;Window_StatusBase[_0x3ca152(0x2d4)]['initialize'][_0x3ca152(0x1bd)](this,_0x54ffbc),this[_0x3ca152(0x314)](VisuMZ[_0x3ca152(0x236)]['Settings'][_0x3ca152(0x300)][_0x3ca152(0x279)]),this['openness']=0x0;},Window_PartyBattleSwitch[_0x55fab9(0x2d4)]['loadFaceImages']=function(){const _0x3e715e=_0x55fab9;for(const _0x31747d of $gameParty[_0x3e715e(0x2ed)]()){ImageManager[_0x3e715e(0x2a5)](_0x31747d[_0x3e715e(0x263)]());}},Window_PartyBattleSwitch[_0x55fab9(0x2d4)][_0x55fab9(0x2e2)]=function(){return 0x1;},Window_PartyBattleSwitch[_0x55fab9(0x2d4)][_0x55fab9(0x1d9)]=function(_0x3c5c41){return $gameParty['reserveMembers']()[_0x3c5c41];},Window_PartyBattleSwitch[_0x55fab9(0x2d4)][_0x55fab9(0x2d7)]=function(){const _0x2b145a=_0x55fab9;return this['actor'](this[_0x2b145a(0x195)]());},Window_PartyBattleSwitch[_0x55fab9(0x2d4)]['itemHeight']=function(){return this['lineHeight']()*0x2+0x8;},Window_PartyBattleSwitch[_0x55fab9(0x2d4)][_0x55fab9(0x219)]=function(){const _0x246808=_0x55fab9;return $gameParty[_0x246808(0x24a)]()[_0x246808(0x340)];},Window_PartyBattleSwitch[_0x55fab9(0x2d4)][_0x55fab9(0x2f4)]=function(){const _0x4774b5=_0x55fab9;Window_StatusBase[_0x4774b5(0x2d4)][_0x4774b5(0x2f4)][_0x4774b5(0x1bd)](this),this[_0x4774b5(0x1cb)](),this[_0x4774b5(0x233)](),this[_0x4774b5(0x1e1)](0x0);},Window_PartyBattleSwitch['prototype'][_0x55fab9(0x363)]=function(){const _0x436ee4=_0x55fab9;Window_StatusBase[_0x436ee4(0x2d4)]['deactivate'][_0x436ee4(0x1bd)](this),this[_0x436ee4(0x170)]();},Window_PartyBattleSwitch['prototype']['isCurrentItemEnabled']=function(){const _0x472dfc=_0x55fab9;return this[_0x472dfc(0x36a)](this[_0x472dfc(0x2d7)]());},Window_PartyBattleSwitch[_0x55fab9(0x2d4)][_0x55fab9(0x36a)]=function(_0x3d0b97){const _0x4702e7=_0x55fab9;if(!_0x3d0b97)return![];return _0x3d0b97[_0x4702e7(0x1f0)]()&&_0x3d0b97[_0x4702e7(0x257)]();},Window_PartyBattleSwitch[_0x55fab9(0x2d4)][_0x55fab9(0x31e)]=function(_0x109a69){const _0x36a090=_0x55fab9,_0x5f5bcf=this['actor'](_0x109a69);if(!_0x5f5bcf)return;const _0x3d8974=ImageManager[_0x36a090(0x2a5)](_0x5f5bcf[_0x36a090(0x263)]());_0x3d8974['addLoadListener'](this[_0x36a090(0x244)][_0x36a090(0x178)](this,_0x109a69));},Window_PartyBattleSwitch['prototype'][_0x55fab9(0x244)]=function(_0x41fa94){const _0x7d1764=_0x55fab9;this[_0x7d1764(0x2c2)](_0x41fa94),this['drawItemStatus'](_0x41fa94);},Window_PartyBattleSwitch[_0x55fab9(0x2d4)][_0x55fab9(0x2c2)]=function(_0x553f27){const _0x175cb9=_0x55fab9,_0x448055=this['actor'](_0x553f27),_0xf591a5=this['itemRect'](_0x553f27);this[_0x175cb9(0x1f1)](this[_0x175cb9(0x36a)](_0x448055)),this['drawActorFace'](_0x448055,_0xf591a5['x']+0x1,_0xf591a5['y']+0x1,ImageManager['faceWidth'],_0xf591a5[_0x175cb9(0x372)]-0x2),this['changePaintOpacity'](!![]);},Window_PartyBattleSwitch[_0x55fab9(0x2d4)][_0x55fab9(0x35d)]=function(_0x2cf07){const _0x53b0f1=_0x55fab9,_0x2ae481=this[_0x53b0f1(0x1d9)](_0x2cf07),_0x3169a8=this[_0x53b0f1(0x250)](_0x2cf07),_0x2a9350=_0x3169a8['x']+ImageManager[_0x53b0f1(0x322)]+0x24,_0x14df81=_0x2a9350+0xb4;this[_0x53b0f1(0x1f1)](this[_0x53b0f1(0x36a)](_0x2ae481)),this['drawActorName'](_0x2ae481,_0x2a9350,_0x3169a8['y']),this[_0x53b0f1(0x215)](_0x2ae481,_0x2a9350,_0x3169a8['y']+this[_0x53b0f1(0x1ff)]()),this[_0x53b0f1(0x20b)](_0x2ae481,_0x14df81,_0x3169a8['y']),this[_0x53b0f1(0x1f1)](!![]);};Imported['VisuMZ_1_BattleCore']&&(ImageManager[_0x55fab9(0x212)]=VisuMZ['PartySystem'][_0x55fab9(0x312)]['General']['BattlePartyIcon']??0x4b,TextManager[_0x55fab9(0x304)]=VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x312)][_0x55fab9(0x34b)][_0x55fab9(0x2e3)],TextManager[_0x55fab9(0x1ae)]=VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x312)][_0x55fab9(0x34b)][_0x55fab9(0x329)],TextManager[_0x55fab9(0x2bc)]=VisuMZ[_0x55fab9(0x236)]['Settings'][_0x55fab9(0x34b)][_0x55fab9(0x37f)],TextManager[_0x55fab9(0x307)]=VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x312)]['Vocab'][_0x55fab9(0x17c)],TextManager[_0x55fab9(0x172)]=VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x312)][_0x55fab9(0x34b)][_0x55fab9(0x2b6)],VisuMZ[_0x55fab9(0x236)]['SceneManager_isPreviousSceneBattleTransitionable']=SceneManager[_0x55fab9(0x380)],SceneManager[_0x55fab9(0x380)]=function(){const _0x4ef6ee=_0x55fab9;if(SceneManager['isPreviousScene'](Scene_Party))return!![];return VisuMZ[_0x4ef6ee(0x236)][_0x4ef6ee(0x26a)][_0x4ef6ee(0x1bd)](this);},VisuMZ['PartySystem']['SceneManager_isNextSceneBattleTransitionable']=SceneManager['isNextSceneBattleTransitionable'],SceneManager['isNextSceneBattleTransitionable']=function(){const _0x5dde62=_0x55fab9;if(SceneManager[_0x5dde62(0x165)](Scene_Party))return!![];return VisuMZ[_0x5dde62(0x236)][_0x5dde62(0x2de)][_0x5dde62(0x1bd)](this);},SceneManager[_0x55fab9(0x1b3)]=function(){const _0x5b0b35=_0x55fab9;return this['_scene']&&this['_scene'][_0x5b0b35(0x168)]===Scene_Map;},VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x270)]=Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x196)],Scene_Battle['prototype'][_0x55fab9(0x196)]=function(){const _0x451012=_0x55fab9;VisuMZ[_0x451012(0x236)]['Scene_Battle_createAllWindows']['call'](this),this[_0x451012(0x1d8)](),this[_0x451012(0x22c)](),this['postPartySwitchMenuTurnBased']();},Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x1d8)]=function(){const _0x316418=_0x55fab9,_0x4b421f=this['partySwitchWindowRect']();this['_partyMemberSwitchWindow']=new Window_PartyBattleSwitch(_0x4b421f),this[_0x316418(0x18b)](this[_0x316418(0x1ef)]),this[_0x316418(0x1ef)][_0x316418(0x1c0)]('ok',this[_0x316418(0x1c7)][_0x316418(0x178)](this)),this[_0x316418(0x1ef)][_0x316418(0x1c0)](_0x316418(0x302),this[_0x316418(0x179)][_0x316418(0x178)](this));},Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x15d)]=function(){const _0x5d4a92=_0x55fab9,_0x35e723=this['battleLayoutStyle']();return _0x35e723===_0x5d4a92(0x355)?this[_0x5d4a92(0x331)]():this['partySwitchWindowRectStandard']();},Scene_Battle[_0x55fab9(0x2d4)]['partySwitchWindowRectStandard']=function(){const _0x349b0f=_0x55fab9;return VisuMZ['PartySystem'][_0x349b0f(0x312)][_0x349b0f(0x300)][_0x349b0f(0x252)][_0x349b0f(0x1bd)](this);},Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x331)]=function(){const _0x521e57=_0x55fab9,_0x5e0722=this[_0x521e57(0x16b)](),_0x97497f=$gameSystem['windowPadding']()*0x2;return _0x5e0722['width']=0x204+_0x97497f,_0x5e0722;},VisuMZ['PartySystem'][_0x55fab9(0x29a)]=Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x28c)],Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x28c)]=function(){const _0x2e9bee=_0x55fab9;if(this[_0x2e9bee(0x1ef)]&&this['_partyMemberSwitchWindow']['active'])return!![];if(this[_0x2e9bee(0x2a7)])return!![];if(this[_0x2e9bee(0x2b5)])return!![];if(this[_0x2e9bee(0x2a9)])return!![];return VisuMZ[_0x2e9bee(0x236)][_0x2e9bee(0x29a)][_0x2e9bee(0x1bd)](this);},VisuMZ['PartySystem'][_0x55fab9(0x325)]=Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x328)],Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x328)]=function(){const _0x2188b9=_0x55fab9;VisuMZ['PartySystem'][_0x2188b9(0x325)][_0x2188b9(0x1bd)](this),this[_0x2188b9(0x1e2)]['setHandler'](_0x2188b9(0x347),this[_0x2188b9(0x1b1)][_0x2188b9(0x178)](this));},Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x1b1)]=function(){const _0x411e24=_0x55fab9;this[_0x411e24(0x2b0)]()?(this['_callSceneParty']=!![],this[_0x411e24(0x31b)]['addText'](TextManager[_0x411e24(0x172)][_0x411e24(0x2c9)](TextManager[_0x411e24(0x347)]))):this[_0x411e24(0x1a2)]();},Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x2b0)]=function(){const _0x2cb107=_0x55fab9;return BattleManager[_0x2cb107(0x22b)]();},Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x1a2)]=function(){const _0x51504b=_0x55fab9;this[_0x51504b(0x2a9)]=![],this['_spriteset'][_0x51504b(0x204)](),this[_0x51504b(0x166)]['visible']=![],SceneManager[_0x51504b(0x26c)](),SceneManager[_0x51504b(0x288)](Scene_Party),$gameParty[_0x51504b(0x22d)](),BattleManager[_0x51504b(0x36f)]()&&(BattleManager[_0x51504b(0x34e)]=BattleManager[_0x51504b(0x1d9)]());},VisuMZ[_0x55fab9(0x236)]['Scene_Battle_updateBattleProcess']=Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x259)],Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x259)]=function(){const _0x57a72b=_0x55fab9;VisuMZ[_0x57a72b(0x236)][_0x57a72b(0x2ab)][_0x57a72b(0x1bd)](this);if(this['_callSceneParty']&&!BattleManager[_0x57a72b(0x2b7)]){if(_0x57a72b(0x1d5)===_0x57a72b(0x243))return _0x191d15[_0x57a72b(0x24a)]()[_0x197138];else this['callFormation']();}this[_0x57a72b(0x2b5)]&&!BattleManager[_0x57a72b(0x2b7)]&&this[_0x57a72b(0x2fe)]();},VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x23b)]=Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x2f3)],Scene_Battle[_0x55fab9(0x2d4)]['isTimeActive']=function(){const _0x3a2f63=_0x55fab9;if(BattleManager[_0x3a2f63(0x22b)]()){if(this[_0x3a2f63(0x1ef)]&&this[_0x3a2f63(0x1ef)][_0x3a2f63(0x21c)]){if('CfMSc'===_0x3a2f63(0x24e))_0x4e71f4[_0x3a2f63(0x2d4)][_0x3a2f63(0x1ea)]['call'](this),_0x27ab8b[_0x3a2f63(0x317)]();else return![];}}return VisuMZ[_0x3a2f63(0x236)]['Scene_Battle_isTimeActive'][_0x3a2f63(0x1bd)](this);},VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x34c)]=Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x246)],Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x246)]=function(){const _0x37a63b=_0x55fab9;VisuMZ[_0x37a63b(0x236)][_0x37a63b(0x34c)][_0x37a63b(0x1bd)](this),this[_0x37a63b(0x1fd)][_0x37a63b(0x1c0)](_0x37a63b(0x347),this[_0x37a63b(0x332)]['bind'](this));},Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x332)]=function(){const _0x26942d=_0x55fab9;this[_0x26942d(0x2b0)]()?_0x26942d(0x17a)!==_0x26942d(0x1bb)?(this[_0x26942d(0x2b5)]=!![],this[_0x26942d(0x31b)][_0x26942d(0x2e1)](TextManager[_0x26942d(0x172)][_0x26942d(0x2c9)](TextManager[_0x26942d(0x347)]))):(this['_actors'][_0x26942d(0x1d2)]((_0x383c9f,_0x52d9b9)=>_0x383c9f-_0x52d9b9),this['rearrangePartyActors'](),this[_0x26942d(0x317)]()):_0x26942d(0x378)==='YBTJA'?this['callPartyMemberSwitch']():(_0x44360d[_0x26942d(0x236)]['Scene_Battle_createPartyCommandWindowBattleCore'][_0x26942d(0x1bd)](this),this[_0x26942d(0x1e2)][_0x26942d(0x1c0)](_0x26942d(0x347),this['commandFormation'][_0x26942d(0x178)](this)));},Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x2fe)]=function(){const _0x31d41e=_0x55fab9;this[_0x31d41e(0x2b5)]=![],this['_logWindow'][_0x31d41e(0x343)](),BattleManager[_0x31d41e(0x1d9)]()&&this[_0x31d41e(0x1ef)][_0x31d41e(0x2f4)]();},Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x1c7)]=function(){const _0x2df733=_0x55fab9,_0x15dc28=this[_0x2df733(0x1ef)][_0x2df733(0x2d7)]();if(_0x15dc28){if(_0x2df733(0x35e)!==_0x2df733(0x33a))this[_0x2df733(0x309)](_0x15dc28);else return _0x2bb344[_0x2df733(0x30f)];}else this[_0x2df733(0x1ef)][_0x2df733(0x363)](),this[_0x2df733(0x1fd)][_0x2df733(0x2f4)]();},Scene_Battle[_0x55fab9(0x2d4)]['preparePartySwitchMember']=function(_0x17609b){const _0x190629=_0x55fab9,_0x5aac78=BattleManager[_0x190629(0x1d9)](),_0x41eae7=_0x5aac78['battler']();this[_0x190629(0x1ef)][_0x190629(0x363)](),this[_0x190629(0x36d)]()&&_0x41eae7?_0x190629(0x33d)!=='TxeNb'?this['refresh']():(this[_0x190629(0x2a7)]=!![],_0x41eae7[_0x190629(0x173)](_0x17609b)):this[_0x190629(0x2f8)](_0x17609b);},Scene_Battle[_0x55fab9(0x2d4)]['isShowPartySwitchOutAnimation']=function(){const _0x5e4ff7=_0x55fab9;return VisuMZ[_0x5e4ff7(0x236)]['Settings']['General'][_0x5e4ff7(0x27e)];},Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x2f8)]=function(_0x2e0ad7){const _0x6f81c5=_0x55fab9;this[_0x6f81c5(0x2a7)]=![];const _0x172aa1=BattleManager[_0x6f81c5(0x1d9)](),_0x21feb5=_0x172aa1[_0x6f81c5(0x277)]();$gameParty['_battleMembers'][_0x172aa1[_0x6f81c5(0x195)]()]=_0x2e0ad7['actorId'](),$gameParty['partyChangeRefresh']();if(this['isImmediateTpb']())_0x2e0ad7['_tpbChargeTime']=_0x172aa1[_0x6f81c5(0x28a)],_0x2e0ad7[_0x6f81c5(0x211)]=_0x6f81c5(0x37d);else BattleManager['isTpb']()&&_0x2e0ad7['clearTpbChargeTime']();BattleManager['_currentActor']=_0x2e0ad7,_0x2e0ad7[_0x6f81c5(0x22d)](),_0x2e0ad7[_0x6f81c5(0x298)](),_0x2e0ad7[_0x6f81c5(0x15e)](_0x172aa1),_0x21feb5&&_0x21feb5[_0x6f81c5(0x2ea)](_0x2e0ad7),this['_statusWindow']['switchStateIconActor'](_0x172aa1,_0x2e0ad7),this[_0x6f81c5(0x278)]['refresh'](),this['_actorCommandWindow'][_0x6f81c5(0x169)](_0x2e0ad7),this['_actorCommandWindow'][_0x6f81c5(0x1e1)](0x0),this['_actorCommandWindow'][_0x6f81c5(0x2f4)](),this[_0x6f81c5(0x1fd)][_0x6f81c5(0x2b9)]=!![];},Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x271)]=function(){const _0x3dd1e0=_0x55fab9;if(!BattleManager['isTpb']())return![];const _0x56e187=VisuMZ[_0x3dd1e0(0x236)]['Settings'][_0x3dd1e0(0x26b)];return _0x56e187[_0x3dd1e0(0x2eb)]===undefined&&(_0x56e187[_0x3dd1e0(0x2eb)]=!![]),_0x56e187[_0x3dd1e0(0x2eb)];},Window_StatusBase[_0x55fab9(0x2d4)]['switchStateIconActor']=function(_0xcdf70f,_0x58886e){const _0x574505=_0x55fab9,_0xcc0e37=_0x574505(0x20c)['format'](_0xcdf70f[_0x574505(0x27d)]()),_0x4b723=this[_0x574505(0x264)](_0xcc0e37,Sprite_StateIcon);_0x4b723[_0x574505(0x169)](_0x58886e);},Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x179)]=function(){const _0x35e0c6=_0x55fab9;this[_0x35e0c6(0x1ef)][_0x35e0c6(0x363)](),this[_0x35e0c6(0x1fd)]['activate'](),this[_0x35e0c6(0x1fd)]['refresh']();},Scene_Battle[_0x55fab9(0x2d4)][_0x55fab9(0x22c)]=function(){const _0x1ce50e=_0x55fab9;if(!BattleManager['isTpb']())return;if(!SceneManager[_0x1ce50e(0x232)](Scene_Party))return;this[_0x1ce50e(0x1e2)][_0x1ce50e(0x363)](),this[_0x1ce50e(0x1e2)]['close'](),this[_0x1ce50e(0x1fd)][_0x1ce50e(0x363)](),this['_actorCommandWindow']['close'](),BattleManager['_currentActor']=null,BattleManager[_0x1ce50e(0x316)]=![];},Scene_Battle[_0x55fab9(0x2d4)]['postPartySwitchMenuTurnBased']=function(){const _0x3b3a7e=_0x55fab9;if(BattleManager[_0x3b3a7e(0x36f)]())return;if(!SceneManager[_0x3b3a7e(0x232)](Scene_Party))return;Imported[_0x3b3a7e(0x21b)]&&BattleManager['isBTB']()&&BattleManager[_0x3b3a7e(0x1a3)]();Imported[_0x3b3a7e(0x29b)]&&BattleManager['isFTB']()&&(_0x3b3a7e(0x2f9)!=='dEDsN'?this['initialize'](...arguments):(BattleManager[_0x3b3a7e(0x34a)]=$gameParty[_0x3b3a7e(0x29d)](),BattleManager[_0x3b3a7e(0x2b7)]=BattleManager[_0x3b3a7e(0x1d9)](),BattleManager['_inputting']=!![],this[_0x3b3a7e(0x1fd)][_0x3b3a7e(0x169)](BattleManager[_0x3b3a7e(0x1d9)]()),this[_0x3b3a7e(0x278)][_0x3b3a7e(0x1ca)](BattleManager[_0x3b3a7e(0x1d9)]())));if(Imported[_0x3b3a7e(0x1fe)]&&BattleManager['isETB']()){if(_0x3b3a7e(0x272)!==_0x3b3a7e(0x272)){const _0x29da5e=this[_0x3b3a7e(0x28d)]();this[_0x3b3a7e(0x1ec)]=new _0x36be2c(_0x29da5e),this[_0x3b3a7e(0x1ec)][_0x3b3a7e(0x314)](_0x3fdd69[_0x3b3a7e(0x236)][_0x3b3a7e(0x312)][_0x3b3a7e(0x300)][_0x3b3a7e(0x2bb)]),this[_0x3b3a7e(0x18b)](this[_0x3b3a7e(0x1ec)]),this[_0x3b3a7e(0x254)]['setStatusWindow'](this[_0x3b3a7e(0x1ec)]),this[_0x3b3a7e(0x275)][_0x3b3a7e(0x1e9)](this[_0x3b3a7e(0x1ec)]);}else BattleManager[_0x3b3a7e(0x34a)]=$gameParty[_0x3b3a7e(0x29d)](),BattleManager['_subject']=BattleManager['actor'](),BattleManager[_0x3b3a7e(0x316)]=!![],this['_actorCommandWindow'][_0x3b3a7e(0x169)](BattleManager[_0x3b3a7e(0x1d9)]()),this[_0x3b3a7e(0x278)]['selectActor'](BattleManager[_0x3b3a7e(0x1d9)]());}Imported[_0x3b3a7e(0x2cd)]&&BattleManager[_0x3b3a7e(0x230)]()&&(BattleManager[_0x3b3a7e(0x34a)]=$gameParty[_0x3b3a7e(0x29d)](),BattleManager['_subject']=BattleManager[_0x3b3a7e(0x1d9)](),BattleManager[_0x3b3a7e(0x316)]=!![],this[_0x3b3a7e(0x1fd)]['setup'](BattleManager[_0x3b3a7e(0x1d9)]()),this[_0x3b3a7e(0x278)][_0x3b3a7e(0x1ca)](BattleManager[_0x3b3a7e(0x1d9)]()));},Game_Party[_0x55fab9(0x2d4)][_0x55fab9(0x29d)]=function(){const _0x29548b=_0x55fab9;let _0x15f14e=this[_0x29548b(0x295)]();return _0x15f14e[0x0];},Sprite_Actor['_partySwitchDuration']=0xc,Sprite_Actor[_0x55fab9(0x2d4)]['startSwitchOutAnimation']=function(_0x5d3a5b){const _0x488a65=_0x55fab9;this[_0x488a65(0x30c)]=_0x5d3a5b;const _0xb13e35=Sprite_Actor[_0x488a65(0x2b1)];this[_0x488a65(0x32c)](0x12c,0x0,_0xb13e35),this[_0x488a65(0x37b)](0x0,_0xb13e35),this['_partySwitchDuration']=_0xb13e35;},Sprite_Actor[_0x55fab9(0x2d4)][_0x55fab9(0x234)]=function(_0x2df282){const _0x53b347=_0x55fab9;if(SceneManager[_0x53b347(0x359)]()){SceneManager[_0x53b347(0x248)][_0x53b347(0x2f8)](_0x2df282);const _0x2d77b9=Sprite_Actor['_partySwitchDuration'];this[_0x53b347(0x1de)](),this[_0x53b347(0x37b)](0xff,_0x2d77b9);}this[_0x53b347(0x30c)]=null;},VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x323)]=Sprite_Actor[_0x55fab9(0x2d4)][_0x55fab9(0x204)],Sprite_Actor[_0x55fab9(0x2d4)][_0x55fab9(0x204)]=function(){const _0x4c3487=_0x55fab9;VisuMZ[_0x4c3487(0x236)][_0x4c3487(0x323)][_0x4c3487(0x1bd)](this);if(this['_partySwitchDuration'])this[_0x4c3487(0x218)]();},Sprite_Actor['prototype'][_0x55fab9(0x218)]=function(){const _0x2a67ab=_0x55fab9;this['_partySwitchDuration']=this['_partySwitchDuration']||0x0,this[_0x2a67ab(0x2b1)]--;if(this[_0x2a67ab(0x2b1)]<=0x0){if(_0x2a67ab(0x2a3)===_0x2a67ab(0x2a3))this[_0x2a67ab(0x234)](this[_0x2a67ab(0x30c)]);else{const _0x423aa2='actor%1-stateIcon'[_0x2a67ab(0x2c9)](_0x32cb62['actorId']()),_0x1c4ee1=this[_0x2a67ab(0x264)](_0x423aa2,_0x9914c7);_0x1c4ee1[_0x2a67ab(0x169)](_0x22f3fc);}}},Window_PartyCommand['prototype']['addCustomCommands']=function(){const _0x677302=_0x55fab9;this[_0x677302(0x287)]();},Window_PartyCommand['prototype'][_0x55fab9(0x287)]=function(){const _0x38a95b=_0x55fab9;if(!this[_0x38a95b(0x2b8)]())return;if(this[_0x38a95b(0x354)]()){if($gameTemp['isPlaytest']()&&!BattleManager[_0x38a95b(0x33f)]){if('LxZRE'!==_0x38a95b(0x1ce))return _0x2582cd['prototype'][_0x38a95b(0x191)][_0x38a95b(0x1bd)](this);else console['log'](_0x38a95b(0x1cd)),BattleManager[_0x38a95b(0x33f)]=!![];}return;}const _0x3d1955=this['commandStyle'](),_0x5a4b57=ImageManager['battlePartyChangeIcon'],_0x2f8f80=_0x3d1955===_0x38a95b(0x21e)?TextManager[_0x38a95b(0x304)]:'\x5cI[%1]%2'[_0x38a95b(0x2c9)](_0x5a4b57,TextManager[_0x38a95b(0x304)]),_0x4ec40e=this[_0x38a95b(0x1a0)]();this[_0x38a95b(0x32f)](_0x2f8f80,'formation',_0x4ec40e);},Window_PartyCommand[_0x55fab9(0x2d4)][_0x55fab9(0x2b8)]=function(){const _0x662dae=_0x55fab9;if(Imported[_0x662dae(0x365)]&&BattleManager['isOTB']())return![];return VisuMZ[_0x662dae(0x236)][_0x662dae(0x312)][_0x662dae(0x26b)]['PartyCmdWinAddParty'];},Window_PartyCommand['prototype']['hasBattleSystemIncompatibilities']=function(){const _0x3a20a9=_0x55fab9;if(Imported[_0x3a20a9(0x16c)]&&BattleManager[_0x3a20a9(0x2e9)]())return!![];return![];},Window_PartyCommand['prototype'][_0x55fab9(0x1a0)]=function(){const _0x2209b3=_0x55fab9;if($gameParty[_0x2209b3(0x2ed)]()[_0x2209b3(0x340)]<=0x1)return![];if(!$gameParty[_0x2209b3(0x274)]())return![];return $gameSystem['isFormationEnabled']();},VisuMZ[_0x55fab9(0x236)][_0x55fab9(0x312)][_0x55fab9(0x220)]=Window_PartyCommand[_0x55fab9(0x2d4)][_0x55fab9(0x20a)],Window_PartyCommand[_0x55fab9(0x2d4)][_0x55fab9(0x20a)]=function(){const _0x2678b3=_0x55fab9,_0x50c75b=this[_0x2678b3(0x1b4)]();switch(_0x50c75b){case _0x2678b3(0x347):this[_0x2678b3(0x1f9)][_0x2678b3(0x1ad)](TextManager[_0x2678b3(0x1ae)]);break;default:VisuMZ[_0x2678b3(0x236)][_0x2678b3(0x312)]['Window_PartyCommand_updateHelp']['call'](this);break;}},Window_ActorCommand['prototype'][_0x55fab9(0x280)]=function(){const _0x467534=_0x55fab9;if(!this['isPartyCommandAdded']())return;const _0x232ac5=this[_0x467534(0x1a4)](),_0x5cf88e=ImageManager[_0x467534(0x212)],_0xef4e1a=_0x232ac5==='text'?TextManager[_0x467534(0x2bc)]:_0x467534(0x368)[_0x467534(0x2c9)](_0x5cf88e,TextManager[_0x467534(0x304)]),_0x482aa1=this[_0x467534(0x1ba)]();this[_0x467534(0x32f)](_0xef4e1a,'formation',_0x482aa1);},Window_ActorCommand[_0x55fab9(0x2d4)][_0x55fab9(0x2f5)]=function(){const _0x1b3b20=_0x55fab9;if(!this[_0x1b3b20(0x35a)])return![];return VisuMZ[_0x1b3b20(0x236)]['Settings'][_0x1b3b20(0x26b)][_0x1b3b20(0x269)];},Window_ActorCommand[_0x55fab9(0x2d4)][_0x55fab9(0x1ba)]=function(){const _0x50f2eb=_0x55fab9;if($gameParty[_0x50f2eb(0x2ed)]()[_0x50f2eb(0x340)]<=0x1)return![];if(!this[_0x50f2eb(0x35a)])return![];if(!this[_0x50f2eb(0x35a)][_0x50f2eb(0x274)]())return![];return this[_0x50f2eb(0x35a)][_0x50f2eb(0x1f0)]();},VisuMZ['PartySystem'][_0x55fab9(0x312)]['Window_ActorCommand_updateHelp']=Window_ActorCommand['prototype'][_0x55fab9(0x20a)],Window_ActorCommand[_0x55fab9(0x2d4)][_0x55fab9(0x20a)]=function(){const _0x298576=_0x55fab9,_0x15c057=this['currentSymbol']();if(!_0x15c057)return;switch(_0x15c057[_0x298576(0x35b)]()){case _0x298576(0x347):this['_helpWindow'][_0x298576(0x1ad)](TextManager[_0x298576(0x307)]);break;default:VisuMZ[_0x298576(0x236)][_0x298576(0x312)][_0x298576(0x227)][_0x298576(0x1bd)](this);break;}});;