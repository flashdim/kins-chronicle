//=============================================================================
// VisuStella MZ - Message Core
// VisuMZ_1_MessageCore.js
//=============================================================================

var Imported = Imported || {};
Imported.VisuMZ_1_MessageCore = true;

var VisuMZ = VisuMZ || {};
VisuMZ.MessageCore = VisuMZ.MessageCore || {};
VisuMZ.MessageCore.version = 1.19;

//=============================================================================
 /*:
 * @target MZ
 * @plugindesc [RPG Maker MZ] [Tier 1] [Version 1.19] [MessageCore]
 * @author VisuStella
 * @url http://www.yanfly.moe/wiki/Message_Core_VisuStella_MZ
 * @orderAfter VisuMZ_0_CoreEngine
 *
 * @help
 * ============================================================================
 * Introduction
 * ============================================================================
 *
 * The Message Core plugin extends and builds upon the message functionality of
 * RPG Maker MZ and allows you, the game dev, to customize the workflow for
 * your game's message system.
 *
 * Features include all (but not limited to) the following:
 *
 * * Control over general message settings.
 * * Auto-Color key words and/or database entries.
 * * Increases the text codes available to perform newer functions/effects.
 * * Ability for you to implement custom Text Code actions.
 * * Ability for you to implement custom Text code string replacements.
 * * Invoke a macro system to speed up the dev process.
 * * Add a Text Speed option to the Options menu.
 * * Add the ever so useful Word Wrap to your message system.
 * * Extend the choice selection process to your liking.
 * * The ability to enable/disable as well as show/hide certain choices.
 *
 * ============================================================================
 * Requirements
 * ============================================================================
 *
 * This plugin is made for RPG Maker MZ. This will not work in other iterations
 * of RPG Maker.
 *
 * ------ Tier 1 ------
 *
 * This plugin is a Tier 1 plugin. Place it under other plugins of lower tier
 * value on your Plugin Manager list (ie: 0, 1, 2, 3, 4, 5). This is to ensure
 * that your plugins will have the best compatibility with the rest of the
 * VisuStella MZ library.
 *
 * ============================================================================
 * Major Changes
 * ============================================================================
 *
 * This plugin adds some new hard-coded features to RPG Maker MZ's functions.
 * The following is a list of them.
 *
 * ---
 * 
 * Dim Background Extension
 * 
 * Before, when using the Dim Background as a part of a Show Text event, its
 * size is only the same as the message window's width itself. This looked
 * really ugly because it had hard edges cutting off while gradients are seen
 * elsewhere. To make it look better, we extended the dimmed background to span
 * the width of the screen instead.
 * 
 * ---
 * 
 * Extended Messages
 * 
 * If you decide to expand the size of the message window to allow for more
 * rows to be displayed, you can type in the data for them by chaining together
 * Show Message events. They will take data from each other and display them in
 * the same message window as long as there are enough rows.
 * 
 * ---
 *
 * Extended Choice Lists
 * 
 * Choice lists can be extended by just chaining one Choice List event after
 * the other in succession along the same indentation. They do not extend if
 * there is any event other than a Choice List option between them on the same
 * indentation level.
 *
 * ---
 *
 * ============================================================================
 * Available Text Codes
 * ============================================================================
 *
 * The following are text codes that you may use with this plugin. Some of
 * these are original text codes provided by RPG Maker MZ, while others are
 * new text codes added through this plugin. You may even add your own text
 * codes through the plugin parameters.
 *
 * === RPG Maker MZ Text Codes ===
 *
 * The following are text codes that come with RPG Maker MZ. These text codes
 * cannot be edited through the Plugin Parameters.
 *
 * ---
 *
 * ------------------   -------------------------------------------------------
 * Text Code            Effect (Global)
 * ------------------   -------------------------------------------------------
 * \V[x]                Replaced by the value of variable 'x'.
 * \N[x]                Replaced by the name of actor 'x'.
 * \P[x]                Replaced by the name of party member 'x'.
 * \C[x]                Draw the subsequent text with window skin color 'x'.
 * \I[x]                Draw icon 'x'.
 *
 * \PX[x]               Moves text x position to 'x'.
 * \PY[x]               Moves text y position to 'y'.
 *
 * \G                   Replaced by the currency unit.
 *
 * \{                   Increase the text font size by one step.
 * \}                   Decrease the text font size by one step.
 * \FS[x]               Changes the text font size to 'x'.
 *
 * \\                   Replaced by the backslash character.
 *
 * ---
 *
 * ------------------   -------------------------------------------------------
 * Text Code            Effect (Message Window Only)
 * ------------------   -------------------------------------------------------
 * \$                   Opens the gold window.
 * \.                   Waits a 1/4 second.
 * \|                   Waits a full second.
 * \!                   Waits for button input.
 * \>                   Display remaining text on same line all at once.
 * \<                   Cancel the effect that displays text all at once.
 * \^                   Do not wait for input after displaying text to move on.
 *
 * ---
 *
 * === Message Core Hard-Coded Text Codes ===
 *
 * The following text codes are hard-coded into VisuStella MZ Message Core's
 * code. These text codes cannot be edited through the Plugin Parameters.
 * 
 * ---
 *
 * ------------------   -------------------------------------------------------
 * Text Code            Effect (Global)
 * ------------------   -------------------------------------------------------
 * <b>                  Makes subsequent text bold.
 * </b>                 Removes bold from subsequent text.
 * <i>                  Makes subsequent text italic.
 * </i>                 Removes italic from subsequent text.
 * 
 * <left>               Makes subsequent text left-aligned.
 * </left>              Removes left-alignment for subsequent text.
 * <center>             Makes subsequent text center-aligned.
 * </center>            Removes center-alignment for subsequent text.
 * <right>              Makes subsequent text right-aligned.
 * </right>             Removes right-alignment for subsequent text.
 *
 * Note1: Use at line-start.
 *
 * <ColorLock>          Text codes can't change text color for subsequent text.
 * </ColorLock>         Removes Color Lock property.
 *
 * <WordWrap>           Enables Word Wrap for this window. *Note2*
 * </WordWrap>          Disables Word Wrap for this window. *Note2*
 * <br>                 Adds a line break. Requires Word Wrap enabled.
 * <line break>         Adds a line break. Requires Word Wrap enabled.
 *
 * Note2: Some windows cannot use Word Wrap such as the Choice Window.
 *
 * \picture<x>          Draws picture x (filename) at current text position.
 * \CenterPicture<x>    Draws picture x (filename) centered at the window.
 *
 * ---
 *
 * ------------------   -------------------------------------------------------
 * Text Code            Effect (Message Window Only)
 * ------------------   -------------------------------------------------------
 * \CommonEvent[x]      Runs common event x when text code is reached.
 * \Wait[x]             Makes the message wait x frames before continuing.
 * 
 * <Auto>               Resizes message window dimensions to fit text. *Note3*
 * <Auto Width>         Resizes message window width to fit text. *Note3*
 * <Auto Height>        Resizes message window height to fit text. *Note3*
 * 
 * <Auto Actor: x>      Resizes message window and positions it over actor x
 *                      sprite's head. *Note3*
 * <Auto Party: x>      Resizes message window and positions it over party
 *                      member x sprite's head. *Note3*
 * <Auto Player>        Map-Only. Resizes message window and positions it over
 *                      the player sprite's head. *Note3*
 * <Auto Event: x>      Map-Only. Resizes message window and positions it over
 *                      event x sprite's head. *Note3*
 * <Auto Enemy: x>      Battle-Only. Resizes message window and positions it
 *                      over enemy x sprite's head. *Note3*
 *
 * Note3: Upon using these text codes, the message window's settings will be
 * reset for the upcoming message. These effects do not work with Word Wrap.
 *
 * ---
 *
 * -----------------------------  ---------------------------------------------
 * Text Code                      Effect (Choice Window Only)
 * -----------------------------  ---------------------------------------------
 * <Show>                         Choice is always shown.
 * <Show Switch: x>               Choice shown if switch x is ON.
 * <Show Switches: x,x,x>         Choice shown if the x switches are all ON.
 * <Show All Switches: x,x,x>     Choice shown if the x switches are all ON.
 * <Show Any Switches: x,x,x>     Choice shown if any of x switches are ON.
 *
 * <Hide>                         Choice is always hidden.
 * <Hide Switch: x>               Choice hidden if switch x is ON.
 * <Hide Switches: x,x,x>         Choice hidden if the x switches are all ON.
 * <Hide All Switches: x,x,x>     Choice hidden if the x switches are all ON.
 * <Hide Any Switches: x,x,x>     Choice hidden if any of x switches are ON.
 *
 * <Enable>                       Choice is always enabled.
 * <Enable Switch: x>             Choice enabled if switch x is ON.
 * <Enable Switches: x,x,x>       Choice enabled if the x switches are all ON.
 * <Enable All Switches: x,x,x>   Choice enabled if the x switches are all ON.
 * <Enable Any Switches: x,x,x>   Choice enabled if any of x switches are ON.
 *
 * <Disable>                      Choice is always disabled.
 * <Disable Switch: x>            Choice disabled if switch x is ON.
 * <Disable Switches: x,x,x>      Choice disabled if the x switches are all ON.
 * <Disable All Switches: x,x,x>  Choice disabled if the x switches are all ON.
 * <Disable Any Switches: x,x,x>  Choice disabled if any of x switches are ON.
 *
 * ---
 *
 * -----------------  ---------------------------------------------------------
 * Text Code          Effect (Name Window Only)
 * -----------------  ---------------------------------------------------------
 * <Left>             Positions the name box window to the left.
 * <Center>           Positions the name box window to the center.
 * <Right>            Positions the name box window to the right.
 * <Position: x>      Replace 'x' with a number from 0 to 10. This positions
 *                    the name box window on the screen relative to the
 *                    position of the value 'x' represents.
 * \NormalBG          Changes background type of window to normal type.
 * \DimBG             Changes background type of window to dim type.
 * \TransparentBG     Changes background type of window to transparent type.
 *
 * ---
 *
 * === Message Core Customizable Text Codes ===
 *
 * The following text codes can be altered through the Message Core's various
 * Plugin Parameters to adjust replacements and actions.
 *
 * ---
 *
 * ------------------   -------------------------------------------------------
 * Text Code            Effect (Global)
 * ------------------   -------------------------------------------------------
 * \Class[x]            Draws class x's icon (if have) and name.
 * \ClassName[x]        Draws class x's name only.
 *
 * \Skill[x]            Draws skill x's icon (if have) and name.
 * \SkillName[x]        Draws skill x's name only.
 *
 * \Item[x]             Draws item x's icon (if have) and name.
 * \ItemName[x]         Draws item x's name only.
 * \ItemQuantity[x]     Inserts the number of item x's owned by the party.
 *
 * \Weapon[x]           Draws weapon x's icon (if have) and name.
 * \WeaponName[x]       Draws weapon x's name only.
 * \WeaponQuantity[x]   Inserts the number of weapon x's owned by the party.
 *
 * \Armor[x]            Draws armor x's icon (if have) and name.
 * \ArmorName[x]        Draws armor x's name only.
 * \ArmorQuantity[x]    Inserts the number of armor x's owned by the party.
 *
 * \LastGainObj         Draws the icon + name of the last party-gained object.
 * \LastGainObjName     Draws the name of the last party-gained object.
 * \LastGainObjQuantity Inserts the quantity of the last party-gained object.
 *
 * \State[x]            Draws state x's icon (if have) and name.
 * \StateName[x]        Draws state x's name only.
 *
 * \Enemy[x]            Draws enemy x's icon (if have) and name.
 * \EnemyName[x]        Draws enemy x's name only.
 *
 * \Troop[x]            Draws troop x's icon (if have) and name.
 * \TroopName[x]        Draws troop x's name only.
 *
 * \TroopMember[x]      Draws troop member x's icon (if have) and name. *Note1*
 * \TroopNameMember[x]  Draws troop member x's name only. *Note1*
 * 
 * Note1: Only works in battle.
 *
 * \NormalBG            Changes background type of window to normal type.
 * \DimBG               Changes background type of window to dim type.
 * \TransparentBG       Changes background type of window to transparent type.
 *
 * \FontChange<x>       Changes font face to x font name.
 * \ResetFont           Resets font settings.
 *
 * \ResetColor          Resets color settings.
 * \HexColor<x>         Changes text color to x hex color (ie. #123abc).
 * \OutlineColor[x]     Changes outline color to text color x.
 * \OutlineHexColor<x>  Changes outline color to x hex color (ie. #123abc).
 * \OutlineWidth[x]     Changes outline width to x thickness.
 * 
 * \WindowMoveTo<x>     Moves window to exact coordinates. *Note2*
 * \WindowMoveBy<x>     Moves window by relative values. *Note2*
 * \WindowReset         Resets window position to original position.
 *
 * Note2: Replace 'x' with the following format:
 *   targetX, targetY, targetWidth, targetHeight, duration, easingType
 *   Only targetX and targetY are required arguments.
 *
 * ---
 *
 * ------------------   -------------------------------------------------------
 * Text Code            Effect (Message Window Only)
 * ------------------   -------------------------------------------------------
 * \ActorFace[x]        Inserts actor x's face into the Message Window.
 * \PartyFace[x]        Inserts party member x's face into the Message Window.
 * \ChangeFace<x,y>     Changes message face to x filename, y index.
 * \FaceIndex[x]        Changes message face index to x.
 *
 * \TextDelay[x]        Sets delay in frames between characters to x frames.
 * 
 * ---
 * 
 * As these text codes can be added, removed, and/or altered, their functions
 * may or may not be the same depending on how you've altered them. VisuStella
 * is not responsible for any errors caused by changes made to pre-made text
 * codes nor any new text codes they did not make.
 * 
 * ============================================================================
 * Plugin Commands
 * ============================================================================
 *
 * The following are Plugin Commands that come with this plugin. They can be
 * accessed through the Plugin Command event command.
 *
 * ---
 * 
 * === Message Plugin Commands ===
 * 
 * ---
 *
 * Message: Properties
 *   Change the various properties of the Message Window.
 *
 *   Rows:
 *   - Change the number of Message Window rows.
 *   - Leave at 0 to keep it unchanged.
 *
 *   Width: 
 *   - Change the Message Window width in pixels.
 *   - Leave at 0 to keep it unchanged.
 *
 *   Center:
 *   - Center the window X after changing its width?
 *
 *   Word Wrap:
 *   - Enable or disable Word Wrap for the Message Window?
 *
 * ---
 * 
 * === Choice Plugin Commands ===
 * 
 * ---
 *
 * Choice: Properties
 *   Change the properties found in the Show Choices event command.
 *
 *   Line Height:
 *   - Change the line height for the show choices.
 *   - Leave at 0 to keep this unchanged.
 *
 *   Max Rows:
 *   - Maximum number of choice rows to be displayed.
 *   - Leave at 0 to keep this unchanged.
 *
 *   Max Columns:
 *   - Maximum number of choice columns to be displayed.
 *   - Leave at 0 to keep this unchanged.
 *
 *   Text Alignment:
 *   - Text alignment for Show Choice window.
 *
 * ---
 *
 * ============================================================================
 * Plugin Parameters: General Settings
 * ============================================================================
 *
 * General settings involving the message system. These settings range from
 * adjust how the Message Window looks to more intricate settings like how
 * some of the default text codes work.
 *
 * ---
 *
 * Message Window
 *
 *   Default Rows:
 *   - Default number of rows to display for the Message Window.
 *
 *   Default Width:
 *   - Default Message Window width in pixels.
 *
 *   Fast Forward Key:
 *   - This is the key used for fast forwarding messages.
 *   - WARNING: If this key is the same as the dash button, this will clear out
 *     any held down inputs upon triggering an event  to prevent players from
 *     skipping potentially useful information stored in messages. If you do
 *     not want the input to be cleared, use a different key.
 *
 *   Text Delay:
 *   - How many frames to wait between characters drawn?
 *   - Use 0 for instant.
 * 
 *   Default Outline Width:
 *   - Changes the default outline width to this many pixels thick.
 *
 * ---
 *
 * Name Box Window
 *
 *   Default Color:
 *   - Default color for the Name Box Window's text.
 *
 *   Offset X:
 *   - How much to offset the name box window X by
 *     (as long as it doesn't go offscreen).
 *
 *   Offset Y:
 *   - How much to offset the name box window Y by
 *     (as long as it doesn't go offscreen).
 *
 * ---
 *
 * Choice List Window
 *
 *   Line Height:
 *   - What is the default line height for Show Choices?
 *
 *   Max Rows:
 *   - Maximum number of rows to visibly display?
 *
 *   Max Columns:
 *   - Maximum number of columns to visibly display?
 *
 *   Text Alignment:
 *   - Default alignment for Show Choice window.
 *
 * ---
 *
 * Default Text Codes
 *
 *   Relative \PX \PY:
 *   - Make \PX[x] and \PY[x] adjust relative starting position than
 *     exact coordinates.
 *
 *   \{ Maximum:
 *   - Determine the maximum size that \{ can reach.
 *
 *   \} Minimum:
 *   - Determine the minimum size that \} can reach.
 *
 *   \{ Change \}
 *   - How much does \{ and \} change font size by?
 *
 * ---
 *
 * ============================================================================
 * Plugin Parameters: Auto-Color Settings
 * ============================================================================
 *
 * For certain windows such as the Message Window, Help Window, and Choice
 * Window, Auto-Color is enabled to automatically highlight and color certain
 * database entries, keywords, and just about anything you, the game dev, wants
 * to be automatically colored. This is done to avoid typing out \C[6]Jack\C[0]
 * every time Jack's name is written out as it will be automatically colored in
 * those specific windows.
 *
 * The Plugin Parameters will give you full reign over which database entries
 * and keywords you want to be automatically colored as long as they follow a
 * few rules:
 * 
 * -----------------
 * Auto-Color Rules:
 * -----------------
 *
 * 1. Database names and keywords are case sensitive.
 *    This means if "Potion" is a marked keyword, typing out "potion" will not
 *    prompt the auto-color to highlight "potion". You must add the lowercase
 *    version of the word into the keyword list if you want it to count.
 *
 * 2. Database names and keywords are exact size (for Roman languages)
 *    This means if "Potion" is a marked keyword, typing out "potions" will not
 *    prompt the auto-color to highlight "potions". You must type out all of
 *    the variations of the words you want affected into the keyword list to
 *    prompt the auto-color highlight.
 * 
 *    This does not apply to Japanese, Korean, or Chinese languages.
 *
 * 3. Possessive cases and other language symbols aren't counted.
 *    Symbols such as periods, commas, quotes, parentheses, and similar symbols
 *    do no count towards Rule 2. This means if "Potion" is a marked keyword,
 *    the typing out "(Potion)" will still highlight the "Potion" part of the
 *    word according to the auto-color.
 * 
 * 4. Names with special characters like !, ?, [, ], etc. will be ignored.
 *    These cause conflicts with how auto-colors are detected.
 *
 * ---
 *
 * Database Highlighting
 *
 *   Actors:
 *   Classes:
 *   Skills:
 *   Items:
 *   Weapons:
 *   Armors:
 *   Enemies:
 *   States:
 *   - Any usage of a the selected database entry's name is auto-colored with
 *     the text code number.
 *   - Use 0 to not auto-color.
 *
 * ---
 *
 * Word Highlighting
 *
 *   \C[x]: Color
 *   - These are lists of all the words that will be automatically colored with
 *     the x text color.
 *
 * ---
 *
 * ============================================================================
 * Plugin Parameters: Text Code Actions
 * ============================================================================
 *
 * Text codes are used for one of two things: performing actions or replacing
 * themselves with text data. This Plugin Parameter will focus on the aspect of
 * performing actions. These actions can be done through each JavaScript or by
 * a common event (if it is used in the Message Window). Adequate knowledge of
 * both is recommended before attempting to modify and/or add new Text Code
 * Actions to the Plugin Parameters.
 *
 * Each of the Text Code Actions are formatted in such a way:
 *
 * ---
 *
 * Text Code Action
 *
 *   Match:
 *   - This is what needs to be matched in order for this text code to work.
 *   - This is the primary text marker after the \ in a text code.
 *   - In \N[x], this would be the 'N'.
 *
 *   Type:
 *   - The type of parameter to obtain (none, number, or string).
 *   - This is the way the text code determines the condition type.
 *   - In \N[x], this would be the '[x]'.
 *
 *   Common Event:
 *   - Select a common event to run when this text code is used in a message.
 *
 *   JS: Action:
 *   - JavaScript code used to perform an action when this text code appears.
 *
 * ---
 *
 * ============================================================================
 * Plugin Parameters: Text Code Replacements
 * ============================================================================
 *
 * Text codes are used for one of two things: performing actions or replacing
 * themselves with text data. This Plugin Parameter will focus on the aspect of
 * replacing the text codes with text data. Text data can be replaced with
 * an exact exchange of text or dynamically through JavaScript. Adding a new
 * Text Code Replacement is done through the Plugin Parameters.
 *
 * Each of the Text Code Replacements are formatted in such a way:
 *
 * ---
 *
 * Text Code Replacement
 *
 *   Match:
 *   - This is what needs to be matched in order for this text code to work.
 *   - This is the primary text marker after the \ in a text code.
 *   - In \N[x], this would be the 'N'.
 *
 *   Type:
 *   - The type of parameter to obtain (none, number, or string).
 *   - This is the way the text code determines the condition type.
 *   - In \N[x], this would be the '[x]'.
 *
 *   STR: Text:
 *   - The text that will appear if this match appears.
 *     If this has a value, ignore the JS: Text version.
 *
 *   JS: Text:
 *   - JavaScript code used to determine the text that will appear if this
 *     match appears.
 *
 * ---
 *
 * ============================================================================
 * Plugin Parameters: Text Macros
 * ============================================================================
 *
 * Text macros are used in similar fashion to text codes replacements to
 * replace themselves with text data. The primary difference is that macros are
 * made in a different format with no conditional argument modifiers (ie the
 * [x] that follows a text code).
 *
 * To use a text macro, type in the matching keyword between two [brackets] and
 * it will be replaced by the string data or run the JavaScript code found in
 * the Plugin Parameter settings.
 *
 * For example, if you have the text macro "Leader", made to return the party
 * leader's name, you can type in [Leader] in the Message Window and it will be
 * replaced with the party leader's name. The output can also output text codes
 * into the resulting text.
 * 
 * This does NOT work with \MacroName as it did with Yanfly Engine Plugins.
 * Use the method stated before with the brackets to [MacroName] instead.
 *
 * Each of the Text Macros are formatted in such a way:
 *
 * ---
 *
 * Text Macro
 *
 *   Match:
 *   - This is what needs to be matched in order for this macro to work.
 *   - In [Leader], this would be the 'Leader' text.
 *
 *   STR: Text:
 *   - The replacement text that will appear from the macro.
 *   - If this has a value, ignore the JS: Text version.
 *
 *   JS: Text:
 *   - JavaScript code used to determine the text that will appear if this
 *     macro appears.
 *
 * ---
 *
 * ============================================================================
 * Plugin Parameters: Text Speed Option Settings
 * ============================================================================
 *
 * Modern RPG's on the market have the option to adjust the message speed rate
 * for players. These Plugin Parameters allow you to add that option to the
 * Options Menu as well.
 *
 * ---
 *
 * Text Speed Option Settings
 *
 *   Add Option?:
 *   - Add the 'Text Speed' option to the Options menu?
 *
 *   Adjust Window Height:
 *   - Automatically adjust the options window height?
 *
 *   Option Name:
 *   - Command name of the option.
 *
 *   Default Value:
 *   - 1 - 10, slowest to fastest.
 *   - 11 is instant value.
 *
 *   Instant Speed:
 *   - Text to show "instant" text.
 *
 * ---
 * 
 * ============================================================================
 * Plugin Parameters: Word Wrap Settings
 * ============================================================================
 *
 * Word wrap is a property that will cause any overflowing text to wrap around
 * and move into the next line. This property can only be enabled inside text
 * that accept text codes, such as the Message Window and Help Window. However,
 * word wrap is disabled for the Choice Window due to the nature of the Choice
 * Window's base properties.
 *
 * Word wrap can be enabled or disabled in three ways. One is by using the text
 * code <WordWrap> to enable it or </WordWrap> to disable it. The second method
 * is by enabling it with the Plugin Command: 'Message: Properties'. The third
 * method is by enabling it by default with the Plugin Parameters.
 *
 * ---
 *
 * Enable Word Wrap
 *
 *   Message Window:
 *   - Automatically enable Word Wrap for this window?
 *
 *   Help Window:
 *   - Automatically enable Word Wrap for this window?
 *
 * ---
 *
 * Rules
 *
 *   Link Break -> Space:
 *   - Convert manually placed (non tagged) line breaks with spaces?
 *   - Line breaks must be inserted using the <br> text code.
 *
 *   Tight Wrap:
 *   - If a face graphic is present in a message, word wrap will be tighter.
 *
 * ---
 *
 * ============================================================================
 * Terms of Use
 * ============================================================================
 *
 * 1. These plugins may be used in free or commercial games provided that they
 * have been acquired through legitimate means at VisuStella.com and/or any
 * other official approved VisuStella sources. Exceptions and special
 * circumstances that may prohibit usage will be listed on VisuStella.com.
 * 
 * 2. All of the listed coders found in the Credits section of this plugin must
 * be given credit in your games or credited as a collective under the name:
 * "VisuStella".
 * 
 * 3. You may edit the source code to suit your needs, so long as you do not
 * claim the source code belongs to you. VisuStella also does not take
 * responsibility for the plugin if any changes have been made to the plugin's
 * code, nor does VisuStella take responsibility for user-provided custom code
 * used for custom control effects including advanced JavaScript notetags
 * and/or plugin parameters that allow custom JavaScript code.
 * 
 * 4. You may NOT redistribute these plugins nor take code from this plugin to
 * use as your own. These plugins and their code are only to be downloaded from
 * VisuStella.com and other official/approved VisuStella sources. A list of
 * official/approved sources can also be found on VisuStella.com.
 *
 * 5. VisuStella is not responsible for problems found in your game due to
 * unintended usage, incompatibility problems with plugins outside of the
 * VisuStella MZ library, plugin versions that aren't up to date, nor
 * responsible for the proper working of compatibility patches made by any
 * third parties. VisuStella is not responsible for errors caused by any
 * user-provided custom code used for custom control effects including advanced
 * JavaScript notetags and/or plugin parameters that allow JavaScript code.
 *
 * 6. If a compatibility patch needs to be made through a third party that is
 * unaffiliated with VisuStella that involves using code from the VisuStella MZ
 * library, contact must be made with a member from VisuStella and have it
 * approved. The patch would be placed on VisuStella.com as a free download
 * to the public. Such patches cannot be sold for monetary gain, including
 * commissions, crowdfunding, and/or donations.
 *
 * ============================================================================
 * Credits
 * ============================================================================
 * 
 * If you are using this plugin, credit the following people in your game:
 * 
 * Team VisuStella
 * * Yanfly
 * * Arisu
 * * Olivia
 * * Irina
 *
 * ============================================================================
 * Changelog
 * ============================================================================
 * 
 * Version 1.19: May 14, 2021
 * * Feature Updates!
 * ** <br> line breaks can now be used by Show Choices. Make sure that there is
 *    enough room to contain the text through Plugin Commands. Update by Irina.
 * 
 * Version 1.18: April 30, 2021
 * * Bug Fixes!
 * ** Moving windows with 0 duration via text code should now instantly move
 *    the windows to the desired location with no delay. Fix made by Olivia.
 * 
 * Version 1.17: April 9, 2021
 * * Feature Update!
 * ** <Auto> text codes for message windows will round up calculations for the
 *    message width to the nearest even number for better calculations.
 * 
 * Version 1.16: April 2, 2021
 * * Bug Fixes!
 * ** \CommonEvent[x] text code will no longer run upon message window size
 *    calculation. Fix made by Arisu.
 * * Documentation Update!
 * ** Added further clarification for "Text Macros" section.
 * *** This does NOT work with \MacroName as it did with Yanfly Engine Plugins.
 *     Use the method stated before with the brackets to [MacroName] instead.
 * 
 * Version 1.15: March 5, 2021
 * * Bug Fixes!
 * ** Hidden choices by switches will no longer count towards the maximum line
 *    count for Show Choice options. Fix made by Irina.
 * 
 * Version 1.14: February 12, 2021
 * * Bug Fixes!
 * ** Auto positioned messages in battle will no longer cover the battler in
 *    question. Fix made by Irina.
 * 
 * Version 1.13: February 5, 2021
 * * Bug Fixes!
 * ** Choice List Window with a dimmed background should now have a more
 *    consistent sized dim sprite. Fix made by Irina.
 * 
 * Version 1.12: January 22, 2021
 * * Feature Update!
 * ** Name Box Window Default Color is now disabled by default to 0 because
 *    users do not understand why their names are showing up yellow and did not
 *    bother reading the documentation. If users want this feature turned on,
 *    they will have to do it manually from now on. Update made by Irina.
 * 
 * Version 1.11: January 15, 2021
 * * Optimization Update!
 * ** Plugin should run more optimized.
 * 
 * Version 1.10: January 8, 2021
 * * Bug Fixes!
 * ** <Auto Actor: x> and <Auto Party: x> text codes should now work properly.
 *    Fix made by Irina.
 * * Feature Update!
 * ** Auto Color Plugin Parameters now have their default settings set to 0.
 *    This is due to an influx of "bug reports" from users who do not
 *    understand how this feature works, and the VisuStella team has decided it
 *    is better for the feature to default to an inactive state until users
 *    decide to search and utilize it themselves. Update made by Irina.
 * 
 * Version 1.09: January 1, 2021
 * * Feature Update!
 * ** Auto-color no longer applies to database names that are only numbers.
 *    Auto-color entries that are only numbers will also be ignored. This is to
 *    prevent breaking the text code parsing. Update made by Yanfly.
 * 
 * Version 1.08: November 15, 2020
 * * Documentation Update!
 * ** Some text codes left for the Name Box Window have been accidentally left
 *    out. These text codes allow for the positioning of the Name Box Window.
 *    Also, added to this section are the \NormalBG, \DimBG, and \TransparentBG
 *    text codes since people have been asking for how to change the name box
 *    window's background, but have skimmed over those text codes in different
 *    sections of the help file.
 * * Optimization Update!
 * ** Plugin should run more optimized.
 * 
 * Version 1.07: November 8, 2020
 * * Bug Fixes!
 * ** When using auto size functions, the message pause symbol will no longer
 *    appear semi-transparent the whole time. Fix made by Irina.
 * 
 * Version 1.06: October 25, 2020
 * * Documentation Update!
 * ** Added a warning message to the Fast Forward Key plugin parameter:
 * *** WARNING: If this key is the same as the dash button, this will clear out
 *     any held down inputs upon triggering an event  to prevent players from
 *     skipping potentially useful information stored in messages. If you do
 *     not want the input to be cleared, use a different key.
 * ** Updated help file for new features.
 * * Feature Update!
 * ** The default Fast Forward Key setting has now been changed from "Shift" to
 *    "Page Down". Change made by Yanfly
 * * New Feature!
 * ** New Plugin Parameter added by Irina.
 * *** Plugin Parameters > General > Default Outline Width
 * **** Changes the default outline width to this many pixels thick.
 * 
 * Version 1.06: September 27, 2020
 * * Bug Fixes!
 * ** Setting an actor's autocolor will now disable it from \N[x] and \P[x]
 *    text codes. Fix made by Irina.
 * 
 * Version 1.05: September 20, 2020
 * * Bug Fixes!
 * ** Auto Position text codes not place positions properly if the screen width
 *    and height differ from the box width and box height. Fix made by Irina.
 * 
 * Version 1.04: September 13, 2020
 * * Bug Fixes!
 * ** Word wrap no longer affects specific battle messages. Fix made by Irina.
 * ** Word wrap now updates properly after using the 'Message: Properties'
 *    Plugin Command. Fix made by Arisu.
 * 
 * Version 1.03: September 6, 2020
 * * Bug Fixes!
 * ** Autoplacement of the name box window now takes its offset Y setting into
 *    account before sending it to the bottom of the message window. Fix made
 *    by Yanfly.
 * ** Added automatic feature setting to turn off word wrap when using the
 *    auto-size and auto-position text codes. This is because the auto-size and
 *    auto-position effects don't work properly with Word Wrap based on how
 *    they both clash when adjusting the window settings. Fix made by Irina.
 * ** New message pages after auto-sizing no longer put out empty messages.
 *    Fix made by Irina and Shiro.
 * * Documentation Update!
 * ** Extended the note for auto-size and auto-position text codes to include
 *    that they do not work with Word Wrap. Added by Irina.
 * 
 * Version 1.02: August 30, 2020
 * * New Features!
 * ** Added new hard-coded text codes for auto-sizing and auto-positioning:
 * *** <Auto>, <Auto Width>, <Auto Height>
 * *** <Auto Actor: x>, <Auto Party: x>, <Auto Enemy: x>
 * *** <Auto Player>, <Auto Actor: x>, <Auto Party: x>, <Auto Event: x>
 * **** New features added by Irina.
 * 
 * Version 1.01: August 23, 2020
 * * Bug Fixes!
 * ** </Wordwrap> now works.
 * ** \ActorFace[x] text code now fixed.
 * *** Users updating from version 1.00 will need to fix this problem by either
 *     removing the plugin from the Plugin Manager list and reinstalling it, or
 *     going to Plugin Parameters > Text Code Replacements > ActorFace >
 *     JS: Text > and changing "$gameActors.actor(1)" to
 *     "$gameActors.actor(actorId)"
 * ** Actors with empty names would cause auto hightlight problems. Fixed!
 * ** Auto-colors now ignore names with special characters like !, ?, [, ], and
 *    so on.
 * ** Line break spacing fixed.
 * * New Features!
 * ** Wordwrap now works with <left>, <center> and <right> alignment tags.
 *
 * Version 1.00: August 20, 2020
 * * Finished Plugin!
 *
 * ============================================================================
 * End of Helpfile
 * ============================================================================
 *
 * @ --------------------------------------------------------------------------
 *
 * @command MessageWindowProperties
 * @text Message: Properties
 * @desc Change the various properties of the Message Window.
 *
 * @arg Rows:num
 * @text Rows
 * @type number
 * @min 0
 * @desc Change the number of Message Window rows.
 * Leave at 0 to keep it unchanged.
 * @default 4
 *
 * @arg Width:num
 * @text Width
 * @type number
 * @min 0
 * @desc Change the Message Window width in pixels.
 * Leave at 0 to keep it unchanged.
 * @default 816
 *
 * @arg Center:eval
 * @text Center Window X?
 * @parent Width
 * @type boolean
 * @on Center
 * @off Don't
 * @desc Center the window X after changing its width?
 * @default true
 *
 * @arg WordWrap:str
 * @text Word Wrap
 * @type select
 * @option No Change
 * @value No Change
 * @option Enable
 * @value true
 * @option Disable
 * @value false
 * @desc Enable or disable Word Wrap for the Message Window?
 * @default No Change
 *
 * @ --------------------------------------------------------------------------
 *
 * @command ChoiceWindowProperties
 * @text Choices: Properties
 * @desc Change the properties found in the Show Choices event command.
 *
 * @arg LineHeight:num
 * @text Line Height
 * @type number
 * @min 0
 * @desc Change the line height for the show choices.
 * Leave at 0 to keep this unchanged.
 * @default 36
 *
 * @arg MaxRows:num
 * @text Max Rows
 * @type number
 * @min 0
 * @desc Maximum number of choice rows to be displayed.
 * Leave at 0 to keep this unchanged.
 * @default 8
 *
 * @arg MaxCols:num
 * @text Max Columns
 * @type number
 * @min 0
 * @desc Maximum number of choice columns to be displayed.
 * Leave at 0 to keep this unchanged.
 * @default 1
 *
 * @arg TextAlign:str
 * @text Text Alignment
 * @type select
 * @option Default
 * @value default
 * @option Left
 * @value left
 * @option Center
 * @value center
 * @option Right
 * @value right
 * @desc Text alignment for Show Choice window.
 * @default default
 *
 * @ --------------------------------------------------------------------------
 *
 * @ ==========================================================================
 * @ Plugin Parameters
 * @ ==========================================================================
 *
 * @param BreakHead
 * @text --------------------------
 * @default ----------------------------------
 *
 * @param MessageCore
 * @default Plugin Parameters
 *
 * @param ATTENTION
 * @default READ THE HELP FILE
 *
 * @param BreakSettings
 * @text --------------------------
 * @default ----------------------------------
 *
 * @param General:struct
 * @text General Settings
 * @type struct<General>
 * @desc General settings involving the message system.
 * @default {"MessageWindow":"","MessageRows:num":"4","MessageWidth:num":"816","FastForwardKey:str":"pagedown","MessageTextDelay:num":"1","StretchDimmedBg:eval":"true","DefaultOutlineWidth:num":"3","NameBoxWindow":"","NameBoxWindowDefaultColor:num":"0","NameBoxWindowOffsetX:num":"0","NameBoxWindowOffsetY:num":"0","ChoiceListWindow":"","ChoiceWindowLineHeight:num":"36","ChoiceWindowMaxRows:num":"8","ChoiceWindowMaxCols:num":"1","ChoiceWindowTextAlign:str":"default","DefaultTextCodes":"","RelativePXPY:eval":"true","FontBiggerCap:eval":"108","FontSmallerCap:eval":"12","FontChangeValue:eval":"12"}
 *
 * @param AutoColor:struct
 * @text Auto-Color Settings
 * @type struct<AutoColor>
 * @desc Automatically color certain keywords a specific way.
 * @default {"DatabaseHighlighting":"","Actors:str":"0","Classes:str":"0","Skills:str":"0","Items:str":"0","Weapons:str":"0","Armors:str":"0","Enemies:str":"0","States:str":"0","WordHighlighting":"","TextColor1:arraystr":"[]","TextColor2:arraystr":"[]","TextColor3:arraystr":"[]","TextColor4:arraystr":"[]","TextColor5:arraystr":"[]","TextColor6:arraystr":"[]","TextColor7:arraystr":"[]","TextColor8:arraystr":"[]","TextColor9:arraystr":"[]","TextColor10:arraystr":"[]","TextColor11:arraystr":"[]","TextColor12:arraystr":"[]","TextColor13:arraystr":"[]","TextColor14:arraystr":"[]","TextColor15:arraystr":"[]","TextColor16:arraystr":"[]","TextColor17:arraystr":"[]","TextColor18:arraystr":"[]","TextColor19:arraystr":"[]","TextColor20:arraystr":"[]","TextColor21:arraystr":"[]","TextColor22:arraystr":"[]","TextColor23:arraystr":"[]","TextColor24:arraystr":"[]","TextColor25:arraystr":"[]","TextColor26:arraystr":"[]","TextColor27:arraystr":"[]","TextColor28:arraystr":"[]","TextColor29:arraystr":"[]","TextColor30:arraystr":"[]","TextColor31:arraystr":"[]"}
 *
 * @param TextCodeActions:arraystruct
 * @text Text Code Actions
 * @type struct<TextCodeAction>[]
 * @desc Text codes that perform actions.
 * @default ["{\"Match:str\":\"ChangeFace\",\"Type:str\":\"\\\\<(.*?)\\\\>\",\"CommonEvent:num\":\"0\",\"ActionJS:func\":\"\\\"const textState = arguments[0];\\\\nconst data = this.obtainEscapeString(textState).split(',');\\\\nif (textState.drawing) {\\\\n    const filename = data[0].trim();\\\\n    const index = parseInt(data[1] || '0');\\\\n    $gameMessage.setFaceImage(filename, index);\\\\n    this.loadMessageFace();\\\\n    const rtl = $gameMessage.isRTL();\\\\n    const width = ImageManager.faceWidth;\\\\n    const height = this.innerHeight;\\\\n    const x = rtl ? this.innerWidth - width - 4 : 4;\\\\n    this.contents.clearRect(x, 0, width, height);\\\\n    this._faceBitmap.addLoadListener(this.drawMessageFace.bind(this));\\\\n}\\\"\"}","{\"Match:str\":\"FaceIndex\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"CommonEvent:num\":\"0\",\"ActionJS:func\":\"\\\"const textState = arguments[0];\\\\nconst index = this.obtainEscapeParam(textState);\\\\nif (textState.drawing) {\\\\n    const filename = $gameMessage.faceName();\\\\n    $gameMessage.setFaceImage(filename, index);\\\\n    this.loadMessageFace();\\\\n    const rtl = $gameMessage.isRTL();\\\\n    const width = ImageManager.faceWidth;\\\\n    const height = this.innerHeight;\\\\n    const x = rtl ? this.innerWidth - width - 4 : 4;\\\\n    this.contents.clearRect(x, 0, width, height);\\\\n    this._faceBitmap.addLoadListener(this.drawMessageFace.bind(this));\\\\n}\\\"\"}","{\"Match:str\":\"TextDelay\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"CommonEvent:num\":\"0\",\"ActionJS:func\":\"\\\"const textState = arguments[0];\\\\nconst delay = this.obtainEscapeParam(textState);\\\\nif (textState.drawing && this.constructor === Window_Message) {\\\\n    this.setTextDelay(delay);\\\\n}\\\"\"}","{\"Match:str\":\"NormalBG\",\"Type:str\":\"\",\"CommonEvent:num\":\"0\",\"ActionJS:func\":\"\\\"const textState = arguments[0];\\\\nif (textState.drawing) {\\\\n    this.setBackgroundType(0);\\\\n}\\\"\"}","{\"Match:str\":\"DimBG\",\"Type:str\":\"\",\"CommonEvent:num\":\"0\",\"ActionJS:func\":\"\\\"const textState = arguments[0];\\\\nif (textState.drawing) {\\\\n    this.setBackgroundType(1);\\\\n}\\\"\"}","{\"Match:str\":\"TransparentBG\",\"Type:str\":\"\",\"CommonEvent:num\":\"0\",\"ActionJS:func\":\"\\\"const textState = arguments[0];\\\\nif (textState.drawing) {\\\\n    this.setBackgroundType(2);\\\\n}\\\"\"}","{\"Match:str\":\"FontChange\",\"Type:str\":\"\\\\<(.*?)\\\\>\",\"CommonEvent:num\":\"0\",\"ActionJS:func\":\"\\\"const textState = arguments[0];\\\\nconst fontName = this.obtainEscapeString(textState);\\\\nthis.contents.fontFace = fontName;\\\"\"}","{\"Match:str\":\"ResetFont\",\"Type:str\":\"\",\"CommonEvent:num\":\"0\",\"ActionJS:func\":\"\\\"this.resetFontSettings();\\\"\"}","{\"Match:str\":\"ResetColor\",\"Type:str\":\"\",\"CommonEvent:num\":\"0\",\"ActionJS:func\":\"\\\"this.resetTextColor();\\\"\"}","{\"Match:str\":\"HexColor\",\"Type:str\":\"\\\\<(.*?)\\\\>\",\"CommonEvent:num\":\"0\",\"ActionJS:func\":\"\\\"const textState = arguments[0];\\\\nconst hexColor = this.obtainEscapeString(textState);\\\\nif (!this.isColorLocked() && textState.drawing) {\\\\n    this.changeTextColor(hexColor);\\\\n}\\\"\"}","{\"Match:str\":\"OutlineColor\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"CommonEvent:num\":\"0\",\"ActionJS:func\":\"\\\"const textState = arguments[0];\\\\nconst colorIndex = this.obtainEscapeParam(textState);\\\\nif (!this.isColorLocked() && textState.drawing) {\\\\n    this.changeOutlineColor(ColorManager.textColor(colorIndex));\\\\n}\\\"\"}","{\"Match:str\":\"OutlineHexColor\",\"Type:str\":\"\\\\<(.*?)\\\\>\",\"CommonEvent:num\":\"0\",\"ActionJS:func\":\"\\\"const textState = arguments[0];\\\\nconst hexColor = this.obtainEscapeString(textState);\\\\nif (!this.isColorLocked() && textState.drawing) {\\\\n    this.changeOutlineColor(hexColor);\\\\n}\\\"\"}","{\"Match:str\":\"OutlineWidth\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"CommonEvent:num\":\"0\",\"ActionJS:func\":\"\\\"const textState = arguments[0];\\\\nconst width = this.obtainEscapeParam(textState);\\\\nif (textState.drawing) {\\\\n    this.contents.outlineWidth = width;\\\\n}\\\"\"}","{\"Match:str\":\"WindowMoveTo\",\"Type:str\":\"\\\\<(.*?)\\\\>\",\"CommonEvent:num\":\"0\",\"ActionJS:func\":\"\\\"const textState = arguments[0];\\\\nconst data = this.obtainEscapeString(textState).split(',');\\\\nif (textState.drawing) {\\\\n    const x = !!data[0] ? Number(data[0].trim()) : this.x;\\\\n    const y = !!data[1] ? Number(data[1].trim()) : this.y;\\\\n    const width = !!data[2] ? Number(data[2].trim()) : this.width;\\\\n    const height = !!data[3] ? Number(data[3].trim()) : this.height;\\\\n    const duration = !!data[4] ? Number(data[4].trim()) : 20;\\\\n    const easingType = !!data[5] ? data[5].trim() : 0;\\\\n    this.moveTo(x, y, width, height, duration, easingType);\\\\n}\\\"\"}","{\"Match:str\":\"WindowMoveBy\",\"Type:str\":\"\\\\<(.*?)\\\\>\",\"CommonEvent:num\":\"0\",\"ActionJS:func\":\"\\\"const textState = arguments[0];\\\\nconst data = this.obtainEscapeString(textState).split(',');\\\\nif (textState.drawing) {\\\\n    const x = !!data[0] ? Number(data[0].trim()) : 0;\\\\n    const y = !!data[1] ? Number(data[1].trim()) : 0;\\\\n    const width = !!data[2] ? Number(data[2].trim()) : 0;\\\\n    const height = !!data[3] ? Number(data[3].trim()) : 0;\\\\n    const duration = !!data[4] ? Number(data[4].trim()) : 20;\\\\n    const easingType = !!data[5] ? data[5].trim() : 0;\\\\n    this.moveBy(x, y, width, height, duration, easingType);\\\\n}\\\"\"}","{\"Match:str\":\"WindowReset\",\"Type:str\":\"\",\"CommonEvent:num\":\"0\",\"ActionJS:func\":\"\\\"const textState = arguments[0];\\\\nif (textState.drawing) {\\\\n    const frames = 20;\\\\n    const easingType = 0;\\\\n    this.resetRect(frames, easingType);\\\\n}\\\"\"}"]
 *
 * @param TextCodeReplace:arraystruct
 * @text Text Code Replacements
 * @type struct<TextCodeReplace>[]
 * @desc Text codes that replace themselves with text.
 * @default ["{\"Match:str\":\"ActorFace\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const actorId = parseInt(arguments[1]);\\\\nconst actor = $gameActors.actor(actorId);\\\\nif (this.constructor === Window_Message && actor) {\\\\n    $gameMessage.setFaceImage(\\\\n        actor.faceName(),\\\\n        actor.faceIndex()\\\\n    );\\\\n}\\\\nreturn '';\\\"\"}","{\"Match:str\":\"PartyFace\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const index = parseInt(arguments[1]) - 1;\\\\nconst actor = $gameParty.members()[index];\\\\nif (this.constructor === Window_Message && actor) {\\\\n    $gameMessage.setFaceImage(\\\\n        actor.faceName(),\\\\n        actor.faceIndex()\\\\n    );\\\\n}\\\\nreturn '';\\\"\"}","{\"Match:str\":\"Class\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataClasses;\\\\nconst id = parseInt(arguments[1]);\\\\nconst icon = true;\\\\nreturn this.databaseObjectName(database, id, icon);\\\"\"}","{\"Match:str\":\"ClassName\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataClasses;\\\\nconst id = parseInt(arguments[1]);\\\\nconst icon = false;\\\\nreturn this.databaseObjectName(database, id, icon);\\\"\"}","{\"Match:str\":\"Skill\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataSkills;\\\\nconst id = parseInt(arguments[1]);\\\\nconst icon = true;\\\\nreturn this.databaseObjectName(database, id, icon);\\\"\"}","{\"Match:str\":\"SkillName\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataSkills;\\\\nconst id = parseInt(arguments[1]);\\\\nconst icon = false;\\\\nreturn this.databaseObjectName(database, id, icon);\\\"\"}","{\"Match:str\":\"Item\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataItems;\\\\nconst id = parseInt(arguments[1]);\\\\nconst icon = true;\\\\nreturn this.databaseObjectName(database, id, icon);\\\"\"}","{\"Match:str\":\"ItemName\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataItems;\\\\nconst id = parseInt(arguments[1]);\\\\nconst icon = false;\\\\nreturn this.databaseObjectName(database, id, icon);\\\"\"}","{\"Match:str\":\"ItemQuantity\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataItems;\\\\nconst id = parseInt(arguments[1]);\\\\nreturn $gameParty.numItems(database[id]);\\\"\"}","{\"Match:str\":\"Weapon\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataWeapons;\\\\nconst id = parseInt(arguments[1]);\\\\nconst icon = true;\\\\nreturn this.databaseObjectName(database, id, icon);\\\"\"}","{\"Match:str\":\"WeaponName\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataWeapons;\\\\nconst id = parseInt(arguments[1]);\\\\nconst icon = false;\\\\nreturn this.databaseObjectName(database, id, icon);\\\"\"}","{\"Match:str\":\"WeaponQuantity\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataWeapons;\\\\nconst id = parseInt(arguments[1]);\\\\nreturn $gameParty.numItems(database[id]);\\\"\"}","{\"Match:str\":\"LastGainObj\",\"Type:str\":\"\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const icon = true;\\\\nreturn this.lastGainedObjectName(icon);\\\"\"}","{\"Match:str\":\"LastGainObjName\",\"Type:str\":\"\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const icon = false;\\\\nreturn this.lastGainedObjectName(icon);\\\"\"}","{\"Match:str\":\"LastGainObjQuantity\",\"Type:str\":\"\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"return this.lastGainedObjectQuantity();\\\"\"}","{\"Match:str\":\"Armor\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataArmors;\\\\nconst id = parseInt(arguments[1]);\\\\nconst icon = true;\\\\nreturn this.databaseObjectName(database, id, icon);\\\"\"}","{\"Match:str\":\"ArmorName\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataArmors;\\\\nconst id = parseInt(arguments[1]);\\\\nconst icon = false;\\\\nreturn this.databaseObjectName(database, id, icon);\\\"\"}","{\"Match:str\":\"ArmorQuantity\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataArmors;\\\\nconst id = parseInt(arguments[1]);\\\\nreturn $gameParty.numItems(database[id]);\\\"\"}","{\"Match:str\":\"State\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataStates;\\\\nconst id = parseInt(arguments[1]);\\\\nconst icon = true;\\\\nreturn this.databaseObjectName(database, id, icon);\\\"\"}","{\"Match:str\":\"StateName\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataStates;\\\\nconst id = parseInt(arguments[1]);\\\\nconst icon = false;\\\\nreturn this.databaseObjectName(database, id, icon);\\\"\"}","{\"Match:str\":\"Enemy\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataEnemies;\\\\nconst id = parseInt(arguments[1]);\\\\nconst icon = true;\\\\nreturn this.databaseObjectName(database, id, icon);\\\"\"}","{\"Match:str\":\"EnemyName\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataEnemies;\\\\nconst id = parseInt(arguments[1]);\\\\nconst icon = false;\\\\nreturn this.databaseObjectName(database, id, icon);\\\"\"}","{\"Match:str\":\"Troop\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataTroops;\\\\nconst id = parseInt(arguments[1]);\\\\nconst icon = true;\\\\nreturn this.databaseObjectName(database, id, icon);\\\"\"}","{\"Match:str\":\"TroopName\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"const database = $dataTroops;\\\\nconst id = parseInt(arguments[1]);\\\\nconst icon = false;\\\\nreturn this.databaseObjectName(database, id, icon);\\\"\"}","{\"Match:str\":\"TroopMember\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"if (!$gameParty.inBattle()) return \\\\\\\"\\\\\\\";\\\\nconst index = (parseInt(arguments[1]) - 1) || 0;\\\\nconst member = $gameTroop.members()[index];\\\\nconst database = $dataEnemies;\\\\nconst id = member ? member.enemyId() : 0;\\\\nconst icon = true;\\\\nreturn this.databaseObjectName(database, id, icon);\\\"\"}","{\"Match:str\":\"TroopMemberName\",\"Type:str\":\"\\\\[(\\\\d+)\\\\]\",\"TextStr:str\":\"Undefined\",\"TextJS:func\":\"\\\"if (!$gameParty.inBattle()) return \\\\\\\"\\\\\\\";\\\\nconst index = (parseInt(arguments[1]) - 1) || 0;\\\\nconst member = $gameTroop.members()[index];\\\\nconst database = $dataEnemies;\\\\nconst id = member ? member.enemyId() : 0;\\\\nconst icon = false;\\\\nreturn this.databaseObjectName(database, id, icon);\\\"\"}"]
 *
 * @param TextMacros:arraystruct
 * @text Text Macros
 * @type struct<TextMacro>[]
 * @desc Macros that are used to quickly write batches of text.
 * @default ["{\"Match:str\":\"Example Macro\",\"TextStr:str\":\"This is the text that will be displayed when you type [Example Macro].\",\"TextJS:func\":\"\\\"return 'Text';\\\"\"}","{\"Match:str\":\"Leader\",\"TextStr:str\":\"\\\\P[1]\",\"TextJS:func\":\"\\\"return 'Text';\\\"\"}"]
 *
 * @param TextSpeed:struct
 * @text Text Speed Option Settings
 * @type struct<TextSpeed>
 * @desc Text Speed Options Menu settings.
 * @default {"AddOption:eval":"true","AdjustRect:eval":"true","Name:str":"Text Speed","Default:num":"10","Instant:str":"Instant"}
 *
 * @param WordWrap:struct
 * @text Word Wrap Settings
 * @type struct<WordWrap>
 * @desc Settings involving Word Wrap.
 * @default {"EnableWordWrap":"","MessageWindow:eval":"false","HelpWindow:eval":"false","Rules":"","LineBreakSpace:eval":"true","TightWrap:eval":"false"}
 *
 * @param BreakEnd1
 * @text --------------------------
 * @default ----------------------------------
 *
 * @param End Of
 * @default Plugin Parameters
 *
 * @param BreakEnd2
 * @text --------------------------
 * @default ----------------------------------
 *
 */
/* ----------------------------------------------------------------------------
 * General Settings
 * ----------------------------------------------------------------------------
 */
/*~struct~General:
 *
 * @param MessageWindow
 * @text Message Window
 *
 * @param MessageRows:num
 * @text Default Rows
 * @parent MessageWindow
 * @type num
 * @min 1
 * @desc Default number of rows to display for the Message Window.
 * @default 4
 *
 * @param MessageWidth:num
 * @text Default Width
 * @parent MessageWindow
 * @type num
 * @min 1
 * @desc Default Message Window width in pixels.
 * @default 816
 *
 * @param FastForwardKey:str
 * @text Fast Forward Key
 * @parent MessageWindow
 * @type combo
 * @option tab
 * @option shift
 * @option control
 * @option pageup
 * @option pagedown
 * @desc This is the key used for fast forwarding messages.
 * @default pagedown
 *
 * @param MessageTextDelay:num
 * @text Text Delay
 * @parent MessageWindow
 * @type number
 * @min 0
 * @desc How many frames to wait between characters drawn?
 * Use 0 for instant.
 * @default 1
 *
 * @param StretchDimmedBg:eval
 * @text Stretch Dimmed BG
 * @parent MessageWindow
 * @type boolean
 * @on Stretch
 * @off Don't
 * @desc Stretch dimmed window background to fit the whole screen.
 * @default true
 *
 * @param DefaultOutlineWidth:num
 * @text Default Outline Width
 * @parent MessageWindow
 * @type number
 * @min 0
 * @desc Changes the default outline width to this many pixels thick.
 * @default 3
 *
 * @param NameBoxWindow
 * @text Name Box Window
 *
 * @param NameBoxWindowDefaultColor:num
 * @text Default Color
 * @parent NameBoxWindow
 * @min 0
 * @max 31
 * @desc Default color for the Name Box Window's text.
 * @default 0
 *
 * @param NameBoxWindowOffsetX:num
 * @text Offset X
 * @parent NameBoxWindow
 * @desc How much to offset the name box window X by (as long as it doesn't go offscreen).
 * @default 0
 *
 * @param NameBoxWindowOffsetY:num
 * @text Offset Y
 * @parent NameBoxWindow
 * @desc How much to offset the name box window Y by (as long as it doesn't go offscreen).
 * @default 0
 *
 * @param ChoiceListWindow
 * @text Choice List Window
 *
 * @param ChoiceWindowLineHeight:num
 * @text Line Height
 * @parent ChoiceListWindow
 * @type number
 * @min 1
 * @desc What is the default line height for Show Choices?
 * @default 36
 *
 * @param ChoiceWindowMaxRows:num
 * @text Max Rows
 * @parent ChoiceListWindow
 * @type number
 * @min 1
 * @desc Maximum number of rows to visibly display?
 * @default 8
 *
 * @param ChoiceWindowMaxCols:num
 * @text Max Columns
 * @parent ChoiceListWindow
 * @type number
 * @min 1
 * @desc Maximum number of columns to visibly display?
 * @default 1
 *
 * @param ChoiceWindowTextAlign:str
 * @text Text Alignment
 * @parent ChoiceListWindow
 * @type select
 * @option Default
 * @value default
 * @option Left
 * @value left
 * @option Center
 * @value center
 * @option Right
 * @value right
 * @desc Default alignment for Show Choice window.
 * @default default
 *
 * @param DefaultTextCodes
 * @text Default Text Codes
 *
 * @param RelativePXPY:eval
 * @text Relative \PX \PY
 * @parent DefaultTextCodes
 * @type boolean
 * @on Better
 * @off Normal
 * @desc Make \PX[x] and \PY[x] adjust relative starting position than exact coordinates.
 * @default true
 *
 * @param FontBiggerCap:eval
 * @text \{ Maximum
 * @parent DefaultTextCodes
 * @type number
 * @min 1
 * @desc Determine the maximum size that \{ can reach.
 * @default 108
 *
 * @param FontSmallerCap:eval
 * @text \} Minimum
 * @parent DefaultTextCodes
 * @type number
 * @min 1
 * @desc Determine the minimum size that \} can reach.
 * @default 12
 *
 * @param FontChangeValue:eval
 * @text \{ Change \}
 * @parent DefaultTextCodes
 * @type number
 * @min 1
 * @desc How much does \{ and \} change font size by?
 * @default 12
 *
 */
/* ----------------------------------------------------------------------------
 * Auto Color Settings
 * ----------------------------------------------------------------------------
 */
/*~struct~AutoColor:
 *
 * @param DatabaseHighlighting
 * @text Database Highlighting
 *
 * @param Actors:str
 * @text Actors
 * @parent DatabaseHighlighting
 * @type number
 * @min 0
 * @max 31
 * @desc Any usage of an Actor's name is given this text color.
 * Use 0 to not auto-color.
 * @default 0
 *
 * @param Classes:str
 * @text Classes
 * @parent DatabaseHighlighting
 * @type number
 * @min 0
 * @max 31
 * @desc Any usage of a Class's name is given this text color.
 * Use 0 to not auto-color.
 * @default 0
 *
 * @param Skills:str
 * @text Skills
 * @parent DatabaseHighlighting
 * @type number
 * @min 0
 * @max 31
 * @desc Any usage of a Skill's name is given this text color.
 * Use 0 to not auto-color.
 * @default 0
 *
 * @param Items:str
 * @text Items
 * @parent DatabaseHighlighting
 * @type number
 * @min 0
 * @max 31
 * @desc Any usage of an Item's name is given this text color.
 * Use 0 to not auto-color.
 * @default 0
 *
 * @param Weapons:str
 * @text Weapons
 * @parent DatabaseHighlighting
 * @type number
 * @min 0
 * @max 31
 * @desc Any usage of a Weapon's name is given this text color.
 * Use 0 to not auto-color.
 * @default 0
 *
 * @param Armors:str
 * @text Armors
 * @parent DatabaseHighlighting
 * @type number
 * @min 0
 * @max 31
 * @desc Any usage of an Armor's name is given this text color.
 * Use 0 to not auto-color.
 * @default 0
 *
 * @param Enemies:str
 * @text Enemies
 * @parent DatabaseHighlighting
 * @type number
 * @min 0
 * @max 31
 * @desc Any usage of an Enemy's name is given this text color.
 * Use 0 to not auto-color.
 * @default 0
 *
 * @param States:str
 * @text States
 * @parent DatabaseHighlighting
 * @type number
 * @min 0
 * @max 31
 * @desc Any usage of a State's name is given this text color.
 * Use 0 to not auto-color.
 * @default 0
 *
 * @param WordHighlighting
 * @text Word Highlighting
 *
 * @param TextColor1:arraystr
 * @text \C[1]: Blue
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor2:arraystr
 * @text \C[2]: Red
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor3:arraystr
 * @text \C[3]: Green
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor4:arraystr
 * @text \C[4]: Sky Blue
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor5:arraystr
 * @text \C[5]: Purple
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor6:arraystr
 * @text \C[6]: Yellow
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor7:arraystr
 * @text \C[7]: Gray
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor8:arraystr
 * @text \C[8]: Light Gray
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor9:arraystr
 * @text \C[9]: Dark Blue
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor10:arraystr
 * @text \C[10]: Dark Red
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor11:arraystr
 * @text \C[11]: Dark Green
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor12:arraystr
 * @text \C[12]: Dark Sky Blue
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor13:arraystr
 * @text \C[13]: Dark Purple
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor14:arraystr
 * @text \C[14]: Solid Yellow
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor15:arraystr
 * @text \C[15]: Black
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor16:arraystr
 * @text \C[16]: System Blue
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor17:arraystr
 * @text \C[17]: Crisis Yellow
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor18:arraystr
 * @text \C[18]: Dead Red
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor19:arraystr
 * @text \C[19]: Outline Black
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor20:arraystr
 * @text \C[20]: HP Orange 1
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor21:arraystr
 * @text \C[21]: HP Orange 2
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor22:arraystr
 * @text \C[22]: MP Blue 1
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor23:arraystr
 * @text \C[23]: MP Blue 2
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor24:arraystr
 * @text \C[24]: Param Up Green
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor25:arraystr
 * @text \C[25]: Param Down Red
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor26:arraystr
 * @text \C[26]: System Purple
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor27:arraystr
 * @text \C[27]: System Pink
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor28:arraystr
 * @text \C[28]: TP Green 1
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor29:arraystr
 * @text \C[29]: TP Green 2
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor30:arraystr
 * @text \C[30]: EXP Purple 1
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 * @param TextColor31:arraystr
 * @text \C[31]: EXP Purple 2
 * @parent WordHighlighting
 * @type string[]
 * @desc A list of all the words that will be automatically colored with this text color.
 * @default []
 *
 */
/* ----------------------------------------------------------------------------
 * Text Code Actions
 * ----------------------------------------------------------------------------
 */
/*~struct~TextCodeAction:
 *
 * @param Match:str
 * @text Match
 * @desc This is what needs to be matched in order for this text code to work.
 * @default Key
 *
 * @param Type:str
 * @text Type
 * @type select
 * @option none
 * @value 
 * @option [x] (number)
 * @value \[(\d+)\]
 * @option <x> (string)
 * @value \<(.*?)\>
 * @desc The type of parameter to obtain (none, number, or string).
 * @default 
 *
 * @param CommonEvent:num
 * @text Common Event
 * @type common_event
 * @desc Select a common event to run when this text code is used in a message.
 * @default 0
 *
 * @param ActionJS:func
 * @text JS: Action
 * @type note
 * @desc JavaScript code used to perform an action when this text code appears.
 * @default "const textState = arguments[0];"
 *
 */
/* ----------------------------------------------------------------------------
 * Text Code Replacements
 * ----------------------------------------------------------------------------
 */
/*~struct~TextCodeReplace:
 *
 * @param Match:str
 * @text Match
 * @desc This is what needs to be matched in order for this text code to work.
 * @default Key
 *
 * @param Type:str
 * @text Type
 * @type select
 * @option none
 * @value 
 * @option [x] (number)
 * @value \[(\d+)\]
 * @option <x> (string)
 * @value \<(.*?)\>
 * @desc The type of parameter to obtain (none, number, or string).
 * @default 
 *
 * @param TextStr:str
 * @text STR: Text
 * @desc The text that will appear if this match appears.
 * If this has a value, ignore the JS: Text version.
 * @default Undefined
 *
 * @param TextJS:func
 * @text JS: Text
 * @type note
 * @desc JavaScript code used to determine the text that will appear if this match appears.
 * @default "return 'Text';"
 *
 */
/* ----------------------------------------------------------------------------
 * Text Macro
 * ----------------------------------------------------------------------------
 */
/*~struct~TextMacro:
 *
 * @param Match:str
 * @text Match
 * @desc This is what needs to be matched in order for this macro to work.
 * @default Key
 *
 * @param TextStr:str
 * @text STR: Text
 * @desc The replacement text that will appear from the macro.
 * If this has a value, ignore the JS: Text version.
 * @default Undefined
 *
 * @param TextJS:func
 * @text JS: Text
 * @type note
 * @desc JavaScript code used to determine the text that will appear if this macro appears.
 * @default "return 'Text';"
 *
 */
/* ----------------------------------------------------------------------------
 * Text Speed Options Settings
 * ----------------------------------------------------------------------------
 */
/*~struct~TextSpeed:
 *
 * @param AddOption:eval
 * @text Add Option?
 * @type boolean
 * @on Add
 * @off Don't Add
 * @desc Add the 'Text Speed' option to the Options menu?
 * @default true
 *
 * @param AdjustRect:eval
 * @text Adjust Window Height
 * @type boolean
 * @on Adjust
 * @off Don't
 * @desc Automatically adjust the options window height?
 * @default true
 *
 * @param Name:str
 * @text Option Name
 * @desc Command name of the option.
 * @default Text Speed
 *
 * @param Default:num
 * @text Default Value
 * @type number
 * @min 1
 * @max 11
 * @desc 1 - 10, slowest to fastest.
 * 11 is instant value.
 * @default 10
 *
 * @param Instant:str
 * @text Instant Speed
 * @desc Text to show "instant" text.
 * @default Instant
 *
 */
/* ----------------------------------------------------------------------------
 * Word Wrap Settings
 * ----------------------------------------------------------------------------
 */
/*~struct~WordWrap:
 *
 * @param EnableWordWrap
 * @text Enable Word Wrap
 *
 * @param MessageWindow:eval
 * @text Message Window
 * @parent EnableWordWrap
 * @type boolean
 * @on Enable
 * @off Disable
 * @desc Automatically enable Word Wrap for this window?
 * @default false
 *
 * @param HelpWindow:eval
 * @text Help Window
 * @parent EnableWordWrap
 * @type boolean
 * @on Enable
 * @off Disable
 * @desc Automatically enable Word Wrap for this window?
 * @default false
 *
 * @param Rules
 * @text Rules
 *
 * @param LineBreakSpace:eval
 * @text Link Break -> Space
 * @parent Rules
 * @type boolean
 * @on Enable
 * @off Disable
 * @desc Convert manually placed (non tagged) line breaks with spaces?
 * @default true
 *
 * @param TightWrap:eval
 * @text Tight Wrap
 * @parent Rules
 * @type boolean
 * @on Enable
 * @off Disable
 * @desc If a face graphic is present in a message, word wrap will be tighter.
 * @default false
 *
 */
//=============================================================================

const _0x11ee=['exit','TextCodeActions','makeFontBigger','wzYXb','ConfigManager_applyData','Center','Window_Message_synchronizeNameBox','629CPlFAQ','jJJjp','format','convertTextAlignmentEscapeCharacters','onProcessCharacter','40yrCpyR','convertVariableEscapeCharacters','_messageWindow','kAYZr','_messageCommonEvents','AddAutoColor','TEXTALIGNMENT','mYrzW','placeCancelButton','isTriggered','</WORDWRAP>','code','contentsBack','map\x20player','_data','synchronizeNameBox','mzzjT','TextColor%1','StretchDimmedBg','SWITCHES','initialize','Enemies','thqXw','NameBoxWindowDefaultColor','NYIPo','adjustShowChoiceExtension','event','NkhMS','surprise','actorName','NameBoxWindowOffsetY','SEHTr','Type','mVxzz','\x1bTEXTALIGNMENT[1]','Window_Base_processAllText','true','description','ParseAllNotetags','\x1bTEXTALIGNMENT[0]','ARRAYSTR','KPuda','map\x20event','Default','selectDefault','Window_Base_processEscapeCharacter','Window_Message_newPage','updateNameBoxMove','oLRcn','replace','obtainExp','windowX','Window_Message_isTriggered','<LEFT>','defeat','kIeyl','clearFlags','Weapons','battle\x20actor','Armors',')))','QrsLa','close','registerActorNameAutoColorChanges','108477bFozFe','victory','bind','ChoiceWindowMaxRows','setWordWrap','Window_Options_changeVolume','ParseClassNotetags','prepareShowTextFollowups','setHelpWindowWordWrap','map\x20party','_centerMessageWindow','messageWindowRect','zpqkn','wmNeZ','SortObjectByKeyLength','textSizeEx','Window_NameBox_updatePlacement','FontChangeValue','start','TightWrap','MessageWindowProperties','constructor','mainFontFace','TextColor','AdjustRect','maxLines','length','shift','_dimmerSprite','General','peGKB','fontBold','whKWc','statusText','_commonEventId','Game_Map_setupEvents','flushTextState','vCJkD','[0]','prepareAutoSizeEscapeCharacters','oQeKI','getTextAlignment','ChoiceWindowProperties','<RIGHT>','return\x20\x27','Rows','convertLockColorsEscapeCharacters','width','substring','_lastGainedItemData','textCodeCheck','IHqij','maxCols','getChoiceListTextAlign','processActorNameAutoColorChanges','outLineColor','addMessageCoreTextSpeedCommand','_moveTargetWidth','setChoiceListLineHeight','149HTpOBC','textSizeExWordWrap','parseChoiceText','processWrapBreak','TextJS','85696gSjtTr','setPositionType','CommonEvent','exec','obtainEscapeString','Window_Message_clearFlags','messageCoreWindowX','clamp','Window_Base_changeTextColor','addContinuousShowTextCommands','%1\x20is\x20incorrectly\x20placed\x20on\x20the\x20plugin\x20list.\x0aIt\x20is\x20a\x20Tier\x20%2\x20plugin\x20placed\x20over\x20other\x20Tier\x20%3\x20plugins.\x0aPlease\x20reorder\x20the\x20plugin\x20list\x20from\x20smallest\x20to\x20largest\x20tier\x20numbers.','YQwcU','obtainEscapeParam','_nameBoxWindow','_indent','Window_Options_isVolumeSymbol','getChoiceListMaxColumns','choiceLineHeight','textWidth','loadPicture','VisuMZ_0_CoreEngine','nNfmt','ParseItemNotetags','_resetRect','resetRect','processDrawCenteredPicture','_texts','DefaultOutlineWidth','tfbRs','jjcxo','\x1bCOLORLOCK[0]','process_VisuMZ_MessageCore_TextCodes_Replace','filter','TextAlign','\x1bWrapBreak[0]','open','_moveEasingType','(((','Game_Map_initialize','ceil','_messagePositionReset','version','textColor','SWITCH','colSpacing','canMove','onNewPageMessageCore','setBackground','ParseEnemyNotetags','emerge','ParseWeaponNotetags','Scene_Boot_onDatabaseLoaded','height','false','_autoSizeRegexp','updateRelativePosition','TextCodeReplace','round','setChoiceListMaxRows','</CENTER>','toLowerCase','411BlDHIN','addExtraShowChoices','MaxCols','Window_Message_updatePlacement','startX','Width','PICTURE','_autoSizeCheck','isRTL','ConvertTextAutoColorRegExpFriendly','uecCH','easeIn','test','Window_Base_processNewLine','ITALIC','_moveTargetY','isItem','initMessageCore','XZINc','toUpperCase','ConfigManager_makeData','_spriteset','processMessageCoreEscapeActions','map\x20actor','Neidg','_autoPosRegExp','updateEvents','Cjoiw','setFaceImage','prepareShowTextCommand','189379dSrgQV','XXlME','outlineWidth','normalColor','updatePlacement','\x1bTEXTALIGNMENT[3]','processAutoPosition','FontSmallerCap','ooiiS','messagePositionReset','AutoColorRegExp','faceName','Scene_Options_maxCommands','Items','parameters','ParseArmorNotetags','obtainItem','resetPositionX','JkAIU','list','STRUCT','actor','processAutoColorWords','<LINE\x20BREAK>','outputHeight','outputWidth','_textAlignment','applyData','isChoiceEnabled','updateAutoPosition','addGeneralOptions','MessageWindow','NepaX','isAutoColorAffected','tqqwQ','fontFace','ParseStateNotetags','\x1bTEXTALIGNMENT[2]','Name','makeCommandList','helpWordWrap','MQbyc','iconIndex','NameBoxWindowOffsetX','processPxTextCode','</B>','8tWTeXx','fontItalic','indent','onDatabaseLoaded','setup','rtl','nextEventCode','updateOverlappingY','isMessageWindowWordWrap','RvIbl','inBattle','processCharacter','Jnfsm','Window_Options_addGeneralOptions','SHOW','MessageCore','splice','contents','convertMessageCoreEscapeReplacements','Window_Message_terminateMessage','aWGYe','_list','ARRAYFUNC','getMessageWindowWidth','clear','setMessageWindowWordWrap','_relativePosition','currencyUnit','zITsc','wjXom','parse','clearCommandList','clearActorNameAutoColor','<I>','textSpeed','TextStr','JbQuF','numVisibleRows','convertEscapeCharacters','changeOutlineColor','isVolumeSymbol','applyMoveEasing','moveTo','outlineColor','terminateMessage','resetFontSettings','windowWidth','battle\x20enemy','name','getChoiceListLineHeight','BuJel','split','defaultColor','choiceCols','Window_Base_processControlCharacter','ConvertParams','xGsJp','processAutoSize','map','isChoiceVisible','VcUmq','messageWidth','changeTextSpeed','\x1bCOLORLOCK[1]','process_VisuMZ_MessageCore_AutoColor','command101','setTextAlignment','EWINz','padding','currentCommand','startWait','getPreservedFontSettings','setChoiceListMaxColumns','_textDelay','ChoiceWindowLineHeight','maxCommands','obtainGold','zmIGt','moveBy','boxHeight','openness','khGxt','addContinuousShowChoices','cpygG','isColorLocked','messageCoreTextSpeed','_autoColorActorNames','itemRectWithPadding','_textColorStack','Window_ChoiceList_updatePlacement','drawItem','CVWzP','ecxTh','createTextState','includes','VyrFf','getChoiceListMaxRows','convertFontSettingsEscapeCharacters','faceWidth','drawBackPicture','GyYPG','processTextAlignmentX','setMessageWindowRows','getConfigValue','addMessageCoreCommands','lIyfM','adjustShowChoiceDefault','updateDimensions','CreateAutoColorRegExpLists','isWordWrapEnabled','findTargetSprite','processDrawPicture','processFontChangeBold','processFontChangeItalic','aVdkh','processEscapeCharacter','skRhg','oSKtG','updateOffsetPosition','_textDelayCount','QZpjE','mEVLO','gainItem','uXKXG','AIIBX','isSceneBattle','updateAutoSizePosition','STR','choices','right','processNewLine','setRelativePosition','</LEFT>','returnPreservedFontSettings','1sLIYFq','Actors','setupEvents','AddOption','WordWrap','push','PREVCOLOR','textSpeedStatusText','Game_Party_initialize','text','ChoiceWindowTextAlign','Game_Map_updateEvents','_wholeMoveDuration','TextSpeed','Window_Help_refresh','drawTextEx','makeFontSmaller','changePaintOpacity','Game_System_initialize','Jlfjo','applyDatabaseAutoColor','eJcGL','Window_Message_processEscapeCharacter','lQxNo','COLORLOCK','databaseObjectName','_index','boxWidth','refreshDimmerBitmap','processCommonEvent','JSON','choiceTextAlign','join','_moveDuration','processControlCharacter','WAIT','processColorLock','<BR>','BOLD','DcdoY','adjustShowChoiceCancel','type','battle\x20party','Window_Base_update','NUM','lineHeight','convertMessageCoreEscapeActions','\x1bITALIC[1]','AutoColor','processPyTextCode','messageRows','initTextAlignement','isRunning','match','choice','wsjaJ','changeVolume','startY','_autoPositionTarget','postConvertEscapeCharacters','createContents','Window_Options_statusText','_moveTargetX','activate','CreateAutoColorRegExpListEntries','Window_ChoiceList_windowX','postFlushTextState','DftuN','lastGainedObjectQuantity','</COLORLOCK>','COMMONEVENT','setTextDelay','updateMove','scale','AutoColorBypassList','isPressed','ENABLE','YgAiM','addCommand','process_VisuMZ_MessageCore_TextMacros','updateBackground','Settings','<WORDWRAP>','changeValue','MessageWidth','gTKKl','registerCommand','processAllText','drawing','setupChoices','4033QtpQSJ','preFlushTextState','stretchDimmerSprite','choiceRows','innerHeight','_scene','textCodeResult','processTextAlignmentChange','crxMu','process_VisuMZ_MessageCore_TextCodes_Action','isBreakShowTextCommands','xFPIk','isArmor','_interpreter','2997sgaXNU','mainFontSize','convertTextMacros','setWaitMode','newPage','floor','_wordWrap','bzyUW','VKcqP','KYXxp','textSizeExTextAlignment','processCustomWait','cIcyE','refresh','callOkHandler','CreateAutoColorFor','ARRAYEVAL','add','isContinuePrepareShowTextCommands','updateTransform','index','call','updateMessageCommonEvents','EVAL','processFsTextCode','ykXWs','drawBackCenteredPicture','_eventId','max','trim','Undefined','easeOut','processStoredAutoColorChanges','FUNC','\x1bC[%1]%2\x1bPREVCOLOR[0]','hZuqJ','blt','RelativePXPY','registerResetRect','TextMacros','preemptive','isSceneMap','resetWordWrap','\x1bITALIC[0]','setupItemChoice','_cancelButton','update','367bIGTqr','ChoiceWindowMaxCols','setMessageWindowWidth','makeDeepCopy','JUZSP','VLIfD','Classes','HIDE','calcWindowHeight','preConvertEscapeCharacters','calcMoveEasing','getLastGainedItemData','Match','</I>','<CENTER>','CENTERPICTURE','rjbpM','Window_Base_initialize','innerWidth','processPreviousColor','addMessageCommonEvent','value','PWAyA','partyMemberName','_moveTargetHeight','setLastGainedItemData','FontBiggerCap','ParseSkillNotetags','Game_Interpreter_setupChoices','follower','OpMkc','none','Skills','LineHeight','addLoadListener','convertBaseEscapeCharacters','XZMud','Window_Base_textSizeEx','WbXAE','lastGainedObjectName','States','easeInOut','resetTextColor','_MessageCoreSettings','LaTCW','\x1bBOLD[1]','dzWUG','qrpPI','clampPlacementPosition','getMessageWindowRows','default','messageWordWrap','UjsPe','\x5c%1','isWeapon','members','BqiIh','onChoice','followers','convertShowChoiceEscapeCodes','status','nlIcM','<B>','\x1bBOLD[0]','fontSize','message','left','setColorLock','paintOpacity','changeTextColor','ohDwe','ARRAYJSON','_colorLock','min','indexOf','sort','ZCmPD','1RSaQWt','quantity','itemHeight','itemPadding','convertBackslashCharacters','prototype','\x1bi[%1]%2','remove','makeData','launchMessageCommonEvent'];const _0x117a34=_0x59d5;(function(_0x5ee568,_0xba929c){const _0x5b77de=_0x59d5;while(!![]){try{const _0x3779c4=parseInt(_0x5b77de(0x2c4))*-parseInt(_0x5b77de(0x14f))+parseInt(_0x5b77de(0xc9))*-parseInt(_0x5b77de(0x289))+parseInt(_0x5b77de(0x306))*parseInt(_0x5b77de(0x1e6))+-parseInt(_0x5b77de(0x233))*parseInt(_0x5b77de(0x324))+-parseInt(_0x5b77de(0x2c9))+parseInt(_0x5b77de(0x1a9))*-parseInt(_0x5b77de(0x249))+parseInt(_0x5b77de(0x1b7))*parseInt(_0x5b77de(0x244));if(_0x3779c4===_0xba929c)break;else _0x5ee568['push'](_0x5ee568['shift']());}catch(_0x223198){_0x5ee568['push'](_0x5ee568['shift']());}}}(_0x11ee,0xb29c6));var label=_0x117a34(0xd8),tier=tier||0x0,dependencies=[],pluginData=$plugins[_0x117a34(0x2e9)](function(_0x3b2833){const _0x5a5d78=_0x117a34;return _0x3b2833[_0x5a5d78(0x222)]&&_0x3b2833[_0x5a5d78(0x26e)][_0x5a5d78(0x127)]('['+label+']');})[0x0];function _0x59d5(_0x3cef54,_0x242428){_0x3cef54=_0x3cef54-0x9e;let _0x11ee16=_0x11ee[_0x3cef54];return _0x11ee16;}VisuMZ[label][_0x117a34(0x1a0)]=VisuMZ[label][_0x117a34(0x1a0)]||{},VisuMZ[_0x117a34(0x100)]=function(_0x6bec75,_0xdd7584){const _0x25dca7=_0x117a34;for(const _0x43a8fc in _0xdd7584){if(_0x25dca7(0x1b4)===_0x25dca7(0x2de)){function _0x2cca87(){const _0x6f7ed1=_0x25dca7;this[_0x6f7ed1(0x134)](),this[_0x6f7ed1(0x9f)](),this[_0x6f7ed1(0xac)](),this['updateTransform'](),this['contents']['clear'](),this[_0x6f7ed1(0x18b)]();}}else{if(_0x43a8fc['match'](/(.*):(.*)/i)){if(_0x25dca7(0x286)===_0x25dca7(0x1da)){function _0x231d31(){const _0x1acd70=_0x25dca7;this[_0x1acd70(0xb5)]=_0x4cec3c;}}else{const _0x58cc22=String(RegExp['$1']),_0x136a76=String(RegExp['$2'])[_0x25dca7(0x319)]()[_0x25dca7(0x1d4)]();let _0x74b082,_0xc19fd5,_0x377e00;switch(_0x136a76){case _0x25dca7(0x17b):_0x74b082=_0xdd7584[_0x43a8fc]!==''?Number(_0xdd7584[_0x43a8fc]):0x0;break;case'ARRAYNUM':_0xc19fd5=_0xdd7584[_0x43a8fc]!==''?JSON['parse'](_0xdd7584[_0x43a8fc]):[],_0x74b082=_0xc19fd5[_0x25dca7(0x103)](_0x5d7e3e=>Number(_0x5d7e3e));break;case _0x25dca7(0x1ce):_0x74b082=_0xdd7584[_0x43a8fc]!==''?eval(_0xdd7584[_0x43a8fc]):null;break;case _0x25dca7(0x1c7):_0xc19fd5=_0xdd7584[_0x43a8fc]!==''?JSON['parse'](_0xdd7584[_0x43a8fc]):[],_0x74b082=_0xc19fd5['map'](_0x19d2c0=>eval(_0x19d2c0));break;case _0x25dca7(0x16d):_0x74b082=_0xdd7584[_0x43a8fc]!==''?JSON['parse'](_0xdd7584[_0x43a8fc]):'';break;case _0x25dca7(0x22d):_0xc19fd5=_0xdd7584[_0x43a8fc]!==''?JSON[_0x25dca7(0xe7)](_0xdd7584[_0x43a8fc]):[],_0x74b082=_0xc19fd5[_0x25dca7(0x103)](_0xbfd1e1=>JSON[_0x25dca7(0xe7)](_0xbfd1e1));break;case _0x25dca7(0x1d8):_0x74b082=_0xdd7584[_0x43a8fc]!==''?new Function(JSON[_0x25dca7(0xe7)](_0xdd7584[_0x43a8fc])):new Function('return\x200');break;case _0x25dca7(0xdf):_0xc19fd5=_0xdd7584[_0x43a8fc]!==''?JSON[_0x25dca7(0xe7)](_0xdd7584[_0x43a8fc]):[],_0x74b082=_0xc19fd5[_0x25dca7(0x103)](_0x541861=>new Function(JSON[_0x25dca7(0xe7)](_0x541861)));break;case _0x25dca7(0x148):_0x74b082=_0xdd7584[_0x43a8fc]!==''?String(_0xdd7584[_0x43a8fc]):'';break;case _0x25dca7(0x271):_0xc19fd5=_0xdd7584[_0x43a8fc]!==''?JSON[_0x25dca7(0xe7)](_0xdd7584[_0x43a8fc]):[],_0x74b082=_0xc19fd5[_0x25dca7(0x103)](_0x55fac6=>String(_0x55fac6));break;case _0x25dca7(0xaf):_0x377e00=_0xdd7584[_0x43a8fc]!==''?JSON[_0x25dca7(0xe7)](_0xdd7584[_0x43a8fc]):{},_0x6bec75[_0x58cc22]={},VisuMZ['ConvertParams'](_0x6bec75[_0x58cc22],_0x377e00);continue;case'ARRAYSTRUCT':_0xc19fd5=_0xdd7584[_0x43a8fc]!==''?JSON[_0x25dca7(0xe7)](_0xdd7584[_0x43a8fc]):[],_0x74b082=_0xc19fd5[_0x25dca7(0x103)](_0x185340=>VisuMZ[_0x25dca7(0x100)]({},JSON[_0x25dca7(0xe7)](_0x185340)));break;default:continue;}_0x6bec75[_0x58cc22]=_0x74b082;}}}}return _0x6bec75;},(_0x33e7cd=>{const _0x4b4568=_0x117a34,_0x4191b8=_0x33e7cd[_0x4b4568(0xf9)];for(const _0x9ad716 of dependencies){if(!Imported[_0x9ad716]){if(_0x4b4568(0x325)!==_0x4b4568(0x325)){function _0x146c4b(){const _0x4cbf3f=_0x4b4568,_0x1194df=_0x30cf7e[_0x4cbf3f(0x11e)],_0x104ab2=_0x4cbf3f(0xeb);this[_0x4cbf3f(0x19d)](_0x1194df,_0x104ab2);}}else{alert('%1\x20is\x20missing\x20a\x20required\x20plugin.\x0aPlease\x20install\x20%2\x20into\x20the\x20Plugin\x20Manager.'[_0x4b4568(0x246)](_0x4191b8,_0x9ad716)),SceneManager['exit']();break;}}}const _0x662192=_0x33e7cd[_0x4b4568(0x26e)];if(_0x662192[_0x4b4568(0x184)](/\[Version[ ](.*?)\]/i)){const _0x453a68=Number(RegExp['$1']);_0x453a68!==VisuMZ[label][_0x4b4568(0x2f2)]&&(alert('%1\x27s\x20version\x20does\x20not\x20match\x20plugin\x27s.\x20Please\x20update\x20it\x20in\x20the\x20Plugin\x20Manager.'[_0x4b4568(0x246)](_0x4191b8,_0x453a68)),SceneManager[_0x4b4568(0x23d)]());}if(_0x662192['match'](/\[Tier[ ](\d+)\]/i)){if(_0x4b4568(0x1c3)===_0x4b4568(0x2b1)){function _0x43dd2d(){const _0x4c4db6=_0x4b4568;_0x3c148e[_0x4c4db6(0xd8)][_0x4c4db6(0x313)][_0x4c4db6(0x1cc)](this,_0xeb5b32),this[_0x4c4db6(0x12e)](_0x5af1fd);}}else{const _0x3e5b4e=Number(RegExp['$1']);_0x3e5b4e<tier?(alert(_0x4b4568(0x2d3)[_0x4b4568(0x246)](_0x4191b8,_0x3e5b4e,tier)),SceneManager[_0x4b4568(0x23d)]()):tier=Math[_0x4b4568(0x1d3)](_0x3e5b4e,tier);}}VisuMZ[_0x4b4568(0x100)](VisuMZ[label]['Settings'],_0x33e7cd[_0x4b4568(0xa9)]);})(pluginData),PluginManager[_0x117a34(0x1a5)](pluginData[_0x117a34(0xf9)],_0x117a34(0x2b3),_0x1e4c75=>{const _0x18aae8=_0x117a34;VisuMZ[_0x18aae8(0x100)](_0x1e4c75,_0x1e4c75);const _0x2a8276=_0x1e4c75[_0x18aae8(0x207)]||$gameSystem['getChoiceListLineHeight']()||0x1,_0x1f9692=_0x1e4c75['MaxRows']||$gameSystem['getChoiceListMaxRows']()||0x1,_0x582d01=_0x1e4c75[_0x18aae8(0x308)]||$gameSystem['getChoiceListMaxColumns']()||0x1,_0x59709a=_0x1e4c75[_0x18aae8(0x2ea)][_0x18aae8(0x305)]()||'default';$gameSystem[_0x18aae8(0x2c3)](_0x2a8276),$gameSystem[_0x18aae8(0x303)](_0x1f9692),$gameSystem[_0x18aae8(0x111)](_0x582d01),$gameSystem['setChoiceListTextAlign'](_0x59709a);}),PluginManager['registerCommand'](pluginData[_0x117a34(0xf9)],_0x117a34(0x29d),_0x5c38a5=>{const _0x3d7247=_0x117a34;VisuMZ[_0x3d7247(0x100)](_0x5c38a5,_0x5c38a5);const _0x36e35f=_0x5c38a5[_0x3d7247(0x2b6)]||$gameSystem[_0x3d7247(0x217)]()||0x1,_0x1d8c22=_0x5c38a5[_0x3d7247(0x30b)]||$gameSystem['getMessageWindowWidth']()||0x1;$gameTemp[_0x3d7247(0x293)]=_0x5c38a5[_0x3d7247(0x242)]||![];const _0x230798=_0x5c38a5[_0x3d7247(0x153)]['toLowerCase']();$gameSystem['setMessageWindowRows'](_0x36e35f),$gameSystem['setMessageWindowWidth'](_0x1d8c22);if([_0x3d7247(0x26d),_0x3d7247(0x2fe)][_0x3d7247(0x127)](_0x230798)){if(_0x3d7247(0x101)!==_0x3d7247(0x101)){function _0x4f3c04(){const _0x140c62=_0x3d7247;_0x1e8230[_0x140c62(0xd8)][_0x140c62(0x299)][_0x140c62(0x1cc)](this),this[_0x140c62(0x300)](),this[_0x140c62(0x13f)](),this[_0x140c62(0x216)](),this['updateOverlappingY']();}}else $gameSystem[_0x3d7247(0xe2)](eval(_0x230798));}const _0xd50bd9=SceneManager['_scene'][_0x3d7247(0x24b)];_0xd50bd9&&(_0xd50bd9[_0x3d7247(0x1e1)](),_0xd50bd9[_0x3d7247(0x134)](),_0xd50bd9[_0x3d7247(0x18b)]());}),VisuMZ[_0x117a34(0xd8)]['Scene_Boot_onDatabaseLoaded']=Scene_Boot['prototype'][_0x117a34(0xcc)],Scene_Boot['prototype']['onDatabaseLoaded']=function(){const _0x2e14f4=_0x117a34;VisuMZ[_0x2e14f4(0xd8)]['Scene_Boot_onDatabaseLoaded']['call'](this),this['process_VisuMZ_MessageCore_TextCodes_Action'](),this[_0x2e14f4(0x2e8)](),this[_0x2e14f4(0x19e)](),this['process_VisuMZ_MessageCore_AutoColor']();},VisuMZ[_0x117a34(0xd8)]['SortObjectByKeyLength']=function(_0x2d8f69){const _0x2c9c4c=_0x117a34,_0xe594e0=VisuMZ['MessageCore'][_0x2c9c4c(0x1a0)][_0x2d8f69];_0xe594e0[_0x2c9c4c(0x231)]((_0x3dc498,_0x2738ba)=>{const _0x5b6ec1=_0x2c9c4c;if(!_0x3dc498||!_0x2738ba)return-0x1;return _0x2738ba['Match'][_0x5b6ec1(0x2a3)]-_0x3dc498['Match'][_0x5b6ec1(0x2a3)];});},Scene_Boot['prototype'][_0x117a34(0x1b2)]=function(){const _0x375e2c=_0x117a34;VisuMZ[_0x375e2c(0xd8)][_0x375e2c(0x297)]('TextCodeActions');for(const _0x49fe75 of VisuMZ['MessageCore']['Settings'][_0x375e2c(0x23e)]){_0x49fe75[_0x375e2c(0x1f2)]=_0x49fe75['Match'][_0x375e2c(0x319)](),_0x49fe75[_0x375e2c(0x2bb)]=new RegExp('\x1b'+_0x49fe75[_0x375e2c(0x1f2)],'gi'),_0x49fe75['textCodeResult']='\x1b'+_0x49fe75[_0x375e2c(0x1f2)];if(_0x49fe75[_0x375e2c(0x269)]==='')_0x49fe75[_0x375e2c(0x1af)]+=_0x375e2c(0x2af);}},Scene_Boot['prototype'][_0x117a34(0x2e8)]=function(){const _0x249295=_0x117a34;VisuMZ[_0x249295(0xd8)][_0x249295(0x297)](_0x249295(0x301));for(const _0x34350d of VisuMZ[_0x249295(0xd8)][_0x249295(0x1a0)][_0x249295(0x301)]){if(_0x249295(0x1eb)===_0x249295(0x1eb))_0x34350d[_0x249295(0x2bb)]=new RegExp('\x1b'+_0x34350d['Match']+_0x34350d[_0x249295(0x269)],'gi'),_0x34350d[_0x249295(0xec)]!==''&&_0x34350d[_0x249295(0xec)]!==_0x249295(0x1d5)?_0x34350d[_0x249295(0x1af)]=new Function('return\x20\x27'+_0x34350d[_0x249295(0xec)][_0x249295(0x27a)](/\\/g,'\x1b')+'\x27'):_0x34350d['textCodeResult']=_0x34350d[_0x249295(0x2c8)];else{function _0xd33649(){const _0x81a1ba=_0x249295;this[_0x81a1ba(0x182)](),this[_0x81a1ba(0x1e1)](),this['registerResetRect'](_0x14fffb);}}}},Scene_Boot[_0x117a34(0x238)][_0x117a34(0x19e)]=function(){const _0x509aa7=_0x117a34;for(const _0x258f7a of VisuMZ[_0x509aa7(0xd8)][_0x509aa7(0x1a0)][_0x509aa7(0x1de)]){_0x258f7a[_0x509aa7(0x2bb)]=new RegExp('\x5c['+_0x258f7a[_0x509aa7(0x1f2)]+'\x5c]','gi'),_0x258f7a['TextStr']!==''&&_0x258f7a[_0x509aa7(0xec)]!=='Undefined'?_0x258f7a[_0x509aa7(0x1af)]=new Function(_0x509aa7(0x2b5)+_0x258f7a[_0x509aa7(0xec)][_0x509aa7(0x27a)](/\\/g,'\x1b')+'\x27'):_0x258f7a[_0x509aa7(0x1af)]=_0x258f7a[_0x509aa7(0x2c8)];}},Scene_Boot[_0x117a34(0x238)][_0x117a34(0x109)]=function(){const _0x381c82=_0x117a34,_0x59f6d1=VisuMZ['MessageCore'][_0x381c82(0x1a0)][_0x381c82(0x17f)];!VisuMZ[_0x381c82(0x26f)]&&(VisuMZ['MessageCore'][_0x381c82(0x24e)]($dataClasses,_0x59f6d1[_0x381c82(0x1ec)]),VisuMZ[_0x381c82(0xd8)][_0x381c82(0x24e)]($dataSkills,_0x59f6d1[_0x381c82(0x206)]),VisuMZ[_0x381c82(0xd8)][_0x381c82(0x24e)]($dataItems,_0x59f6d1[_0x381c82(0xa8)]),VisuMZ[_0x381c82(0xd8)][_0x381c82(0x24e)]($dataWeapons,_0x59f6d1[_0x381c82(0x282)]),VisuMZ[_0x381c82(0xd8)]['AddAutoColor']($dataArmors,_0x59f6d1[_0x381c82(0x284)]),VisuMZ['MessageCore'][_0x381c82(0x24e)]($dataEnemies,_0x59f6d1[_0x381c82(0x25e)]),VisuMZ['MessageCore'][_0x381c82(0x24e)]($dataStates,_0x59f6d1[_0x381c82(0x20e)])),VisuMZ['MessageCore'][_0x381c82(0x135)]();},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x199)]=['V','N','P','C','I','PX','PY','G','{','}','<','>','FS','\x5c','$','.','|','!','<','>','^',_0x117a34(0x224),_0x117a34(0xc8),_0x117a34(0xea),_0x117a34(0x1f3),_0x117a34(0x27e),_0x117a34(0x14d),_0x117a34(0x1f4),_0x117a34(0x304),_0x117a34(0x2b4),'</RIGHT>','<COLORLOCK>',_0x117a34(0x194),_0x117a34(0x2ee),_0x117a34(0x285),_0x117a34(0x1a1),_0x117a34(0x253),_0x117a34(0x174),_0x117a34(0xb2),'PICTURE',_0x117a34(0x1f5),_0x117a34(0x195),_0x117a34(0x172),_0x117a34(0xd7),_0x117a34(0x1ed),_0x117a34(0x19b),'DISABLE',_0x117a34(0x2f4),_0x117a34(0x25c),'ALL','ANY'],VisuMZ[_0x117a34(0xd8)][_0x117a34(0x24e)]=function(_0x2a85c5,_0x4e824c){const _0x2a24d1=_0x117a34;if(_0x4e824c<=0x0)return;const _0x5da957=_0x2a85c5;for(const _0x4484e7 of _0x5da957){if('EWINz'===_0x2a24d1(0x10c)){if(!_0x4484e7)continue;VisuMZ[_0x2a24d1(0xd8)][_0x2a24d1(0x1c6)](_0x4484e7,_0x4e824c);}else{function _0x36ae7a(){const _0x15d22c=_0x2a24d1;if(!this[_0x15d22c(0x189)])return;const _0x24d1e5=_0x173485[_0x15d22c(0x1ae)];if(!_0x24d1e5)return;if(!_0x24d1e5[_0x15d22c(0x31b)])return;const _0x31568e=_0x24d1e5[_0x15d22c(0x31b)][_0x15d22c(0x137)](this[_0x15d22c(0x189)]);if(!_0x31568e)return;let _0x11d7ae=_0x31568e['x'];_0x11d7ae-=this[_0x15d22c(0x2b8)]/0x2,_0x11d7ae-=(_0x2ed226[_0x15d22c(0x2b8)]-_0x160534[_0x15d22c(0x16a)])/0x2;let _0x25ec56=_0x31568e['y'];_0x25ec56-=this[_0x15d22c(0x2fd)],_0x25ec56-=(_0xfab564[_0x15d22c(0x2fd)]-_0x3ea741['boxHeight'])/0x2,_0x25ec56-=_0x31568e[_0x15d22c(0x2fd)]+0x8,this['x']=_0x470983[_0x15d22c(0x302)](_0x11d7ae),this['y']=_0x1a5f0b[_0x15d22c(0x302)](_0x25ec56),this[_0x15d22c(0x216)](!![],![]),this['_nameBoxWindow']['updatePlacement']();}}}},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x135)]=function(){const _0x377861=_0x117a34;VisuMZ[_0x377861(0xd8)]['AutoColorRegExp']=[];for(let _0x2992f9=0x1;_0x2992f9<=0x1f;_0x2992f9++){if('uImSU'===_0x377861(0x1b1)){function _0x200b59(){const _0x28027c=_0x377861;this[_0x28027c(0x24d)]=this[_0x28027c(0x24d)]||[];for(const _0x113c90 of this[_0x28027c(0x24d)]){!_0x113c90['_interpreter']?this['_messageCommonEvents'][_0x28027c(0x23a)](_0x113c90):_0x113c90[_0x28027c(0x1e5)]();}}}else{const _0x1563f9=_0x377861(0x25a)[_0x377861(0x246)](_0x2992f9),_0xd4ff8c=VisuMZ['MessageCore'][_0x377861(0x1a0)]['AutoColor'][_0x1563f9];_0xd4ff8c[_0x377861(0x231)]((_0x34662f,_0x8a171c)=>{const _0x46dd4c=_0x377861;if(!_0x34662f||!_0x8a171c)return-0x1;return _0x8a171c[_0x46dd4c(0x2a3)]-_0x34662f[_0x46dd4c(0x2a3)];}),this[_0x377861(0x18f)](_0xd4ff8c,_0x2992f9);}}},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x18f)]=function(_0x37cd1a,_0x56c691){const _0x57867d=_0x117a34;for(const _0x1b60ce of _0x37cd1a){if(_0x57867d(0x240)!=='wzYXb'){function _0x4641a6(){const _0x192e0e=_0x57867d;return _0x3b0bc3[_0x192e0e(0x2e3)][_0x192e0e(0x2a3)]>=_0x146c9c[_0x192e0e(0x217)]()&&this['nextEventCode']()!==0x191;}}else{if(_0x1b60ce[_0x57867d(0x2a3)]<=0x0)continue;if(/^\d+$/[_0x57867d(0x312)](_0x1b60ce))continue;let _0x1bf721=VisuMZ[_0x57867d(0xd8)][_0x57867d(0x30f)](_0x1b60ce);if(_0x1b60ce[_0x57867d(0x184)](/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/g))var _0x460d47=new RegExp(_0x1bf721,'i');else var _0x460d47=new RegExp('\x5cb'+_0x1bf721+'\x5cb','g');VisuMZ[_0x57867d(0xd8)]['AutoColorRegExp'][_0x57867d(0x154)]([_0x460d47,_0x57867d(0x1d9)['format'](_0x56c691,_0x1b60ce)]);}}},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x30f)]=function(_0x57d77f){const _0x3f4f83=_0x117a34;return _0x57d77f=_0x57d77f['replace'](/(\W)/gi,(_0x429056,_0x4e5263)=>_0x3f4f83(0x21b)['format'](_0x4e5263)),_0x57d77f;},VisuMZ['MessageCore'][_0x117a34(0x28f)]=VisuMZ[_0x117a34(0x28f)],VisuMZ[_0x117a34(0x28f)]=function(_0x228a5b){const _0x136130=_0x117a34;VisuMZ['MessageCore'][_0x136130(0x28f)][_0x136130(0x1cc)](this,_0x228a5b);const _0x53153b=VisuMZ[_0x136130(0xd8)][_0x136130(0x1a0)]['AutoColor'];VisuMZ['MessageCore'][_0x136130(0x1c6)](_0x228a5b,_0x53153b[_0x136130(0x1ec)]);},VisuMZ['MessageCore'][_0x117a34(0x201)]=VisuMZ[_0x117a34(0x201)],VisuMZ[_0x117a34(0x201)]=function(_0x5f55ea){const _0x3558e5=_0x117a34;VisuMZ[_0x3558e5(0xd8)][_0x3558e5(0x201)][_0x3558e5(0x1cc)](this,_0x5f55ea);const _0x59f96f=VisuMZ[_0x3558e5(0xd8)][_0x3558e5(0x1a0)][_0x3558e5(0x17f)];VisuMZ[_0x3558e5(0xd8)][_0x3558e5(0x1c6)](_0x5f55ea,_0x59f96f[_0x3558e5(0x206)]);},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x2df)]=VisuMZ[_0x117a34(0x2df)],VisuMZ[_0x117a34(0x2df)]=function(_0xd5949f){const _0x23b2f2=_0x117a34;VisuMZ[_0x23b2f2(0xd8)][_0x23b2f2(0x2df)][_0x23b2f2(0x1cc)](this,_0xd5949f);const _0x319844=VisuMZ[_0x23b2f2(0xd8)][_0x23b2f2(0x1a0)]['AutoColor'];VisuMZ[_0x23b2f2(0xd8)][_0x23b2f2(0x1c6)](_0xd5949f,_0x319844[_0x23b2f2(0xa8)]);},VisuMZ[_0x117a34(0xd8)]['ParseWeaponNotetags']=VisuMZ['ParseWeaponNotetags'],VisuMZ[_0x117a34(0x2fb)]=function(_0x3041fe){const _0xebbbf5=_0x117a34;VisuMZ[_0xebbbf5(0xd8)][_0xebbbf5(0x2fb)][_0xebbbf5(0x1cc)](this,_0x3041fe);const _0x2bf294=VisuMZ[_0xebbbf5(0xd8)][_0xebbbf5(0x1a0)][_0xebbbf5(0x17f)];VisuMZ[_0xebbbf5(0xd8)][_0xebbbf5(0x1c6)](_0x3041fe,_0x2bf294[_0xebbbf5(0x282)]);},VisuMZ[_0x117a34(0xd8)][_0x117a34(0xaa)]=VisuMZ['ParseArmorNotetags'],VisuMZ[_0x117a34(0xaa)]=function(_0x1ef6fb){const _0x319e20=_0x117a34;VisuMZ[_0x319e20(0xd8)][_0x319e20(0xaa)]['call'](this,_0x1ef6fb);const _0x5c3c61=VisuMZ[_0x319e20(0xd8)][_0x319e20(0x1a0)][_0x319e20(0x17f)];VisuMZ['MessageCore'][_0x319e20(0x1c6)](_0x1ef6fb,_0x5c3c61[_0x319e20(0x284)]);},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x2f9)]=VisuMZ[_0x117a34(0x2f9)],VisuMZ[_0x117a34(0x2f9)]=function(_0x20010b){const _0xd0872c=_0x117a34;VisuMZ[_0xd0872c(0xd8)][_0xd0872c(0x2f9)]['call'](this,_0x20010b);const _0x245131=VisuMZ['MessageCore'][_0xd0872c(0x1a0)][_0xd0872c(0x17f)];VisuMZ[_0xd0872c(0xd8)]['CreateAutoColorFor'](_0x20010b,_0x245131['Enemies']);},VisuMZ[_0x117a34(0xd8)][_0x117a34(0xbf)]=VisuMZ[_0x117a34(0xbf)],VisuMZ[_0x117a34(0xbf)]=function(_0xb3fdd2){const _0x1b0103=_0x117a34;VisuMZ[_0x1b0103(0xd8)][_0x1b0103(0xbf)][_0x1b0103(0x1cc)](this,_0xb3fdd2);const _0x4a211e=VisuMZ['MessageCore'][_0x1b0103(0x1a0)][_0x1b0103(0x17f)];VisuMZ[_0x1b0103(0xd8)][_0x1b0103(0x1c6)](_0xb3fdd2,_0x4a211e[_0x1b0103(0x20e)]);},VisuMZ['MessageCore'][_0x117a34(0x1c6)]=function(_0x3e0c8f,_0x5785a2){const _0x5efe5e=_0x117a34;if(_0x5785a2<=0x0)return;const _0x1411dd=VisuMZ['MessageCore'][_0x5efe5e(0x1a0)][_0x5efe5e(0x17f)][_0x5efe5e(0x2a0)+_0x5785a2];let _0x43ee91=_0x3e0c8f[_0x5efe5e(0xf9)][_0x5efe5e(0x1d4)]();if(/^\d+$/[_0x5efe5e(0x312)](_0x43ee91))return;if(VisuMZ['MessageCore'][_0x5efe5e(0x199)][_0x5efe5e(0x127)](_0x43ee91[_0x5efe5e(0x319)]()))return;_0x43ee91=_0x43ee91[_0x5efe5e(0x27a)](/\\I\[(\d+)\]/gi,''),_0x43ee91=_0x43ee91[_0x5efe5e(0x27a)](/\x1bI\[(\d+)\]/gi,'');if(_0x43ee91[_0x5efe5e(0x2a3)]<=0x0)return;if(_0x43ee91[_0x5efe5e(0x184)](/-----/i))return;_0x1411dd[_0x5efe5e(0x154)](_0x43ee91);},SceneManager[_0x117a34(0x146)]=function(){const _0x452c4e=_0x117a34;return this[_0x452c4e(0x1ae)]&&this[_0x452c4e(0x1ae)][_0x452c4e(0x29e)]===Scene_Battle;},SceneManager['isSceneMap']=function(){const _0x462df6=_0x117a34;return this[_0x462df6(0x1ae)]&&this[_0x462df6(0x1ae)][_0x462df6(0x29e)]===Scene_Map;},VisuMZ[_0x117a34(0xd8)]['TextManager_message']=TextManager[_0x117a34(0x227)],TextManager[_0x117a34(0x227)]=function(_0x2059d3){const _0x368774=_0x117a34,_0xfcb1e9=['levelUp',_0x368774(0x2fa),_0x368774(0x1df),_0x368774(0x265),_0x368774(0x28a),_0x368774(0x27f),'escapeStart',_0x368774(0x27b),_0x368774(0x115),_0x368774(0xab)];let _0x241554=VisuMZ[_0x368774(0xd8)]['TextManager_message'][_0x368774(0x1cc)](this,_0x2059d3);if(_0xfcb1e9[_0x368774(0x127)](_0x2059d3)){if(_0x368774(0x259)===_0x368774(0x259))_0x241554=_0x368774(0x253)+_0x241554;else{function _0x37b142(){const _0x2380b3=_0x368774;_0x137d4e['y']=this[_0x2380b3(0x2d5)](_0x4d1bf8),_0x2d08fb[_0x2380b3(0xd8)][_0x2380b3(0x1a0)][_0x2380b3(0x2a6)][_0x2380b3(0x1dc)]&&(_0x49d066['y']+=_0x584d76[_0x2380b3(0x188)]);}}}return _0x241554;},ConfigManager[_0x117a34(0xeb)]=VisuMZ[_0x117a34(0xd8)][_0x117a34(0x1a0)][_0x117a34(0x15c)]['Default'],VisuMZ[_0x117a34(0xd8)][_0x117a34(0x31a)]=ConfigManager[_0x117a34(0x23b)],ConfigManager[_0x117a34(0x23b)]=function(){const _0xfb2033=VisuMZ['MessageCore']['ConfigManager_makeData']['call'](this);return _0xfb2033['textSpeed']=this['textSpeed'],_0xfb2033;},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x241)]=ConfigManager[_0x117a34(0xb6)],ConfigManager['applyData']=function(_0x406ae3){const _0x19ecb3=_0x117a34;VisuMZ[_0x19ecb3(0xd8)][_0x19ecb3(0x241)][_0x19ecb3(0x1cc)](this,_0x406ae3),'textSpeed'in _0x406ae3?this[_0x19ecb3(0xeb)]=Number(_0x406ae3[_0x19ecb3(0xeb)])['clamp'](0x1,0xb):this[_0x19ecb3(0xeb)]=VisuMZ[_0x19ecb3(0xd8)]['Settings']['TextSpeed'][_0x19ecb3(0x274)];},TextManager['messageCoreTextSpeed']=VisuMZ[_0x117a34(0xd8)][_0x117a34(0x1a0)][_0x117a34(0x15c)][_0x117a34(0xc1)],TextManager['instantTextSpeed']=VisuMZ[_0x117a34(0xd8)]['Settings']['TextSpeed']['Instant'],VisuMZ['MessageCore']['Game_System_initialize']=Game_System[_0x117a34(0x238)][_0x117a34(0x25d)],Game_System['prototype'][_0x117a34(0x25d)]=function(){const _0x2b8904=_0x117a34;VisuMZ[_0x2b8904(0xd8)][_0x2b8904(0x161)][_0x2b8904(0x1cc)](this),this['initMessageCore']();},Game_System[_0x117a34(0x238)][_0x117a34(0x317)]=function(){const _0x436007=_0x117a34,_0x5297d3=VisuMZ[_0x436007(0xd8)][_0x436007(0x1a0)]['General'],_0x241ef3=VisuMZ['MessageCore'][_0x436007(0x1a0)]['WordWrap'];this['_MessageCoreSettings']={'messageRows':_0x5297d3['MessageRows'],'messageWidth':_0x5297d3[_0x436007(0x1a3)],'messageWordWrap':_0x241ef3[_0x436007(0xba)],'helpWordWrap':_0x241ef3['HelpWindow'],'choiceLineHeight':_0x5297d3[_0x436007(0x113)],'choiceRows':_0x5297d3[_0x436007(0x28c)],'choiceCols':_0x5297d3[_0x436007(0x1e7)],'choiceTextAlign':_0x5297d3[_0x436007(0x159)]};},Game_System[_0x117a34(0x238)][_0x117a34(0x217)]=function(){const _0x3cda8e=_0x117a34;if(this[_0x3cda8e(0x211)]===undefined)this[_0x3cda8e(0x317)]();if(this[_0x3cda8e(0x211)][_0x3cda8e(0x181)]===undefined)this[_0x3cda8e(0x317)]();return this[_0x3cda8e(0x211)][_0x3cda8e(0x181)];},Game_System[_0x117a34(0x238)]['setMessageWindowRows']=function(_0x172672){const _0x1a3ff0=_0x117a34;if(this[_0x1a3ff0(0x211)]===undefined)this[_0x1a3ff0(0x317)]();if(this[_0x1a3ff0(0x211)]['messageRows']===undefined)this['initMessageCore']();this[_0x1a3ff0(0x211)][_0x1a3ff0(0x181)]=_0x172672||0x1;},Game_System[_0x117a34(0x238)][_0x117a34(0xe0)]=function(){const _0x3a4d17=_0x117a34;if(this[_0x3a4d17(0x211)]===undefined)this['initMessageCore']();if(this[_0x3a4d17(0x211)][_0x3a4d17(0x106)]===undefined)this[_0x3a4d17(0x317)]();return this[_0x3a4d17(0x211)][_0x3a4d17(0x106)];},Game_System[_0x117a34(0x238)]['setMessageWindowWidth']=function(_0x540137){const _0xa85a70=_0x117a34;if(this[_0xa85a70(0x211)]===undefined)this['initMessageCore']();if(this[_0xa85a70(0x211)][_0xa85a70(0x106)]===undefined)this[_0xa85a70(0x317)]();_0x540137=Math[_0xa85a70(0x2f0)](_0x540137);if(_0x540137%0x2!==0x0)_0x540137+=0x1;this[_0xa85a70(0x211)][_0xa85a70(0x106)]=_0x540137||0x2;},Game_System['prototype'][_0x117a34(0xd1)]=function(){const _0x4b1c73=_0x117a34;if(this[_0x4b1c73(0x211)]===undefined)this['initMessageCore']();if(this[_0x4b1c73(0x211)]['messageWordWrap']===undefined)this[_0x4b1c73(0x317)]();return this[_0x4b1c73(0x211)][_0x4b1c73(0x219)];},Game_System[_0x117a34(0x238)][_0x117a34(0xe2)]=function(_0x2216b9){const _0x3664a3=_0x117a34;if(this['_MessageCoreSettings']===undefined)this[_0x3664a3(0x317)]();if(this[_0x3664a3(0x211)][_0x3664a3(0x219)]===undefined)this[_0x3664a3(0x317)]();this[_0x3664a3(0x211)][_0x3664a3(0x219)]=_0x2216b9;},Game_System[_0x117a34(0x238)]['isHelpWindowWordWrap']=function(){const _0x14b8fa=_0x117a34;if(this[_0x14b8fa(0x211)]===undefined)this[_0x14b8fa(0x317)]();if(this[_0x14b8fa(0x211)][_0x14b8fa(0xc3)]===undefined)this[_0x14b8fa(0x317)]();return this[_0x14b8fa(0x211)][_0x14b8fa(0xc3)];},Game_System[_0x117a34(0x238)][_0x117a34(0x291)]=function(_0x2a51ae){const _0xcc90fb=_0x117a34;if(this[_0xcc90fb(0x211)]===undefined)this[_0xcc90fb(0x317)]();if(this[_0xcc90fb(0x211)][_0xcc90fb(0xc3)]===undefined)this[_0xcc90fb(0x317)]();this[_0xcc90fb(0x211)]['helpWordWrap']=_0x2a51ae;},Game_System['prototype'][_0x117a34(0xfa)]=function(){const _0x17aec5=_0x117a34;if(this[_0x17aec5(0x211)]===undefined)this[_0x17aec5(0x317)]();if(this[_0x17aec5(0x211)][_0x17aec5(0x2da)]===undefined)this[_0x17aec5(0x317)]();return this[_0x17aec5(0x211)][_0x17aec5(0x2da)];},Game_System['prototype']['setChoiceListLineHeight']=function(_0x724712){const _0x45887c=_0x117a34;if(this[_0x45887c(0x211)]===undefined)this[_0x45887c(0x317)]();if(this[_0x45887c(0x211)][_0x45887c(0x2da)]===undefined)this[_0x45887c(0x317)]();this['_MessageCoreSettings'][_0x45887c(0x2da)]=_0x724712||0x1;},Game_System[_0x117a34(0x238)][_0x117a34(0x129)]=function(){const _0xd2bb42=_0x117a34;if(this['_MessageCoreSettings']===undefined)this[_0xd2bb42(0x317)]();if(this[_0xd2bb42(0x211)][_0xd2bb42(0x1ac)]===undefined)this[_0xd2bb42(0x317)]();return this[_0xd2bb42(0x211)][_0xd2bb42(0x1ac)];},Game_System[_0x117a34(0x238)][_0x117a34(0x303)]=function(_0x5d997c){const _0x22dad1=_0x117a34;if(this[_0x22dad1(0x211)]===undefined)this['initMessageCore']();if(this[_0x22dad1(0x211)]['choiceRows']===undefined)this['initMessageCore']();this['_MessageCoreSettings'][_0x22dad1(0x1ac)]=_0x5d997c||0x1;},Game_System[_0x117a34(0x238)]['getChoiceListMaxColumns']=function(){const _0x1da3f3=_0x117a34;if(this['_MessageCoreSettings']===undefined)this[_0x1da3f3(0x317)]();if(this['_MessageCoreSettings'][_0x1da3f3(0xfe)]===undefined)this[_0x1da3f3(0x317)]();return this[_0x1da3f3(0x211)]['choiceCols'];},Game_System[_0x117a34(0x238)][_0x117a34(0x111)]=function(_0x344739){const _0x5679dc=_0x117a34;if(this['_MessageCoreSettings']===undefined)this[_0x5679dc(0x317)]();if(this[_0x5679dc(0x211)]['choiceCols']===undefined)this[_0x5679dc(0x317)]();this[_0x5679dc(0x211)][_0x5679dc(0xfe)]=_0x344739||0x1;},Game_System[_0x117a34(0x238)][_0x117a34(0x2be)]=function(){const _0x5e785a=_0x117a34;if(this[_0x5e785a(0x211)]===undefined)this['initMessageCore']();if(this[_0x5e785a(0x211)][_0x5e785a(0x16e)]===undefined)this[_0x5e785a(0x317)]();return this[_0x5e785a(0x211)]['choiceTextAlign'];},Game_System['prototype']['setChoiceListTextAlign']=function(_0x54fb70){const _0x2f2603=_0x117a34;if(this[_0x2f2603(0x211)]===undefined)this[_0x2f2603(0x317)]();if(this['_MessageCoreSettings'][_0x2f2603(0x16e)]===undefined)this['initMessageCore']();this[_0x2f2603(0x211)]['choiceTextAlign']=_0x54fb70[_0x2f2603(0x305)]();},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x157)]=Game_Party[_0x117a34(0x238)][_0x117a34(0x25d)],Game_Party[_0x117a34(0x238)][_0x117a34(0x25d)]=function(){const _0x2fe669=_0x117a34;VisuMZ['MessageCore'][_0x2fe669(0x157)]['call'](this),this[_0x2fe669(0x317)]();},Game_Party['prototype'][_0x117a34(0x317)]=function(){this['_lastGainedItemData']={'type':0x0,'id':0x0,'quantity':0x0};},Game_Party[_0x117a34(0x238)][_0x117a34(0x1f1)]=function(){const _0xee3c85=_0x117a34;if(this[_0xee3c85(0x2ba)]===undefined)this[_0xee3c85(0x317)]();return this['_lastGainedItemData'];},Game_Party[_0x117a34(0x238)][_0x117a34(0x1ff)]=function(_0x4fcf92,_0xd9e746){const _0x29f719=_0x117a34;if(this[_0x29f719(0x2ba)]===undefined)this[_0x29f719(0x317)]();if(!_0x4fcf92)return;if(DataManager[_0x29f719(0x316)](_0x4fcf92))this['_lastGainedItemData']['type']=0x0;else{if(DataManager[_0x29f719(0x21c)](_0x4fcf92))this['_lastGainedItemData'][_0x29f719(0x178)]=0x1;else{if(DataManager[_0x29f719(0x1b5)](_0x4fcf92)){if(_0x29f719(0x280)!==_0x29f719(0x280)){function _0x2ac7df(){const _0x4b7789=_0x29f719,_0x1620be=_0x314361[_0x4b7789(0xa6)]()===''?0x0:_0xc9b7a1['faceWidth']+0x14;_0x92ea96-=_0x1620be,_0x39ecd4[_0x4b7789(0xd8)][_0x4b7789(0x1a0)][_0x4b7789(0x153)][_0x4b7789(0x29c)]&&(_0x9d378b-=_0x1620be);}}else this[_0x29f719(0x2ba)][_0x29f719(0x178)]=0x2;}}}this[_0x29f719(0x2ba)]['id']=_0x4fcf92['id'],this[_0x29f719(0x2ba)][_0x29f719(0x234)]=_0xd9e746;},VisuMZ[_0x117a34(0xd8)]['Game_Party_gainItem']=Game_Party[_0x117a34(0x238)][_0x117a34(0x143)],Game_Party[_0x117a34(0x238)][_0x117a34(0x143)]=function(_0x28c7a9,_0x371e77,_0x446aa8){const _0x21acaf=_0x117a34;VisuMZ[_0x21acaf(0xd8)]['Game_Party_gainItem'][_0x21acaf(0x1cc)](this,_0x28c7a9,_0x371e77,_0x446aa8),_0x371e77>0x0&&this[_0x21acaf(0x1ff)](_0x28c7a9,_0x371e77);},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x2ef)]=Game_Map['prototype']['initialize'],Game_Map[_0x117a34(0x238)][_0x117a34(0x25d)]=function(){const _0x41998d=_0x117a34;VisuMZ['MessageCore']['Game_Map_initialize']['call'](this),this[_0x41998d(0x24d)]=[];},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x2ac)]=Game_Map[_0x117a34(0x238)]['setupEvents'],Game_Map[_0x117a34(0x238)][_0x117a34(0x151)]=function(){const _0x4cdc20=_0x117a34;VisuMZ[_0x4cdc20(0xd8)][_0x4cdc20(0x2ac)][_0x4cdc20(0x1cc)](this),this[_0x4cdc20(0x24d)]=[];},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x15a)]=Game_Map[_0x117a34(0x238)][_0x117a34(0x320)],Game_Map[_0x117a34(0x238)]['updateEvents']=function(){const _0x1486b9=_0x117a34;VisuMZ[_0x1486b9(0xd8)][_0x1486b9(0x15a)][_0x1486b9(0x1cc)](this),this[_0x1486b9(0x1cd)]();},Game_Map[_0x117a34(0x238)][_0x117a34(0x1fa)]=function(_0x10cac9){const _0xfcf4b3=_0x117a34;this[_0xfcf4b3(0x24d)]=this[_0xfcf4b3(0x24d)]||[];const _0x40971c=this[_0xfcf4b3(0x1b6)][_0xfcf4b3(0x1d2)],_0x228442=new Game_MessageCommonEvent(_0x10cac9,_0x40971c);this[_0xfcf4b3(0x24d)]['push'](_0x228442);},Game_Map[_0x117a34(0x238)][_0x117a34(0x1cd)]=function(){const _0x20022d=_0x117a34;this['_messageCommonEvents']=this[_0x20022d(0x24d)]||[];for(const _0x3027db of this[_0x20022d(0x24d)]){if(!_0x3027db[_0x20022d(0x1b6)]){if('gTKKl'!==_0x20022d(0x1a4)){function _0x15eab6(){const _0x348208=_0x20022d;return _0x3f6ae9=_0x3672ac[_0x348208(0x27a)](/\\/g,'\x1b'),_0xca9342=_0x415673[_0x348208(0x27a)](/\x1b\x1b/g,'\x5c'),_0x111b20;}}else this[_0x20022d(0x24d)]['remove'](_0x3027db);}else{if(_0x20022d(0x214)===_0x20022d(0x214))_0x3027db['update']();else{function _0x5ce198(){const _0x25120d=_0x20022d;this[_0x25120d(0x11f)]===_0xfa3fe8&&this[_0x25120d(0x288)]();for(_0xa70eab of this['_autoColorActorNames']){_0x11b000=_0x5db31c[_0x25120d(0x27a)](_0x27913e[0x0],_0x58872b[0x1]);}return _0x3881a4;}}}}},Game_Interpreter[_0x117a34(0x238)][_0x117a34(0x10a)]=function(_0x45dd09){const _0x532b37=_0x117a34;if($gameMessage['isBusy']())return![];return this['prepareShowTextCommand'](_0x45dd09),this['addContinuousShowTextCommands'](_0x45dd09),this['prepareShowTextFollowups'](_0x45dd09),this[_0x532b37(0x1ba)](_0x532b37(0x227)),!![];},Game_Interpreter[_0x117a34(0x238)][_0x117a34(0x323)]=function(_0x156445){const _0x1f48b0=_0x117a34;$gameMessage[_0x1f48b0(0x322)](_0x156445[0x0],_0x156445[0x1]),$gameMessage[_0x1f48b0(0x2f8)](_0x156445[0x2]),$gameMessage[_0x1f48b0(0x2ca)](_0x156445[0x3]),$gameMessage['setSpeakerName'](_0x156445[0x4]);},Game_Interpreter[_0x117a34(0x238)][_0x117a34(0x2d2)]=function(_0x52dfd5){const _0x30b853=_0x117a34;while(this[_0x30b853(0x1c9)]()){this['_index']++;this[_0x30b853(0x10e)]()[_0x30b853(0x254)]===0x191&&$gameMessage[_0x30b853(0x1c8)](this[_0x30b853(0x10e)]()[_0x30b853(0xa9)][0x0]);if(this[_0x30b853(0x1b3)]())break;}},Game_Interpreter[_0x117a34(0x238)][_0x117a34(0x1c9)]=function(){const _0x97e203=_0x117a34;if(this[_0x97e203(0xcf)]()===0x65&&$gameSystem[_0x97e203(0x217)]()>0x4)return!![];else{if('JiMOQ'==='TRUfr'){function _0x12c6cb(){const _0x141893=_0x97e203;return this['event']()[_0x141893(0xae)];}}else return this[_0x97e203(0xcf)]()===0x191;}},Game_Interpreter[_0x117a34(0x238)]['isBreakShowTextCommands']=function(){const _0x297b15=_0x117a34;return $gameMessage['_texts'][_0x297b15(0x2a3)]>=$gameSystem[_0x297b15(0x217)]()&&this['nextEventCode']()!==0x191;},Game_Interpreter[_0x117a34(0x238)][_0x117a34(0x290)]=function(_0x5dba68){const _0x5a06f9=_0x117a34;switch(this[_0x5a06f9(0xcf)]()){case 0x66:this['_index']++,this[_0x5a06f9(0x1a8)](this['currentCommand']()[_0x5a06f9(0xa9)]);break;case 0x67:this['_index']++,this['setupNumInput'](this[_0x5a06f9(0x10e)]()['parameters']);break;case 0x68:this['_index']++,this[_0x5a06f9(0x1e3)](this[_0x5a06f9(0x10e)]()[_0x5a06f9(0xa9)]);break;}},VisuMZ[_0x117a34(0xd8)]['Game_Interpreter_setupChoices']=Game_Interpreter[_0x117a34(0x238)]['setupChoices'],Game_Interpreter['prototype'][_0x117a34(0x1a8)]=function(_0xf83a97){const _0x2e56b4=_0x117a34;_0xf83a97=this[_0x2e56b4(0x11b)](),VisuMZ['MessageCore'][_0x2e56b4(0x202)]['call'](this,_0xf83a97);},Game_Interpreter[_0x117a34(0x238)][_0x117a34(0x11b)]=function(){const _0x1b2c51=_0x117a34,_0x3a7340=this['_index'],_0x14005c=[];let _0x4d1127=0x0;this[_0x1b2c51(0x169)]++;while(this[_0x1b2c51(0x169)]<this[_0x1b2c51(0xde)][_0x1b2c51(0x2a3)]){if(this[_0x1b2c51(0x10e)]()[_0x1b2c51(0xcb)]===this[_0x1b2c51(0x2d7)]){if(this[_0x1b2c51(0x10e)]()['code']===0x194&&this[_0x1b2c51(0xcf)]()!==0x66){if(_0x1b2c51(0x212)!==_0x1b2c51(0x212)){function _0xab217c(){if(_0x5f048c['value'](_0x37bc74))return![];}}else break;}else{if(this[_0x1b2c51(0x10e)]()['code']===0x66)this[_0x1b2c51(0x262)](_0x4d1127,this['currentCommand'](),_0x3a7340),this['_index']-=0x2;else this[_0x1b2c51(0x10e)]()[_0x1b2c51(0x254)]===0x192&&(this['currentCommand']()['parameters'][0x0]=_0x4d1127,_0x4d1127++);}}this[_0x1b2c51(0x169)]++;}return this[_0x1b2c51(0x169)]=_0x3a7340,this['currentCommand']()[_0x1b2c51(0xa9)];},Game_Interpreter[_0x117a34(0x238)][_0x117a34(0x262)]=function(_0x2cfeb9,_0x47dba3,_0x20426b){const _0x324c17=_0x117a34;this[_0x324c17(0x133)](_0x2cfeb9,_0x47dba3,_0x20426b),this['adjustShowChoiceCancel'](_0x2cfeb9,_0x47dba3,_0x20426b),this[_0x324c17(0x307)](_0x47dba3,_0x20426b);},Game_Interpreter['prototype'][_0x117a34(0x133)]=function(_0x194adf,_0x3cde5d,_0x6406ad){const _0x4699d0=_0x117a34;if(_0x3cde5d[_0x4699d0(0xa9)][0x2]<0x0)return;const _0x26b438=_0x3cde5d[_0x4699d0(0xa9)][0x2]+_0x194adf;this['_list'][_0x6406ad][_0x4699d0(0xa9)][0x2]=_0x26b438;},Game_Interpreter[_0x117a34(0x238)][_0x117a34(0x177)]=function(_0x48792c,_0x221ede,_0x5ce5af){const _0x56c3ef=_0x117a34;if(_0x221ede[_0x56c3ef(0xa9)][0x1]>=0x0){if(_0x56c3ef(0x261)===_0x56c3ef(0x261)){var _0x5720cb=_0x221ede[_0x56c3ef(0xa9)][0x1]+_0x48792c;this['_list'][_0x5ce5af]['parameters'][0x1]=_0x5720cb;}else{function _0x4c4c4e(){const _0x55515a=_0x56c3ef,_0x2fb22d={'x':this['x'],'y':this['y']};_0x81de26[_0x55515a(0x238)][_0x55515a(0x197)][_0x55515a(0x1cc)](this),this['updateNameBoxMove'](_0x2fb22d);}}}else{if(_0x221ede[_0x56c3ef(0xa9)][0x1]===-0x2){if('kYiXW'==='kYiXW')this[_0x56c3ef(0xde)][_0x5ce5af][_0x56c3ef(0xa9)][0x1]=_0x221ede[_0x56c3ef(0xa9)][0x1];else{function _0x139972(){const _0xa349=_0x56c3ef;_0x1e009c[_0xa349(0x238)][_0xa349(0x210)][_0xa349(0x1cc)](this),this[_0xa349(0x22b)](this[_0xa349(0xfd)]());}}}}},Game_Interpreter[_0x117a34(0x238)][_0x117a34(0x307)]=function(_0x4e1544,_0x4e1cff){const _0x5258fa=_0x117a34;for(const _0x2057b0 of _0x4e1544[_0x5258fa(0xa9)][0x0]){this[_0x5258fa(0xde)][_0x4e1cff][_0x5258fa(0xa9)][0x0][_0x5258fa(0x154)](_0x2057b0);}this['_list'][_0x5258fa(0xd9)](this[_0x5258fa(0x169)]-0x1,0x2);};function Game_MessageCommonEvent(){const _0x3088f9=_0x117a34;this[_0x3088f9(0x25d)](...arguments);}Game_MessageCommonEvent[_0x117a34(0x238)]['initialize']=function(_0x659876,_0xcf2bd2){const _0x470601=_0x117a34;this[_0x470601(0x2ab)]=_0x659876,this[_0x470601(0x1d2)]=_0xcf2bd2||0x0,this[_0x470601(0x1c4)]();},Game_MessageCommonEvent[_0x117a34(0x238)][_0x117a34(0x263)]=function(){const _0x48a7bd=_0x117a34;return $dataCommonEvents[this[_0x48a7bd(0x2ab)]];},Game_MessageCommonEvent[_0x117a34(0x238)]['list']=function(){const _0x36bd78=_0x117a34;return this['event']()[_0x36bd78(0xae)];},Game_MessageCommonEvent['prototype']['refresh']=function(){const _0x496ea9=_0x117a34;this[_0x496ea9(0x1b6)]=new Game_Interpreter(),this[_0x496ea9(0x1b6)][_0x496ea9(0xcd)](this[_0x496ea9(0xae)](),this[_0x496ea9(0x1d2)]);},Game_MessageCommonEvent[_0x117a34(0x238)]['update']=function(){const _0x49cf9d=_0x117a34;if(this[_0x49cf9d(0x1b6)]){if(this[_0x49cf9d(0x1b6)][_0x49cf9d(0x183)]())this['_interpreter'][_0x49cf9d(0x1e5)]();else{if(_0x49cf9d(0x245)==='jJJjp')this[_0x49cf9d(0xe1)]();else{function _0x260297(){const _0x2919e2=_0x49cf9d;_0x28580f[_0x2919e2(0x1af)]=_0x110397[_0x2919e2(0x2c8)];}}}}},Game_MessageCommonEvent['prototype']['clear']=function(){const _0x3569ef=_0x117a34;this[_0x3569ef(0x1b6)]=null;},Scene_Message[_0x117a34(0x238)][_0x117a34(0x294)]=function(){const _0x217807=_0x117a34,_0x4c0833=Math['min'](Graphics[_0x217807(0x2b8)],$gameSystem['getMessageWindowWidth']()),_0x29b63b=$gameSystem[_0x217807(0x217)](),_0x19a03b=this[_0x217807(0x1ee)](_0x29b63b,![]),_0xf8e730=(Graphics[_0x217807(0x16a)]-_0x4c0833)/0x2,_0x3c8654=0x0;return new Rectangle(_0xf8e730,_0x3c8654,_0x4c0833,_0x19a03b);},VisuMZ[_0x117a34(0xd8)][_0x117a34(0xa7)]=Scene_Options[_0x117a34(0x238)][_0x117a34(0x114)],Scene_Options[_0x117a34(0x238)][_0x117a34(0x114)]=function(){const _0x324903=_0x117a34;let _0x2bf576=VisuMZ['MessageCore'][_0x324903(0xa7)][_0x324903(0x1cc)](this);const _0xd9b6f8=VisuMZ[_0x324903(0xd8)][_0x324903(0x1a0)];if(_0xd9b6f8[_0x324903(0x15c)][_0x324903(0x152)]&&_0xd9b6f8[_0x324903(0x15c)][_0x324903(0x2a1)])_0x2bf576++;return _0x2bf576;},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x1f7)]=Window_Base['prototype'][_0x117a34(0x25d)],Window_Base[_0x117a34(0x238)][_0x117a34(0x25d)]=function(_0x54da02){const _0x45e975=_0x117a34;this[_0x45e975(0x317)](_0x54da02),VisuMZ[_0x45e975(0xd8)][_0x45e975(0x1f7)][_0x45e975(0x1cc)](this,_0x54da02);},Window_Base[_0x117a34(0x238)][_0x117a34(0x317)]=function(_0x1dc354){const _0x3e5565=_0x117a34;this[_0x3e5565(0x182)](),this[_0x3e5565(0x1e1)](),this[_0x3e5565(0x1dd)](_0x1dc354);},Window_Base[_0x117a34(0x238)][_0x117a34(0x182)]=function(){const _0x3d0cec=_0x117a34;this[_0x3d0cec(0x10b)]('default');},Window_Base[_0x117a34(0x238)][_0x117a34(0x10b)]=function(_0x4465af){const _0x1fbf9f=_0x117a34;this[_0x1fbf9f(0xb5)]=_0x4465af;},Window_Base[_0x117a34(0x238)][_0x117a34(0x2b2)]=function(){const _0x3ef029=_0x117a34;return this[_0x3ef029(0xb5)];},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x20b)]=Window_Base[_0x117a34(0x238)]['textSizeEx'],Window_Base[_0x117a34(0x238)][_0x117a34(0x298)]=function(_0x544e93){const _0x26f44a=_0x117a34;return this['resetWordWrap'](),VisuMZ[_0x26f44a(0xd8)][_0x26f44a(0x20b)][_0x26f44a(0x1cc)](this,_0x544e93);},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x26c)]=Window_Base[_0x117a34(0x238)]['processAllText'],Window_Base['prototype']['processAllText']=function(_0x2edb0f){const _0x27e7b6=_0x117a34;VisuMZ[_0x27e7b6(0xd8)][_0x27e7b6(0x26c)]['call'](this,_0x2edb0f);if(_0x2edb0f[_0x27e7b6(0x1a7)])this[_0x27e7b6(0x10b)]('default');},Window_Base[_0x117a34(0x238)]['resetWordWrap']=function(){const _0x4d022d=_0x117a34;this[_0x4d022d(0x28d)](![]);},Window_Base[_0x117a34(0x238)][_0x117a34(0x136)]=function(){const _0x3f1eb7=_0x117a34;return this[_0x3f1eb7(0x1bd)];},Window_Base[_0x117a34(0x238)][_0x117a34(0x28d)]=function(_0x5122b7){const _0x3be848=_0x117a34;return this[_0x3be848(0x1bd)]=_0x5122b7,'';},Window_Base['prototype'][_0x117a34(0x1dd)]=function(_0x5df929){const _0x1a637f=_0x117a34;this[_0x1a637f(0x2e0)]=JsonEx[_0x1a637f(0x1e9)](_0x5df929);},Window_Base[_0x117a34(0x238)][_0x117a34(0xf6)]=function(){const _0x168fa4=_0x117a34;this[_0x168fa4(0xda)][_0x168fa4(0xbe)]=$gameSystem[_0x168fa4(0x29f)](),this[_0x168fa4(0xda)][_0x168fa4(0x226)]=$gameSystem[_0x168fa4(0x1b8)](),this[_0x168fa4(0xda)][_0x168fa4(0x2a8)]=![],this[_0x168fa4(0xda)][_0x168fa4(0xca)]=![],this[_0x168fa4(0x210)]();},Window_Base[_0x117a34(0x238)][_0x117a34(0x210)]=function(){const _0x1adc37=_0x117a34;this['changeTextColor'](ColorManager['normalColor']()),this[_0x1adc37(0xf0)](ColorManager[_0x1adc37(0xf4)]());const _0x56f424=VisuMZ[_0x1adc37(0xd8)][_0x1adc37(0x1a0)]['General'];if(_0x56f424[_0x1adc37(0x2e4)]===undefined){if('ecxTh'===_0x1adc37(0x125))_0x56f424[_0x1adc37(0x2e4)]=0x3;else{function _0x593dca(){const _0x246aef=_0x1adc37;this[_0x246aef(0xeb)]=_0x924ddd[_0x246aef(0xd8)][_0x246aef(0x1a0)][_0x246aef(0x15c)][_0x246aef(0x274)];}}}this[_0x1adc37(0xda)]['outlineWidth']=_0x56f424[_0x1adc37(0x2e4)],this[_0x1adc37(0x229)](![]);},Window_Base[_0x117a34(0x238)][_0x117a34(0x229)]=function(_0x1bc0fa){const _0x5b279d=_0x117a34;this[_0x5b279d(0x22e)]=_0x1bc0fa;},Window_Base[_0x117a34(0x238)][_0x117a34(0x11d)]=function(){const _0x3242f8=_0x117a34;return this[_0x3242f8(0x22e)];},Window_Base[_0x117a34(0x238)][_0x117a34(0xbc)]=function(){return![];},Window_Base['prototype'][_0x117a34(0x110)]=function(){const _0x28e251=_0x117a34,_0x860c9=[_0x28e251(0xbe),'fontSize',_0x28e251(0x2a8),_0x28e251(0xca),'textColor',_0x28e251(0x2c0),_0x28e251(0x326),_0x28e251(0x22a)];let _0x18c060={};for(const _0x51356f of _0x860c9){if('aVLvM'==='aVLvM')_0x18c060[_0x51356f]=this[_0x28e251(0xda)][_0x51356f];else{function _0x3b9439(){const _0x410e7b=_0x28e251,_0x114838=[_0x410e7b(0xbe),_0x410e7b(0x226),'fontBold','fontItalic',_0x410e7b(0x2f3),'outLineColor',_0x410e7b(0x326),_0x410e7b(0x22a)];let _0x517945={};for(const _0x28309d of _0x114838){_0x517945[_0x28309d]=this[_0x410e7b(0xda)][_0x28309d];}return _0x517945;}}}return _0x18c060;},Window_Base[_0x117a34(0x238)][_0x117a34(0x14e)]=function(_0x588416){const _0x4f37d1=_0x117a34;for(const _0x35c9cb in _0x588416){if(_0x4f37d1(0x192)!==_0x4f37d1(0xd5))this[_0x4f37d1(0xda)][_0x35c9cb]=_0x588416[_0x35c9cb];else{function _0x45d151(){const _0x1bec57=_0x4f37d1;_0x3c34e3[_0x1bec57(0x1af)]=new _0x1a5067(_0x1bec57(0x2b5)+_0x228a8a[_0x1bec57(0xec)]['replace'](/\\/g,'\x1b')+'\x27');}}}},VisuMZ[_0x117a34(0xd8)]['Window_Base_update']=Window_Base[_0x117a34(0x238)][_0x117a34(0x1e5)],Window_Base[_0x117a34(0x238)][_0x117a34(0x1e5)]=function(){const _0x321270=_0x117a34;VisuMZ[_0x321270(0xd8)][_0x321270(0x17a)][_0x321270(0x1cc)](this),this['updateMove']();},Window_Base[_0x117a34(0x238)][_0x117a34(0x2f6)]=function(){return![];},Window_Base[_0x117a34(0x238)][_0x117a34(0x197)]=function(){const _0x44bc71=_0x117a34;if(this['_moveDuration']>0x0){if('HvaDA'===_0x44bc71(0x124)){function _0x1c42bc(){const _0x256b83=_0x44bc71;this[_0x256b83(0x24d)]=this[_0x256b83(0x24d)]||[];const _0x78c9be=this[_0x256b83(0x1b6)][_0x256b83(0x1d2)],_0x19d57=new _0x29aa17(_0x165614,_0x78c9be);this[_0x256b83(0x24d)][_0x256b83(0x154)](_0x19d57);}}else this[_0x44bc71(0x2f6)]()&&(this['x']=this[_0x44bc71(0xf2)](this['x'],this[_0x44bc71(0x18d)]),this['y']=this['applyMoveEasing'](this['y'],this[_0x44bc71(0x315)]),this['width']=this[_0x44bc71(0xf2)](this[_0x44bc71(0x2b8)],this[_0x44bc71(0x2c2)]),this[_0x44bc71(0x2fd)]=this[_0x44bc71(0xf2)](this[_0x44bc71(0x2fd)],this[_0x44bc71(0x1fe)]),this[_0x44bc71(0x216)]()),this[_0x44bc71(0x170)]--;}},Window_Base[_0x117a34(0x238)][_0x117a34(0x216)]=function(_0x3bfd54,_0x357625){const _0x581de8=_0x117a34;!_0x3bfd54&&(this[_0x581de8(0x2b8)]=Math[_0x581de8(0x22f)](this[_0x581de8(0x2b8)],Graphics[_0x581de8(0x2b8)]),this[_0x581de8(0x2fd)]=Math[_0x581de8(0x22f)](this[_0x581de8(0x2fd)],Graphics[_0x581de8(0x2fd)]));if(!_0x357625){const _0x21bd6a=-(Math['floor'](Graphics[_0x581de8(0x2b8)]-Graphics[_0x581de8(0x16a)])/0x2),_0x335651=_0x21bd6a+Graphics[_0x581de8(0x2b8)]-this[_0x581de8(0x2b8)],_0x5c60b0=-(Math['floor'](Graphics[_0x581de8(0x2fd)]-Graphics[_0x581de8(0x118)])/0x2),_0x23757b=_0x5c60b0+Graphics['height']-this[_0x581de8(0x2fd)];this['x']=this['x'][_0x581de8(0x2d0)](_0x21bd6a,_0x335651),this['y']=this['y'][_0x581de8(0x2d0)](_0x5c60b0,_0x23757b);}},Window_Base[_0x117a34(0x238)][_0x117a34(0xf2)]=function(_0x5804b7,_0x3668e6){const _0x3f25da=_0x117a34,_0x5d7c31=this['_moveDuration'],_0x1d6cab=this[_0x3f25da(0x15b)],_0x3cf3e6=this[_0x3f25da(0x1f0)]((_0x1d6cab-_0x5d7c31)/_0x1d6cab),_0x5487af=this[_0x3f25da(0x1f0)]((_0x1d6cab-_0x5d7c31+0x1)/_0x1d6cab),_0x5f43ee=(_0x5804b7-_0x3668e6*_0x3cf3e6)/(0x1-_0x3cf3e6);return _0x5f43ee+(_0x3668e6-_0x5f43ee)*_0x5487af;},Window_Base[_0x117a34(0x238)][_0x117a34(0x1f0)]=function(_0xb6b860){const _0x4c85d9=_0x117a34,_0x57c800=0x2;switch(this[_0x4c85d9(0x2ed)]){case 0x0:return _0xb6b860;case 0x1:return this[_0x4c85d9(0x311)](_0xb6b860,_0x57c800);case 0x2:return this[_0x4c85d9(0x1d6)](_0xb6b860,_0x57c800);case 0x3:return this[_0x4c85d9(0x20f)](_0xb6b860,_0x57c800);default:if(Imported[_0x4c85d9(0x2dd)])return VisuMZ['applyMoveEasing'](_0xb6b860,this['_moveEasingType']);else{if(_0x4c85d9(0x2a7)!=='peGKB'){function _0x2ef843(){const _0xebcce9=_0x4c85d9,_0x31af49=_0xebcce9(0x239);_0x1f3c94=_0x31af49[_0xebcce9(0x246)](_0x282218['iconIndex'],_0x3a8fba[_0xebcce9(0xf9)]);}}else return _0xb6b860;}}},Window_Base[_0x117a34(0x238)][_0x117a34(0xf3)]=function(_0x1db736,_0x39c882,_0x3e8e32,_0x5cf3b5,_0x3f6644,_0x437114){const _0x437aff=_0x117a34;this[_0x437aff(0x18d)]=_0x1db736,this[_0x437aff(0x315)]=_0x39c882,this['_moveTargetWidth']=_0x3e8e32||this[_0x437aff(0x2b8)],this[_0x437aff(0x1fe)]=_0x5cf3b5||this[_0x437aff(0x2fd)],this['_moveDuration']=_0x3f6644||0x1;if(this['_moveDuration']<=0x0)this[_0x437aff(0x170)]=0x1;this[_0x437aff(0x15b)]=this[_0x437aff(0x170)],this[_0x437aff(0x2ed)]=_0x437114||0x0;if(_0x3f6644<=0x0)this[_0x437aff(0x197)]();},Window_Base[_0x117a34(0x238)][_0x117a34(0x117)]=function(_0x12aada,_0x17bc82,_0xcc9204,_0x38d7d8,_0xd5b00b,_0x4c27c1){const _0xc60979=_0x117a34;this[_0xc60979(0x18d)]=this['x']+_0x12aada,this[_0xc60979(0x315)]=this['y']+_0x17bc82,this[_0xc60979(0x2c2)]=this[_0xc60979(0x2b8)]+(_0xcc9204||0x0),this['_moveTargetHeight']=this[_0xc60979(0x2fd)]+(_0x38d7d8||0x0),this['_moveDuration']=_0xd5b00b||0x1;if(this[_0xc60979(0x170)]<=0x0)this['_moveDuration']=0x1;this[_0xc60979(0x15b)]=this[_0xc60979(0x170)],this['_moveEasingType']=_0x4c27c1||0x0;if(_0xd5b00b<=0x0)this[_0xc60979(0x197)]();},Window_Base['prototype']['resetRect']=function(_0x4e743a,_0x59ca96){const _0x4147e5=_0x117a34;this[_0x4147e5(0xf3)](this['_resetRect']['x'],this[_0x4147e5(0x2e0)]['y'],this['_resetRect'][_0x4147e5(0x2b8)],this['_resetRect'][_0x4147e5(0x2fd)],_0x4e743a,_0x59ca96);},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x2d1)]=Window_Base[_0x117a34(0x238)][_0x117a34(0x22b)],Window_Base[_0x117a34(0x238)][_0x117a34(0x22b)]=function(_0x1e6d58){const _0x44d7bf=_0x117a34;if(this['isColorLocked']())return;_0x1e6d58=_0x1e6d58['replace'](/\,/g,''),this[_0x44d7bf(0x121)]=this[_0x44d7bf(0x121)]||[],this['_textColorStack']['unshift'](this['contents']['textColor']),VisuMZ[_0x44d7bf(0xd8)][_0x44d7bf(0x2d1)][_0x44d7bf(0x1cc)](this,_0x1e6d58);},Window_Base[_0x117a34(0x238)][_0x117a34(0x1f9)]=function(_0x33df56){const _0x11f4ce=_0x117a34;this[_0x11f4ce(0x2d5)](_0x33df56);if(this[_0x11f4ce(0x11d)]())return;_0x33df56['drawing']&&(this['_textColorStack']=this[_0x11f4ce(0x121)]||[],this['contents'][_0x11f4ce(0x2f3)]=this[_0x11f4ce(0x121)][_0x11f4ce(0x2a4)]()||ColorManager[_0x11f4ce(0x9e)]());},Window_Base[_0x117a34(0x238)][_0x117a34(0xef)]=function(_0x2e51ef){const _0x79fa6e=_0x117a34;return _0x2e51ef=this[_0x79fa6e(0x1b9)](_0x2e51ef),_0x2e51ef=this[_0x79fa6e(0x237)](_0x2e51ef),_0x2e51ef=this[_0x79fa6e(0x24a)](_0x2e51ef),_0x2e51ef=this[_0x79fa6e(0x1ef)](_0x2e51ef),_0x2e51ef=this[_0x79fa6e(0x221)](_0x2e51ef),_0x2e51ef=this[_0x79fa6e(0x12a)](_0x2e51ef),_0x2e51ef=this[_0x79fa6e(0x247)](_0x2e51ef),_0x2e51ef=this['convertLockColorsEscapeCharacters'](_0x2e51ef),_0x2e51ef=this[_0x79fa6e(0x209)](_0x2e51ef),_0x2e51ef=this[_0x79fa6e(0x17d)](_0x2e51ef),_0x2e51ef=this[_0x79fa6e(0xdb)](_0x2e51ef),_0x2e51ef=this['postConvertEscapeCharacters'](_0x2e51ef),_0x2e51ef=this[_0x79fa6e(0x24a)](_0x2e51ef),_0x2e51ef=this[_0x79fa6e(0xb1)](_0x2e51ef),_0x2e51ef=this['prepareWordWrapEscapeCharacters'](_0x2e51ef),_0x2e51ef;},Window_Base['prototype'][_0x117a34(0x1b9)]=function(_0x4f2f6a){const _0x2900f2=_0x117a34;for(const _0x4bfd64 of VisuMZ[_0x2900f2(0xd8)]['Settings']['TextMacros']){if(_0x4f2f6a[_0x2900f2(0x184)](_0x4bfd64['textCodeCheck'])){if('FkItW'==='ZaQrt'){function _0x3824e9(){const _0x33b711=_0x2900f2;_0x47c3f7['x']-=_0x57e3e8[_0x33b711(0x30a)];}}else _0x4f2f6a=_0x4f2f6a[_0x2900f2(0x27a)](_0x4bfd64[_0x2900f2(0x2bb)],_0x4bfd64[_0x2900f2(0x1af)][_0x2900f2(0x28b)](this));}}return _0x4f2f6a;},Window_Base['prototype'][_0x117a34(0x237)]=function(_0x1e2d99){const _0x19ae9d=_0x117a34;return _0x1e2d99=_0x1e2d99[_0x19ae9d(0x27a)](/\\/g,'\x1b'),_0x1e2d99=_0x1e2d99[_0x19ae9d(0x27a)](/\x1b\x1b/g,'\x5c'),_0x1e2d99;},Window_Base[_0x117a34(0x238)][_0x117a34(0x24a)]=function(_0x366130){const _0x2692eb=_0x117a34;for(;;){if(_0x2692eb(0x186)==='aYzpc'){function _0x1c132b(){const _0x18e58c=_0x2692eb;this[_0x18e58c(0x2c7)](_0x561af);}}else{if(_0x366130[_0x2692eb(0x184)](/\\V\[(\d+)\]/gi)){if('WbXAE'===_0x2692eb(0x20c))_0x366130=_0x366130[_0x2692eb(0x27a)](/\\V\[(\d+)\]/gi,(_0x57e074,_0x5b51c5)=>this[_0x2692eb(0x237)](String($gameVariables['value'](parseInt(_0x5b51c5)))));else{function _0x382726(){const _0x2372dd=_0x2692eb;_0x9592cf[_0x2372dd(0xd8)][_0x2372dd(0x15a)]['call'](this),this['updateMessageCommonEvents']();}}}else{if(_0x366130[_0x2692eb(0x184)](/\x1bV\[(\d+)\]/gi))_0x366130=_0x366130['replace'](/\x1bV\[(\d+)\]/gi,(_0x540507,_0x166dab)=>this[_0x2692eb(0x237)](String($gameVariables[_0x2692eb(0x1fb)](parseInt(_0x166dab)))));else break;}}}return _0x366130;},Window_Base[_0x117a34(0x238)]['preConvertEscapeCharacters']=function(_0x3249c0){const _0x3e91ea=_0x117a34;return this[_0x3e91ea(0x288)](),_0x3249c0;},Window_Base[_0x117a34(0x238)]['postConvertEscapeCharacters']=function(_0x5be282){return _0x5be282;},Window_Base[_0x117a34(0x238)]['convertShowChoiceEscapeCodes']=function(_0x1ee26a){const _0x39b8ea=_0x117a34;return _0x1ee26a=_0x1ee26a[_0x39b8ea(0x27a)](/<(?:SHOW|HIDE|DISABLE|ENABLE)>/i,''),_0x1ee26a=_0x1ee26a[_0x39b8ea(0x27a)](/<(?:SHOW|HIDE|DISABLE|ENABLE)[ ](?:SWITCH|SWITCHES):[ ]*(\d+(?:\s*,\s*\d+)*)>/i,''),_0x1ee26a=_0x1ee26a['replace'](/<(?:SHOW|HIDE|DISABLE|ENABLE)[ ](?:ALL|ANY)[ ](?:SWITCH|SWITCHES):[ ]*(\d+(?:\s*,\s*\d+)*)>/i,''),_0x1ee26a;},Window_Base['prototype'][_0x117a34(0x12a)]=function(_0x1cca05){const _0x1673c1=_0x117a34;return _0x1cca05=_0x1cca05[_0x1673c1(0x27a)](/<B>/gi,'\x1bBOLD[1]'),_0x1cca05=_0x1cca05['replace'](/<\/B>/gi,_0x1673c1(0x225)),_0x1cca05=_0x1cca05[_0x1673c1(0x27a)](/<I>/gi,_0x1673c1(0x17e)),_0x1cca05=_0x1cca05[_0x1673c1(0x27a)](/<\/I>/gi,'\x1bITALIC[0]'),_0x1cca05;},Window_Base['prototype'][_0x117a34(0x247)]=function(_0x4e59be){const _0x19c883=_0x117a34;return _0x4e59be=_0x4e59be['replace'](/<LEFT>/gi,_0x19c883(0x26b)),_0x4e59be=_0x4e59be[_0x19c883(0x27a)](/<\/LEFT>/gi,_0x19c883(0x270)),_0x4e59be=_0x4e59be[_0x19c883(0x27a)](/<CENTER>/gi,_0x19c883(0xc0)),_0x4e59be=_0x4e59be[_0x19c883(0x27a)](/<\/CENTER>/gi,_0x19c883(0x270)),_0x4e59be=_0x4e59be[_0x19c883(0x27a)](/<RIGHT>/gi,_0x19c883(0xa0)),_0x4e59be=_0x4e59be[_0x19c883(0x27a)](/<\/RIGHT>/gi,'\x1bTEXTALIGNMENT[0]'),_0x4e59be;},Window_Base['prototype'][_0x117a34(0x2b7)]=function(_0x1197ae){const _0x348be2=_0x117a34;return _0x1197ae=_0x1197ae['replace'](/<COLORLOCK>/gi,_0x348be2(0x108)),_0x1197ae=_0x1197ae['replace'](/<\/COLORLOCK>/gi,_0x348be2(0x2e7)),_0x1197ae=_0x1197ae[_0x348be2(0x27a)](/\(\(\(/gi,_0x348be2(0x108)),_0x1197ae=_0x1197ae[_0x348be2(0x27a)](/\)\)\)/gi,'\x1bCOLORLOCK[0]'),_0x1197ae;},Window_Base[_0x117a34(0x238)][_0x117a34(0x209)]=function(_0x103575){const _0x182ba9=_0x117a34;return _0x103575=_0x103575[_0x182ba9(0x27a)](/\x1bN\[(\d+)\]/gi,(_0x42d31f,_0x11657e)=>this[_0x182ba9(0x266)](parseInt(_0x11657e))),_0x103575=_0x103575[_0x182ba9(0x27a)](/\x1bP\[(\d+)\]/gi,(_0x1f1cf7,_0xcdc1b9)=>this[_0x182ba9(0x1fd)](parseInt(_0xcdc1b9))),_0x103575=_0x103575[_0x182ba9(0x27a)](/\x1bG/gi,TextManager[_0x182ba9(0xe4)]),_0x103575;},Window_Base['prototype'][_0x117a34(0x17d)]=function(_0x373fae){const _0x3aa6e6=_0x117a34;for(const _0x520f32 of VisuMZ[_0x3aa6e6(0xd8)][_0x3aa6e6(0x1a0)]['TextCodeActions']){_0x373fae[_0x3aa6e6(0x184)](_0x520f32[_0x3aa6e6(0x2bb)])&&(_0x373fae=_0x373fae[_0x3aa6e6(0x27a)](_0x520f32['textCodeCheck'],_0x520f32['textCodeResult']),_0x373fae=this[_0x3aa6e6(0x24a)](_0x373fae));}return _0x373fae;},Window_Base[_0x117a34(0x238)][_0x117a34(0xdb)]=function(_0x24eb4e){const _0x5db562=_0x117a34;for(const _0x4c54d0 of VisuMZ[_0x5db562(0xd8)][_0x5db562(0x1a0)][_0x5db562(0x301)]){_0x24eb4e[_0x5db562(0x184)](_0x4c54d0['textCodeCheck'])&&(_0x24eb4e=_0x24eb4e['replace'](_0x4c54d0[_0x5db562(0x2bb)],_0x4c54d0[_0x5db562(0x1af)]['bind'](this)),_0x24eb4e=this[_0x5db562(0x24a)](_0x24eb4e));}return _0x24eb4e;},Window_Base[_0x117a34(0x238)][_0x117a34(0x266)]=function(_0x481da5){const _0x345540=_0x117a34,_0x447202=_0x481da5>=0x1?$gameActors[_0x345540(0xb0)](_0x481da5):null,_0x2e8003=_0x447202?_0x447202['name']():'',_0x303565=Number(VisuMZ[_0x345540(0xd8)]['Settings'][_0x345540(0x17f)]['Actors']);return this[_0x345540(0xbc)]()&&_0x303565!==0x0?_0x345540(0x1d9)[_0x345540(0x246)](_0x303565,_0x2e8003):_0x2e8003;},Window_Base['prototype'][_0x117a34(0x1fd)]=function(_0x164c30){const _0x47515e=_0x117a34,_0x5e6f7b=_0x164c30>=0x1?$gameParty[_0x47515e(0x21d)]()[_0x164c30-0x1]:null,_0xf27014=_0x5e6f7b?_0x5e6f7b[_0x47515e(0xf9)]():'',_0xd79690=Number(VisuMZ[_0x47515e(0xd8)]['Settings'][_0x47515e(0x17f)][_0x47515e(0x150)]);if(this[_0x47515e(0xbc)]()&&_0xd79690!==0x0){if('TKdNW'!==_0x47515e(0x164))return'\x1bC[%1]%2\x1bPREVCOLOR[0]'[_0x47515e(0x246)](_0xd79690,_0xf27014);else{function _0x5d5fb8(){return!![];}}}else return _0xf27014;},Window_Base[_0x117a34(0x238)]['processAutoColorWords']=function(_0x2fcfd1){const _0x3a8472=_0x117a34;return this[_0x3a8472(0xbc)]()&&(_0x2fcfd1=this[_0x3a8472(0x1d7)](_0x2fcfd1),_0x2fcfd1=this['processActorNameAutoColorChanges'](_0x2fcfd1)),_0x2fcfd1;},Window_Base[_0x117a34(0x238)][_0x117a34(0x1d7)]=function(_0x59cab2){const _0x2a41a9=_0x117a34;for(autoColor of VisuMZ[_0x2a41a9(0xd8)]['AutoColorRegExp']){_0x59cab2=_0x59cab2[_0x2a41a9(0x27a)](autoColor[0x0],autoColor[0x1]);}return _0x59cab2;},Window_Base[_0x117a34(0x238)][_0x117a34(0xe9)]=function(){const _0x2a32fa=_0x117a34;this[_0x2a32fa(0x11f)]=[];},Window_Base[_0x117a34(0x238)][_0x117a34(0x288)]=function(){const _0x2e7643=_0x117a34;this['clearActorNameAutoColor']();const _0x2dd761=VisuMZ['MessageCore'][_0x2e7643(0x1a0)][_0x2e7643(0x17f)],_0x31de42=_0x2dd761['Actors'];if(_0x31de42<=0x0)return;for(const _0x16c6c0 of $gameActors[_0x2e7643(0x257)]){if(!_0x16c6c0)continue;const _0x621802=_0x16c6c0['name']();if(_0x621802['trim']()['length']<=0x0)continue;if(/^\d+$/[_0x2e7643(0x312)](_0x621802))continue;if(_0x621802['match'](/-----/i))continue;let _0x5be4b3=VisuMZ[_0x2e7643(0xd8)]['ConvertTextAutoColorRegExpFriendly'](_0x621802);const _0x4e521a=new RegExp('\x5cb'+_0x5be4b3+'\x5cb','g'),_0x58b8a6='\x1bC[%1]%2\x1bPREVCOLOR[0]'[_0x2e7643(0x246)](_0x31de42,_0x621802);this[_0x2e7643(0x11f)][_0x2e7643(0x154)]([_0x4e521a,_0x58b8a6]);}},Window_Base[_0x117a34(0x238)][_0x117a34(0x2bf)]=function(_0x23fbcb){const _0x35493b=_0x117a34;this[_0x35493b(0x11f)]===undefined&&this[_0x35493b(0x288)]();for(autoColor of this[_0x35493b(0x11f)]){_0x23fbcb=_0x23fbcb['replace'](autoColor[0x0],autoColor[0x1]);}return _0x23fbcb;},Window_Base['prototype'][_0x117a34(0x168)]=function(_0x151c32,_0x1c1f71,_0x19678c){const _0x23a5a3=_0x117a34;if(!_0x151c32)return'';const _0x59c4c8=_0x151c32[_0x1c1f71];let _0x12ade9='';if(_0x59c4c8&&_0x19678c&&_0x59c4c8[_0x23a5a3(0xc5)]){if(_0x23a5a3(0x13b)==='aVdkh'){const _0x440ba4=_0x23a5a3(0x239);_0x12ade9=_0x440ba4[_0x23a5a3(0x246)](_0x59c4c8[_0x23a5a3(0xc5)],_0x59c4c8[_0x23a5a3(0xf9)]);}else{function _0x3f9d9a(){this['_lastGainedItemData']['type']=0x2;}}}else{if(_0x59c4c8){if(_0x23a5a3(0x166)===_0x23a5a3(0xed)){function _0x2ca2fe(){const _0x4127b2=_0x23a5a3;_0x53a3ac=_0x2992f2||_0x286e65['width'],_0x56d469=_0x11d6a1||_0x233843[_0x4127b2(0x2fd)],this[_0x4127b2(0x255)][_0x4127b2(0x22a)]=_0x4f5c74,this[_0x4127b2(0x255)]['blt'](_0x1fcb5b,0x0,0x0,_0x37eed8[_0x4127b2(0x2b8)],_0x5b7cc0[_0x4127b2(0x2fd)],_0x4799b7,_0x22a03b,_0x5cbf85,_0x317603),this[_0x4127b2(0x255)][_0x4127b2(0x22a)]=0xff;}}else _0x12ade9=_0x59c4c8[_0x23a5a3(0xf9)];}else{if('VcUmq'===_0x23a5a3(0x105))_0x12ade9='';else{function _0x16e2ae(){const _0x95fa14=_0x23a5a3;this[_0x95fa14(0x1b6)]=null;}}}}if(this['isAutoColorAffected']()){if(_0x23a5a3(0x295)===_0x23a5a3(0x295))_0x12ade9=this['applyDatabaseAutoColor'](_0x12ade9,_0x151c32);else{function _0x1f1ff9(){const _0x18c4fd=_0x23a5a3;this[_0x18c4fd(0x9f)](),this[_0x18c4fd(0x251)]();}}}return _0x12ade9;},Window_Base[_0x117a34(0x238)][_0x117a34(0x20d)]=function(_0xfc63aa){const _0x280108=_0x117a34,_0x22a3ea=$gameParty[_0x280108(0x1f1)]();if(_0x22a3ea['id']<0x0)return'';let _0x42c536=null;if(_0x22a3ea[_0x280108(0x178)]===0x0)_0x42c536=$dataItems[_0x22a3ea['id']];if(_0x22a3ea[_0x280108(0x178)]===0x1)_0x42c536=$dataWeapons[_0x22a3ea['id']];if(_0x22a3ea[_0x280108(0x178)]===0x2)_0x42c536=$dataArmors[_0x22a3ea['id']];if(!_0x42c536)return'';return _0xfc63aa?_0x280108(0x239)['format'](_0x42c536[_0x280108(0xc5)],_0x42c536[_0x280108(0xf9)]):_0x42c536[_0x280108(0xf9)];},Window_Base[_0x117a34(0x238)][_0x117a34(0x193)]=function(){const _0x343a75=_0x117a34,_0x24d41d=$gameParty['getLastGainedItemData']();if(_0x24d41d['id']<=0x0)return'';return _0x24d41d[_0x343a75(0x234)];},Window_Base[_0x117a34(0x238)][_0x117a34(0x163)]=function(_0x4ecd65,_0x4128ab){const _0x154dc2=_0x117a34,_0x2a8912=VisuMZ['MessageCore'][_0x154dc2(0x1a0)]['AutoColor'];let _0x3046e3=0x0;if(_0x4128ab===$dataActors)_0x3046e3=_0x2a8912[_0x154dc2(0x150)];if(_0x4128ab===$dataClasses)_0x3046e3=_0x2a8912[_0x154dc2(0x1ec)];if(_0x4128ab===$dataSkills)_0x3046e3=_0x2a8912[_0x154dc2(0x206)];if(_0x4128ab===$dataItems)_0x3046e3=_0x2a8912[_0x154dc2(0xa8)];if(_0x4128ab===$dataWeapons)_0x3046e3=_0x2a8912['Weapons'];if(_0x4128ab===$dataArmors)_0x3046e3=_0x2a8912[_0x154dc2(0x284)];if(_0x4128ab===$dataEnemies)_0x3046e3=_0x2a8912[_0x154dc2(0x25e)];if(_0x4128ab===$dataStates)_0x3046e3=_0x2a8912['States'];return _0x3046e3>0x0&&(_0x4ecd65=_0x154dc2(0x1d9)[_0x154dc2(0x246)](_0x3046e3,_0x4ecd65)),_0x4ecd65;},Window_Base[_0x117a34(0x238)]['prepareWordWrapEscapeCharacters']=function(_0x218412){const _0x3e4636=_0x117a34;_0x218412=_0x218412[_0x3e4636(0x27a)](/<(?:WORDWRAP|WORD WRAP)>/gi,(_0x2b052d,_0x187a31)=>this[_0x3e4636(0x28d)](!![])),_0x218412=_0x218412['replace'](/<(?:NOWORDWRAP|NO WORD WRAP)>/gi,(_0x443c88,_0x50526f)=>this['setWordWrap'](![])),_0x218412=_0x218412['replace'](/<\/(?:WORDWRAP|WORD WRAP)>/gi,(_0x382bda,_0x2eabef)=>this[_0x3e4636(0x28d)](![]));if(_0x218412[_0x3e4636(0x184)](Window_Message[_0x3e4636(0x2ff)]))this['setWordWrap'](![]);else _0x218412['match'](Window_Message[_0x3e4636(0x31f)])&&this[_0x3e4636(0x28d)](![]);if(!this[_0x3e4636(0x136)]())return _0x218412;if(_0x218412[_0x3e4636(0x2a3)]<=0x0)return _0x218412;return VisuMZ[_0x3e4636(0xd8)][_0x3e4636(0x1a0)][_0x3e4636(0x153)]['LineBreakSpace']?(_0x218412=_0x218412[_0x3e4636(0x27a)](/[\n\r]+/g,'\x20'),_0x218412=_0x218412[_0x3e4636(0x27a)](/<(?:BR|LINEBREAK)>/gi,'\x20\x0a')):(_0x218412=_0x218412[_0x3e4636(0x27a)](/[\n\r]+/g,''),_0x218412=_0x218412[_0x3e4636(0x27a)](/<(?:BR|LINEBREAK)>/gi,'\x0a')),_0x218412=this['addWrapBreakAfterPunctuation'](_0x218412),_0x218412=_0x218412[_0x3e4636(0xfc)]('\x20')[_0x3e4636(0x16f)]('\x1bWrapBreak[0]'),_0x218412=_0x218412[_0x3e4636(0x27a)](/<(?:BR|LINEBREAK)>/gi,'\x0a'),_0x218412=_0x218412[_0x3e4636(0x27a)](/<LINE\x1bWrapBreak[0]BREAK>/gi,'\x0a'),_0x218412;},Window_Base[_0x117a34(0x238)]['addWrapBreakAfterPunctuation']=function(_0x36da81){return _0x36da81;},VisuMZ[_0x117a34(0xd8)]['Window_Base_processNewLine']=Window_Base['prototype'][_0x117a34(0x14b)],Window_Base[_0x117a34(0x238)][_0x117a34(0x14b)]=function(_0x1cc4fc){const _0xd79f70=_0x117a34;VisuMZ['MessageCore'][_0xd79f70(0x313)][_0xd79f70(0x1cc)](this,_0x1cc4fc),this['processTextAlignmentX'](_0x1cc4fc);},VisuMZ['MessageCore'][_0x117a34(0xff)]=Window_Base[_0x117a34(0x238)][_0x117a34(0x171)],Window_Base[_0x117a34(0x238)][_0x117a34(0x171)]=function(_0x381c88,_0x52252d){const _0x386717=_0x117a34;VisuMZ[_0x386717(0xd8)][_0x386717(0xff)][_0x386717(0x1cc)](this,_0x381c88,_0x52252d);if(_0x52252d===_0x386717(0x2eb)){if('lPJUB'==='Isafi'){function _0x11366b(){const _0x13b14c=_0x386717;return this[_0x13b14c(0x2d5)](_0x202ba7);}}else this[_0x386717(0x2c7)](_0x381c88);}},Window_Base['prototype'][_0x117a34(0x2cd)]=function(_0x534d9a){const _0x4176aa=_0x117a34;var _0x848e2e=/^\<(.*?)\>/[_0x4176aa(0x2cc)](_0x534d9a[_0x4176aa(0x158)]['slice'](_0x534d9a[_0x4176aa(0x1cb)]));return _0x848e2e?(_0x534d9a['index']+=_0x848e2e[0x0][_0x4176aa(0x2a3)],String(_0x848e2e[0x0]['slice'](0x1,_0x848e2e[0x0][_0x4176aa(0x2a3)]-0x1))):'';},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x276)]=Window_Base[_0x117a34(0x238)][_0x117a34(0x13c)],Window_Base[_0x117a34(0x238)][_0x117a34(0x13c)]=function(_0x2f042f,_0x2e6fb9){const _0x56bc9f=_0x117a34;switch(_0x2f042f){case'C':if(_0x2e6fb9[_0x56bc9f(0x1a7)]){if('ueMVF'===_0x56bc9f(0x26a)){function _0x2a1511(){const _0x4290f7=_0x56bc9f;_0x2e48ab[_0x4290f7(0xd8)][_0x4290f7(0x241)][_0x4290f7(0x1cc)](this,_0x4f3e68),_0x4290f7(0xeb)in _0x332425?this[_0x4290f7(0xeb)]=_0x3940fa(_0x5d886b[_0x4290f7(0xeb)])[_0x4290f7(0x2d0)](0x1,0xb):this[_0x4290f7(0xeb)]=_0x406aae['MessageCore']['Settings'][_0x4290f7(0x15c)][_0x4290f7(0x274)];}}else VisuMZ[_0x56bc9f(0xd8)][_0x56bc9f(0x276)][_0x56bc9f(0x1cc)](this,_0x2f042f,_0x2e6fb9);}else{if(_0x56bc9f(0x1d0)!=='ykXWs'){function _0x3bb000(){const _0x43bf31=_0x56bc9f,_0x5eaa76=0xb-_0x111d46[_0x43bf31(0xeb)];_0x7eab2b=_0x3cb2f6[_0x43bf31(0x302)](_0x3c3486*_0x5eaa76),this[_0x43bf31(0x140)]=_0x197f82,this['_textDelay']=_0x5f2d05;}}else this[_0x56bc9f(0x2d5)](_0x2e6fb9);}break;case'I':case'{':case'}':VisuMZ[_0x56bc9f(0xd8)]['Window_Base_processEscapeCharacter'][_0x56bc9f(0x1cc)](this,_0x2f042f,_0x2e6fb9);break;case'FS':this[_0x56bc9f(0x1cf)](_0x2e6fb9);break;case'PX':this['processPxTextCode'](_0x2e6fb9);break;case'PY':this[_0x56bc9f(0x180)](_0x2e6fb9);break;case _0x56bc9f(0x175):this['processFontChangeBold'](this[_0x56bc9f(0x2d5)](_0x2e6fb9));break;case _0x56bc9f(0x1f5):this[_0x56bc9f(0x2e2)](_0x2e6fb9);break;case _0x56bc9f(0x167):this['processColorLock'](_0x2e6fb9);break;case _0x56bc9f(0x195):this['processCommonEvent'](_0x2e6fb9);break;case _0x56bc9f(0x314):this[_0x56bc9f(0x13a)](this[_0x56bc9f(0x2d5)](_0x2e6fb9));break;case _0x56bc9f(0x30c):this[_0x56bc9f(0x138)](_0x2e6fb9);break;case _0x56bc9f(0x155):this[_0x56bc9f(0x1f9)](_0x2e6fb9);break;case _0x56bc9f(0x24f):this[_0x56bc9f(0x1b0)](_0x2e6fb9);break;case'WAIT':this['processCustomWait'](_0x2e6fb9);break;case'WRAPBREAK':this[_0x56bc9f(0x2c7)](_0x2e6fb9);break;default:this[_0x56bc9f(0x31c)](_0x2f042f,_0x2e6fb9);}},Window_Base[_0x117a34(0x238)][_0x117a34(0x31c)]=function(_0x45d1cc,_0x322d5e){const _0x3efb39=_0x117a34;for(const _0x378f48 of VisuMZ[_0x3efb39(0xd8)][_0x3efb39(0x1a0)][_0x3efb39(0x23e)]){if(_0x378f48[_0x3efb39(0x1f2)]===_0x45d1cc){if(_0x3efb39(0x128)===_0x3efb39(0x128)){if(_0x378f48[_0x3efb39(0x269)]==='')this[_0x3efb39(0x2d5)](_0x322d5e);_0x378f48['ActionJS'][_0x3efb39(0x1cc)](this,_0x322d5e);if(this[_0x3efb39(0x29e)]===Window_Message){if(_0x3efb39(0x13d)===_0x3efb39(0x272)){function _0xdd0a6c(){const _0x355eb7=_0x3efb39;_0x1c8775['y']+=_0x1d2196[_0x355eb7(0x188)];}}else{const _0x3884ce=_0x378f48[_0x3efb39(0x2cb)]||0x0;if(_0x3884ce>0x0)this[_0x3efb39(0x23c)](_0x3884ce);}}}else{function _0x3b7fb4(){const _0x1bb86e=_0x3efb39,_0xc98e06=_0x47c17c>=0x1?_0x539fa6[_0x1bb86e(0xb0)](_0x400b00):null,_0x216f0c=_0xc98e06?_0xc98e06[_0x1bb86e(0xf9)]():'',_0x48d3dc=_0x33e4e1(_0x4b5b80[_0x1bb86e(0xd8)][_0x1bb86e(0x1a0)][_0x1bb86e(0x17f)]['Actors']);return this[_0x1bb86e(0xbc)]()&&_0x48d3dc!==0x0?'\x1bC[%1]%2\x1bPREVCOLOR[0]'[_0x1bb86e(0x246)](_0x48d3dc,_0x216f0c):_0x216f0c;}}}}},Window_Base[_0x117a34(0x238)][_0x117a34(0x23f)]=function(){const _0x106eb3=_0x117a34;this[_0x106eb3(0xda)][_0x106eb3(0x226)]+=VisuMZ['MessageCore'][_0x106eb3(0x1a0)][_0x106eb3(0x2a6)][_0x106eb3(0x29a)],this[_0x106eb3(0xda)][_0x106eb3(0x226)]=Math[_0x106eb3(0x22f)](this[_0x106eb3(0xda)]['fontSize'],VisuMZ[_0x106eb3(0xd8)][_0x106eb3(0x1a0)][_0x106eb3(0x2a6)]['FontBiggerCap']);},Window_Base[_0x117a34(0x238)]['makeFontSmaller']=function(){const _0x7ff39e=_0x117a34;this[_0x7ff39e(0xda)]['fontSize']-=VisuMZ[_0x7ff39e(0xd8)][_0x7ff39e(0x1a0)][_0x7ff39e(0x2a6)][_0x7ff39e(0x29a)],this[_0x7ff39e(0xda)][_0x7ff39e(0x226)]=Math['max'](this[_0x7ff39e(0xda)]['fontSize'],VisuMZ['MessageCore'][_0x7ff39e(0x1a0)][_0x7ff39e(0x2a6)][_0x7ff39e(0xa2)]);},Window_Base[_0x117a34(0x238)][_0x117a34(0x1cf)]=function(_0x2a07ff){const _0x552101=_0x117a34,_0x1e9907=this[_0x552101(0x2d5)](_0x2a07ff);this[_0x552101(0xda)]['fontSize']=_0x1e9907[_0x552101(0x2d0)](VisuMZ[_0x552101(0xd8)][_0x552101(0x1a0)]['General'][_0x552101(0xa2)],VisuMZ[_0x552101(0xd8)][_0x552101(0x1a0)]['General'][_0x552101(0x200)]);},Window_Base[_0x117a34(0x238)]['maxFontSizeInLine']=function(_0x3366fd){const _0xa82b11=_0x117a34;let _0x271e4b=this[_0xa82b11(0xda)][_0xa82b11(0x226)];const _0x639b78=/\x1b({|}|FS)(\[(\d+)])?/gi;for(;;){if(_0xa82b11(0x19c)!==_0xa82b11(0x2ae)){const _0x394726=_0x639b78[_0xa82b11(0x2cc)](_0x3366fd);if(!_0x394726){if(_0xa82b11(0x132)!==_0xa82b11(0x22c))break;else{function _0x466608(){const _0x58352e=_0xa82b11;return _0x558e0d=_0x1cab2c['replace'](/<B>/gi,_0x58352e(0x213)),_0x21c476=_0xc92498[_0x58352e(0x27a)](/<\/B>/gi,_0x58352e(0x225)),_0x2a1e3d=_0x2518f3[_0x58352e(0x27a)](/<I>/gi,'\x1bITALIC[1]'),_0x23ddfe=_0x54c88f['replace'](/<\/I>/gi,_0x58352e(0x1e2)),_0x314b5b;}}}const _0x3b5d6c=String(_0x394726[0x1])[_0xa82b11(0x319)]();if(_0x3b5d6c==='{'){if('SEHTr'!==_0xa82b11(0x268)){function _0x57dd25(){const _0x25335f=_0xa82b11;this['contents'][_0x25335f(0xca)]=!!_0x1bd8df;}}else this[_0xa82b11(0x23f)]();}else{if(_0x3b5d6c==='}')this[_0xa82b11(0x15f)]();else{if(_0x3b5d6c==='FS'){if(_0xa82b11(0x24c)!==_0xa82b11(0x24c)){function _0x50a9b0(){const _0xf51708=_0xa82b11,_0x244e1d=_0x58f59b['min'](_0x5aaff1['width'],_0x3a21de['getMessageWindowWidth']()),_0x34723d=_0x189ff0[_0xf51708(0x217)](),_0x9162fc=this[_0xf51708(0x1ee)](_0x34723d,![]),_0x25b81c=(_0x3afe07[_0xf51708(0x16a)]-_0x244e1d)/0x2,_0x38d41d=0x0;return new _0x1bb1b7(_0x25b81c,_0x38d41d,_0x244e1d,_0x9162fc);}}else this[_0xa82b11(0xda)]['fontSize']=parseInt(_0x394726[0x3])[_0xa82b11(0x2d0)](VisuMZ[_0xa82b11(0xd8)][_0xa82b11(0x1a0)][_0xa82b11(0x2a6)]['FontSmallerCap'],VisuMZ[_0xa82b11(0xd8)][_0xa82b11(0x1a0)][_0xa82b11(0x2a6)][_0xa82b11(0x200)]);}}}if(this[_0xa82b11(0xda)][_0xa82b11(0x226)]>_0x271e4b){if('VnkzP'==='VnkzP')_0x271e4b=this[_0xa82b11(0xda)]['fontSize'];else{function _0x3b1be8(){const _0x380b61=_0xa82b11;this[_0x380b61(0xda)]['fontSize']+=_0x4facff[_0x380b61(0xd8)][_0x380b61(0x1a0)][_0x380b61(0x2a6)]['FontChangeValue'],this[_0x380b61(0xda)]['fontSize']=_0xf6ffa8['min'](this[_0x380b61(0xda)]['fontSize'],_0x3e2a08[_0x380b61(0xd8)][_0x380b61(0x1a0)][_0x380b61(0x2a6)][_0x380b61(0x200)]);}}}}else{function _0x118c44(){const _0x2adcd5=_0xa82b11,_0x19359a=_0xa589c1[_0x2adcd5(0x1f1)]();if(_0x19359a['id']<0x0)return'';let _0x2f1c74=null;if(_0x19359a['type']===0x0)_0x2f1c74=_0x55b37f[_0x19359a['id']];if(_0x19359a[_0x2adcd5(0x178)]===0x1)_0x2f1c74=_0x5077bc[_0x19359a['id']];if(_0x19359a[_0x2adcd5(0x178)]===0x2)_0x2f1c74=_0x15d6c1[_0x19359a['id']];if(!_0x2f1c74)return'';return _0x3c2496?'\x1bi[%1]%2'[_0x2adcd5(0x246)](_0x2f1c74['iconIndex'],_0x2f1c74['name']):_0x2f1c74['name'];}}}return _0x271e4b;},Window_Base[_0x117a34(0x238)][_0x117a34(0xc7)]=function(_0x319100){const _0x2c8f8c=_0x117a34;_0x319100['x']=this[_0x2c8f8c(0x2d5)](_0x319100),VisuMZ['MessageCore'][_0x2c8f8c(0x1a0)][_0x2c8f8c(0x2a6)][_0x2c8f8c(0x1dc)]&&(_0x319100['x']+=_0x319100[_0x2c8f8c(0x30a)]);},Window_Base[_0x117a34(0x238)][_0x117a34(0x180)]=function(_0x41ed9e){const _0x2c84db=_0x117a34;_0x41ed9e['y']=this[_0x2c84db(0x2d5)](_0x41ed9e),VisuMZ[_0x2c84db(0xd8)][_0x2c84db(0x1a0)][_0x2c84db(0x2a6)]['RelativePXPY']&&(_0x41ed9e['y']+=_0x41ed9e[_0x2c84db(0x188)]);},Window_Base[_0x117a34(0x238)][_0x117a34(0x139)]=function(_0x230d52){const _0x4c5f23=_0x117a34;this[_0x4c5f23(0xda)][_0x4c5f23(0x2a8)]=!!_0x230d52;},Window_Base[_0x117a34(0x238)][_0x117a34(0x13a)]=function(_0xc3d5e7){const _0x1fb5ed=_0x117a34;this[_0x1fb5ed(0xda)][_0x1fb5ed(0xca)]=!!_0xc3d5e7;},Window_Base[_0x117a34(0x238)][_0x117a34(0x1b0)]=function(_0x3f55fb){const _0x1762ef=_0x117a34,_0x43eadb=this[_0x1762ef(0x2d5)](_0x3f55fb);if(!_0x3f55fb['drawing'])return;switch(_0x43eadb){case 0x0:this[_0x1762ef(0x10b)](_0x1762ef(0x218));return;case 0x1:this[_0x1762ef(0x10b)](_0x1762ef(0x228));break;case 0x2:this[_0x1762ef(0x10b)]('center');break;case 0x3:this[_0x1762ef(0x10b)](_0x1762ef(0x14a));break;}this[_0x1762ef(0x12e)](_0x3f55fb);},Window_Base[_0x117a34(0x238)][_0x117a34(0x12e)]=function(_0x54f01f){const _0x424a06=_0x117a34;if(!_0x54f01f[_0x424a06(0x1a7)])return;if(_0x54f01f[_0x424a06(0xce)])return;if(this['getTextAlignment']()===_0x424a06(0x218))return;let _0x40321a=_0x54f01f[_0x424a06(0x158)]['indexOf']('\x1bTEXTALIGNMENT',_0x54f01f[_0x424a06(0x1cb)]+0x1),_0x5507e7=_0x54f01f['text']['indexOf']('\x0a',_0x54f01f[_0x424a06(0x1cb)]+0x1);if(_0x40321a<0x0)_0x40321a=_0x54f01f[_0x424a06(0x158)][_0x424a06(0x2a3)]+0x1;if(_0x5507e7>0x0)_0x40321a=Math['min'](_0x40321a,_0x5507e7);const _0x22aecf=_0x54f01f['text']['substring'](_0x54f01f[_0x424a06(0x1cb)],_0x40321a),_0x52e480=this[_0x424a06(0x1c1)](_0x22aecf)['width'],_0x4e18d6=_0x54f01f[_0x424a06(0x2b8)]||this[_0x424a06(0x1f8)],_0x3f8cdf=this[_0x424a06(0x29e)]===Window_Message&&$gameMessage[_0x424a06(0xa6)]()!=='';switch(this[_0x424a06(0x2b2)]()){case'left':_0x54f01f['x']=_0x54f01f['startX'];break;case'center':_0x54f01f['x']=_0x54f01f[_0x424a06(0x30a)],_0x54f01f['x']+=Math['floor']((_0x4e18d6-_0x52e480)/0x2);if(_0x3f8cdf){if('LNUiS'===_0x424a06(0x2e6)){function _0x5ee36c(){const _0x249f8b=_0x424a06;this[_0x249f8b(0xe3)]=0x0,_0x4c8b33['MessageCore']['Window_NameBox_refresh'][_0x249f8b(0x1cc)](this);}}else _0x54f01f['x']-=_0x54f01f[_0x424a06(0x30a)]/0x2;}break;case _0x424a06(0x14a):_0x54f01f['x']=_0x4e18d6-_0x52e480+_0x54f01f[_0x424a06(0x30a)];if(_0x3f8cdf){if(_0x424a06(0x232)===_0x424a06(0xdd)){function _0x402251(){const _0x53d7e1=_0x424a06;_0x21c0da[_0x53d7e1(0xd8)][_0x53d7e1(0x2fc)]['call'](this),this['process_VisuMZ_MessageCore_TextCodes_Action'](),this[_0x53d7e1(0x2e8)](),this['process_VisuMZ_MessageCore_TextMacros'](),this[_0x53d7e1(0x109)]();}}else _0x54f01f['x']-=_0x54f01f[_0x424a06(0x30a)];}break;}},Window_Base[_0x117a34(0x238)][_0x117a34(0x1c1)]=function(_0x40592f){const _0x455160=_0x117a34;_0x40592f=_0x40592f[_0x455160(0x27a)](/\x1b!/g,''),_0x40592f=_0x40592f['replace'](/\x1b\|/g,''),_0x40592f=_0x40592f[_0x455160(0x27a)](/\x1b\./g,'');const _0x391f33=this['createTextState'](_0x40592f,0x0,0x0,0x0),_0x451cb9=this[_0x455160(0x110)]();return _0x391f33[_0x455160(0x1a7)]=![],this[_0x455160(0x1a6)](_0x391f33),this['returnPreservedFontSettings'](_0x451cb9),{'width':_0x391f33['outputWidth'],'height':_0x391f33['outputHeight']};},Window_Base[_0x117a34(0x238)][_0x117a34(0x2c7)]=function(_0x584f2d){const _0x179141=_0x117a34,_0x1443fa=(_0x584f2d['rtl']?-0x1:0x1)*this[_0x179141(0x2db)]('\x20');_0x584f2d['x']+=_0x1443fa;if(this[_0x179141(0x2d5)](_0x584f2d)>0x0)_0x584f2d['x']+=_0x1443fa;if(_0x584f2d[_0x179141(0xce)])return;let _0x413b4c=_0x584f2d['text'][_0x179141(0x230)](_0x179141(0x2eb),_0x584f2d[_0x179141(0x1cb)]+0x1),_0x416666=_0x584f2d[_0x179141(0x158)][_0x179141(0x230)]('\x0a',_0x584f2d[_0x179141(0x1cb)]+0x1);if(_0x413b4c<0x0)_0x413b4c=_0x584f2d[_0x179141(0x158)]['length']+0x1;if(_0x416666>0x0)_0x413b4c=Math['min'](_0x413b4c,_0x416666);const _0x13f30a=_0x584f2d[_0x179141(0x158)][_0x179141(0x2b9)](_0x584f2d['index'],_0x413b4c),_0x535dd5=this[_0x179141(0x2c5)](_0x13f30a)['width'];let _0x508715=_0x584f2d[_0x179141(0x2b8)]||this[_0x179141(0x1f8)];if(this[_0x179141(0x29e)]===Window_Message){if(_0x179141(0x21e)!==_0x179141(0x21e)){function _0x21e9ad(){const _0x4e1853=_0x179141;_0x11c57b=_0x490e72[_0x4e1853(0x27a)](_0x35083d[_0x4e1853(0x2bb)],_0x3818a5[_0x4e1853(0x1af)]),_0x3f0077=this[_0x4e1853(0x24a)](_0x93b90d);}}else{const _0x3f6b3a=$gameMessage['faceName']()===''?0x0:ImageManager[_0x179141(0x12b)]+0x14;_0x508715-=_0x3f6b3a,VisuMZ[_0x179141(0xd8)]['Settings'][_0x179141(0x153)][_0x179141(0x29c)]&&(_0x508715-=_0x3f6b3a);}}let _0x2cc3f0=![];if(_0x584f2d['x']+_0x535dd5>_0x584f2d[_0x179141(0x30a)]+_0x508715)_0x2cc3f0=!![];if(_0x535dd5===0x0)_0x2cc3f0=!![];if(_0x2cc3f0){if('GyYPG'===_0x179141(0x12d))_0x584f2d[_0x179141(0x158)]=_0x584f2d[_0x179141(0x158)]['slice'](0x0,_0x584f2d['index'])+'\x0a'+_0x584f2d[_0x179141(0x158)]['substr'](_0x584f2d[_0x179141(0x1cb)]);else{function _0x44054f(){const _0x5c93cc=_0x179141,_0x4fc900=this[_0x5c93cc(0x2d5)](_0x39ae86);if(_0x312665[_0x5c93cc(0x1a7)])this[_0x5c93cc(0x229)](_0x4fc900>0x0);}}}},Window_Base[_0x117a34(0x238)]['textSizeExWordWrap']=function(_0x35f425){const _0x166485=_0x117a34,_0x1fab0e=this[_0x166485(0x126)](_0x35f425,0x0,0x0,0x0),_0x43efef=this[_0x166485(0x110)]();return _0x1fab0e[_0x166485(0x1a7)]=![],this[_0x166485(0x28d)](![]),this['processAllText'](_0x1fab0e),this[_0x166485(0x28d)](!![]),this[_0x166485(0x14e)](_0x43efef),{'width':_0x1fab0e[_0x166485(0xb4)],'height':_0x1fab0e[_0x166485(0xb3)]};},Window_Base[_0x117a34(0x238)][_0x117a34(0x16c)]=function(_0x149e8a){const _0x5502f8=_0x117a34;return this[_0x5502f8(0x2d5)](_0x149e8a);},Window_Base[_0x117a34(0x238)][_0x117a34(0x138)]=function(_0xc59135){const _0x3d215a=_0x117a34,_0x1b3208=this[_0x3d215a(0x2cd)](_0xc59135)[_0x3d215a(0xfc)](',');if(!_0xc59135[_0x3d215a(0x1a7)])return;const _0x1c2f2c=_0x1b3208[0x0][_0x3d215a(0x1d4)](),_0x48bd20=_0x1b3208[0x1]||0x0,_0x535a7a=_0x1b3208[0x2]||0x0,_0x2de22f=ImageManager['loadPicture'](_0x1c2f2c),_0x580882=this[_0x3d215a(0xda)][_0x3d215a(0x22a)];_0x2de22f[_0x3d215a(0x208)](this[_0x3d215a(0x12c)][_0x3d215a(0x28b)](this,_0x2de22f,_0xc59135['x'],_0xc59135['y'],_0x48bd20,_0x535a7a,_0x580882));},Window_Base[_0x117a34(0x238)][_0x117a34(0x12c)]=function(_0x312c2a,_0x490d3c,_0x29554b,_0x582152,_0x38d2bb,_0x5e0c57){const _0x99baf9=_0x117a34;_0x582152=_0x582152||_0x312c2a[_0x99baf9(0x2b8)],_0x38d2bb=_0x38d2bb||_0x312c2a[_0x99baf9(0x2fd)],this[_0x99baf9(0x255)][_0x99baf9(0x22a)]=_0x5e0c57,this[_0x99baf9(0x255)][_0x99baf9(0x1db)](_0x312c2a,0x0,0x0,_0x312c2a['width'],_0x312c2a[_0x99baf9(0x2fd)],_0x490d3c,_0x29554b,_0x582152,_0x38d2bb),this[_0x99baf9(0x255)][_0x99baf9(0x22a)]=0xff;},Window_Base[_0x117a34(0x238)][_0x117a34(0x2e2)]=function(_0x17fc07){const _0x2fece6=_0x117a34,_0x4f49aa=this[_0x2fece6(0x2cd)](_0x17fc07)[_0x2fece6(0xfc)](',');if(!_0x17fc07[_0x2fece6(0x1a7)])return;const _0x584c8e=_0x4f49aa[0x0][_0x2fece6(0x1d4)](),_0x5eddeb=ImageManager['loadPicture'](_0x584c8e),_0x534cfd=JsonEx[_0x2fece6(0x1e9)](_0x17fc07),_0x11c9f3=this[_0x2fece6(0xda)][_0x2fece6(0x22a)];_0x5eddeb['addLoadListener'](this[_0x2fece6(0x1d1)][_0x2fece6(0x28b)](this,_0x5eddeb,_0x534cfd,_0x11c9f3));},Window_Base[_0x117a34(0x238)][_0x117a34(0x1d1)]=function(_0x2663ff,_0xc6ec39,_0x36524b){const _0x2ea00c=_0x117a34,_0xb56da7=_0xc6ec39['width']||this[_0x2ea00c(0x1f8)],_0x400715=this[_0x2ea00c(0x169)]!==undefined?this[_0x2ea00c(0x235)]():this[_0x2ea00c(0x1ad)],_0x47debf=_0xb56da7/_0x2663ff['width'],_0x1bc97a=_0x400715/_0x2663ff[_0x2ea00c(0x2fd)],_0x1ff109=Math['min'](_0x47debf,_0x1bc97a,0x1),_0x471ec6=this[_0x2ea00c(0x169)]!==undefined?(this[_0x2ea00c(0x120)](0x0)[_0x2ea00c(0x2fd)]-this[_0x2ea00c(0x17c)]())/0x2:0x0,_0x37fc2d=_0x2663ff['width']*_0x1ff109,_0x4dba8a=_0x2663ff[_0x2ea00c(0x2fd)]*_0x1ff109,_0x8657ce=Math[_0x2ea00c(0x1bc)]((_0xb56da7-_0x37fc2d)/0x2)+_0xc6ec39[_0x2ea00c(0x30a)],_0x4aad12=Math['floor']((_0x400715-_0x4dba8a)/0x2)+_0xc6ec39[_0x2ea00c(0x188)]-_0x471ec6*0x2;this[_0x2ea00c(0x255)][_0x2ea00c(0x22a)]=_0x36524b,this[_0x2ea00c(0x255)][_0x2ea00c(0x1db)](_0x2663ff,0x0,0x0,_0x2663ff[_0x2ea00c(0x2b8)],_0x2663ff[_0x2ea00c(0x2fd)],_0x8657ce,_0x4aad12,_0x37fc2d,_0x4dba8a),this[_0x2ea00c(0x255)][_0x2ea00c(0x22a)]=0xff;},Window_Base['prototype'][_0x117a34(0x173)]=function(_0x1933f9){const _0x171b03=_0x117a34,_0x105029=this[_0x171b03(0x2d5)](_0x1933f9);if(_0x1933f9[_0x171b03(0x1a7)])this[_0x171b03(0x229)](_0x105029>0x0);},Window_Base[_0x117a34(0x238)][_0x117a34(0x1c2)]=function(_0x557b06){const _0x17b6c2=_0x117a34,_0x4abc6b=this['obtainEscapeParam'](_0x557b06);this[_0x17b6c2(0x29e)]===Window_Message&&_0x557b06[_0x17b6c2(0x1a7)]&&this[_0x17b6c2(0x10f)](_0x4abc6b);},Window_Help[_0x117a34(0x238)][_0x117a34(0x1e1)]=function(){this['setWordWrap']($gameSystem['isHelpWindowWordWrap']());},Window_Help['prototype'][_0x117a34(0xbc)]=function(){return!![];},VisuMZ['MessageCore'][_0x117a34(0x15d)]=Window_Help[_0x117a34(0x238)][_0x117a34(0x1c4)],Window_Help[_0x117a34(0x238)]['refresh']=function(){const _0x296b9e=_0x117a34;this[_0x296b9e(0xe9)](),VisuMZ[_0x296b9e(0xd8)][_0x296b9e(0x15d)][_0x296b9e(0x1cc)](this),this[_0x296b9e(0x1e1)]();},VisuMZ[_0x117a34(0xd8)][_0x117a34(0xd6)]=Window_Options[_0x117a34(0x238)][_0x117a34(0xb9)],Window_Options[_0x117a34(0x238)]['addGeneralOptions']=function(){const _0x571829=_0x117a34;VisuMZ['MessageCore'][_0x571829(0xd6)][_0x571829(0x1cc)](this),this[_0x571829(0x131)]();},Window_Options['prototype'][_0x117a34(0x131)]=function(){const _0x3fb849=_0x117a34;if(VisuMZ[_0x3fb849(0xd8)][_0x3fb849(0x1a0)][_0x3fb849(0x15c)][_0x3fb849(0x152)]){if(_0x3fb849(0x2e5)!==_0x3fb849(0x2e5)){function _0x2d5bd2(){const _0x48a045=_0x3fb849;_0x6d83ab['x']+=_0x56d2f6[_0x48a045(0x30a)];}}else this[_0x3fb849(0x2c1)]();}},Window_Options[_0x117a34(0x238)]['addMessageCoreTextSpeedCommand']=function(){const _0x2a9d39=_0x117a34,_0x263c25=TextManager['messageCoreTextSpeed'],_0xe5156d=_0x2a9d39(0xeb);this[_0x2a9d39(0x19d)](_0x263c25,_0xe5156d);},VisuMZ['MessageCore']['Window_Options_statusText']=Window_Options[_0x117a34(0x238)][_0x117a34(0x2aa)],Window_Options[_0x117a34(0x238)][_0x117a34(0x2aa)]=function(_0x1c4cf6){const _0x930986=_0x117a34,_0x5065a8=this['commandSymbol'](_0x1c4cf6);if(_0x5065a8===_0x930986(0xeb))return this[_0x930986(0x156)]();return VisuMZ[_0x930986(0xd8)][_0x930986(0x18c)]['call'](this,_0x1c4cf6);},VisuMZ['MessageCore'][_0x117a34(0x2d8)]=Window_Options[_0x117a34(0x238)][_0x117a34(0xf1)],Window_Options['prototype'][_0x117a34(0xf1)]=function(_0x1554ca){const _0x3df732=_0x117a34;if(_0x1554ca===_0x3df732(0xeb))return!![];return VisuMZ[_0x3df732(0xd8)]['Window_Options_isVolumeSymbol'][_0x3df732(0x1cc)](this,_0x1554ca);},Window_Options[_0x117a34(0x238)]['textSpeedStatusText']=function(){const _0x1657b1=_0x117a34,_0x5314d9=this[_0x1657b1(0x130)](_0x1657b1(0xeb));if(_0x5314d9>0xa)return TextManager['instantTextSpeed'];else{if('BuJel'===_0x1657b1(0xfb))return _0x5314d9;else{function _0x294fbd(){const _0x4eea1c=_0x1657b1,_0x5dbc74=_0x48e7b0[_0x4eea1c(0x149)]()[_0x4eea1c(0x2e9)](_0x56eed4=>this[_0x4eea1c(0x104)](_0x56eed4)),_0x30bca8=_0x5b41cc['ceil'](_0x5dbc74['length']/this[_0x4eea1c(0x2bd)]());return _0x1aaed7[_0x4eea1c(0x1d3)](0x1,_0x387fb0[_0x4eea1c(0x22f)](_0x30bca8,this[_0x4eea1c(0x2a2)]()));}}}},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x28e)]=Window_Options[_0x117a34(0x238)][_0x117a34(0x187)],Window_Options['prototype']['changeVolume']=function(_0x551e7d,_0x246991,_0x5d102c){const _0xfe58ce=_0x117a34;if(_0x551e7d==='textSpeed')return this[_0xfe58ce(0x107)](_0x551e7d,_0x246991,_0x5d102c);VisuMZ[_0xfe58ce(0xd8)][_0xfe58ce(0x28e)][_0xfe58ce(0x1cc)](this,_0x551e7d,_0x246991,_0x5d102c);},Window_Options[_0x117a34(0x238)][_0x117a34(0x107)]=function(_0x54a857,_0x40c257,_0x1ba187){const _0x272df2=_0x117a34,_0x244927=this[_0x272df2(0x130)](_0x54a857),_0x29807b=0x1,_0x145033=_0x244927+(_0x40c257?_0x29807b:-_0x29807b);if(_0x145033>0xb&&_0x1ba187)this[_0x272df2(0x1a2)](_0x54a857,0x1);else{if(_0x272df2(0x310)!==_0x272df2(0x310)){function _0x3231b3(){const _0x104c29=_0x272df2,_0x4ab0d6=_0x2bd131['parse']('['+_0x161485['$1'][_0x104c29(0x184)](/\d+/g)+']');for(const _0x4ebd6a of _0x4ab0d6){if(!_0x54add0[_0x104c29(0x1fb)](_0x4ebd6a))return![];}return!![];}}else this[_0x272df2(0x1a2)](_0x54a857,_0x145033[_0x272df2(0x2d0)](0x1,0xb));}},Window_Message[_0x117a34(0x238)][_0x117a34(0x16b)]=function(){const _0x5deb8f=_0x117a34;Window_Base[_0x5deb8f(0x238)][_0x5deb8f(0x16b)]['call'](this);if(VisuMZ[_0x5deb8f(0xd8)][_0x5deb8f(0x1a0)][_0x5deb8f(0x2a6)][_0x5deb8f(0x25b)]){if(_0x5deb8f(0x264)!=='NkhMS'){function _0xd6c663(){const _0x2c7c38=_0x5deb8f;_0x4a3ae5[_0x2c7c38(0xd8)][_0x2c7c38(0x1a0)]['TextSpeed'][_0x2c7c38(0x152)]&&this['addMessageCoreTextSpeedCommand']();}}else this[_0x5deb8f(0x1ab)]();}},Window_Message[_0x117a34(0x238)][_0x117a34(0x1ab)]=function(){const _0x25486d=_0x117a34;this[_0x25486d(0x2a5)]['x']=Math[_0x25486d(0x302)](this['width']/0x2),this[_0x25486d(0x2a5)]['anchor']['x']=0.5,this[_0x25486d(0x2a5)][_0x25486d(0x198)]['x']=Graphics[_0x25486d(0x2b8)];},VisuMZ['MessageCore'][_0x117a34(0x2ce)]=Window_Message['prototype'][_0x117a34(0x281)],Window_Message[_0x117a34(0x238)]['clearFlags']=function(){const _0x3e1a01=_0x117a34;VisuMZ[_0x3e1a01(0xd8)][_0x3e1a01(0x2ce)][_0x3e1a01(0x1cc)](this),this[_0x3e1a01(0xe9)](),this[_0x3e1a01(0x1e1)](),this[_0x3e1a01(0x229)](![]),this['setTextAlignment']('default'),this[_0x3e1a01(0x196)](VisuMZ[_0x3e1a01(0xd8)][_0x3e1a01(0x1a0)]['General']['MessageTextDelay']);},Window_Message[_0x117a34(0x238)][_0x117a34(0x1e1)]=function(){const _0x1bf3aa=_0x117a34;this[_0x1bf3aa(0x28d)]($gameSystem[_0x1bf3aa(0xd1)]());},Window_Message[_0x117a34(0x238)]['isAutoColorAffected']=function(){return!![];},Window_Message[_0x117a34(0x238)][_0x117a34(0x196)]=function(_0x35b820){const _0x539f58=_0x117a34,_0x1d9c5d=0xb-ConfigManager[_0x539f58(0xeb)];_0x35b820=Math[_0x539f58(0x302)](_0x35b820*_0x1d9c5d),this[_0x539f58(0x140)]=_0x35b820,this[_0x539f58(0x112)]=_0x35b820;},VisuMZ[_0x117a34(0xd8)]['Window_Message_isTriggered']=Window_Message[_0x117a34(0x238)][_0x117a34(0x252)],Window_Message[_0x117a34(0x238)]['isTriggered']=function(){const _0x342750=_0x117a34;return VisuMZ[_0x342750(0xd8)][_0x342750(0x27d)][_0x342750(0x1cc)](this)||Input[_0x342750(0x19a)](VisuMZ['MessageCore'][_0x342750(0x1a0)][_0x342750(0x2a6)]['FastForwardKey']);},VisuMZ[_0x117a34(0xd8)]['Window_Message_updatePlacement']=Window_Message[_0x117a34(0x238)][_0x117a34(0x9f)],Window_Message[_0x117a34(0x238)][_0x117a34(0x9f)]=function(){const _0x18d9ef=_0x117a34;let _0x4d65b7=this['y'];VisuMZ[_0x18d9ef(0xd8)][_0x18d9ef(0x309)][_0x18d9ef(0x1cc)](this);if(this[_0x18d9ef(0x189)])this['y']=_0x4d65b7;this['clampPlacementPosition']();},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x277)]=Window_Message[_0x117a34(0x238)][_0x117a34(0x1bb)],Window_Message[_0x117a34(0x238)]['newPage']=function(_0x2e86fc){const _0xc169b6=_0x117a34;this[_0xc169b6(0x2f7)](_0x2e86fc),VisuMZ[_0xc169b6(0xd8)][_0xc169b6(0x277)]['call'](this,_0x2e86fc),this['createContents']();},Window_Message[_0x117a34(0x238)][_0x117a34(0x2f7)]=function(_0x414a13){this['prepareAutoSizeEscapeCharacters'](_0x414a13),this['updateDimensions']();},VisuMZ[_0x117a34(0xd8)][_0x117a34(0xdc)]=Window_Message[_0x117a34(0x238)][_0x117a34(0xf5)],Window_Message['prototype']['terminateMessage']=function(){const _0x4829d0=_0x117a34;VisuMZ[_0x4829d0(0xd8)][_0x4829d0(0xdc)][_0x4829d0(0x1cc)](this),this[_0x4829d0(0x281)]();if(this[_0x4829d0(0x2f1)])this[_0x4829d0(0xa4)]();},Window_Message['prototype'][_0x117a34(0x134)]=function(){const _0x1af0d2=_0x117a34;this[_0x1af0d2(0x2b8)]=$gameSystem[_0x1af0d2(0xe0)](),this[_0x1af0d2(0x2b8)]=Math['min'](Graphics[_0x1af0d2(0x2b8)],this['width']);const _0x91a9a=$gameSystem[_0x1af0d2(0x217)]();this[_0x1af0d2(0x2fd)]=SceneManager[_0x1af0d2(0x1ae)]['calcWindowHeight'](_0x91a9a,![]),this[_0x1af0d2(0x2fd)]=Math[_0x1af0d2(0x22f)](Graphics[_0x1af0d2(0x2fd)],this[_0x1af0d2(0x2fd)]);if($gameTemp[_0x1af0d2(0x293)])this[_0x1af0d2(0xac)]();},Window_Message[_0x117a34(0x238)][_0x117a34(0xac)]=function(){const _0x5f3816=_0x117a34;this['x']=(Graphics['boxWidth']-this['width'])/0x2,$gameTemp[_0x5f3816(0x293)]=undefined,this['clampPlacementPosition']();},Window_Message['prototype']['updateMove']=function(){const _0x22ea98=_0x117a34,_0x1f51f0={'x':this['x'],'y':this['y']};Window_Base[_0x22ea98(0x238)]['updateMove'][_0x22ea98(0x1cc)](this),this[_0x22ea98(0x278)](_0x1f51f0);},Window_Message[_0x117a34(0x238)][_0x117a34(0x2f6)]=function(){return!![];},Window_Message[_0x117a34(0x238)]['updateNameBoxMove']=function(_0x25f86e){const _0x3ed15a=_0x117a34;if(this[_0x3ed15a(0x2d6)]){if(_0x3ed15a(0x141)===_0x3ed15a(0x1ea)){function _0x26045c(){const _0x16b57e=_0x3ed15a;for(const _0x4120a8 of _0x55befe[_0x16b57e(0xd8)][_0x16b57e(0x1a0)][_0x16b57e(0x301)]){_0x160001[_0x16b57e(0x184)](_0x4120a8[_0x16b57e(0x2bb)])&&(_0x2c7759=_0x1474be[_0x16b57e(0x27a)](_0x4120a8['textCodeCheck'],_0x4120a8[_0x16b57e(0x1af)][_0x16b57e(0x28b)](this)),_0x3af00f=this[_0x16b57e(0x24a)](_0xa79a62));}return _0x45cb66;}}else this['_nameBoxWindow']['x']+=this['x']-_0x25f86e['x'],this[_0x3ed15a(0x2d6)]['y']+=this['y']-_0x25f86e['y'];}},Window_Message[_0x117a34(0x238)][_0x117a34(0x2e1)]=function(_0x310aaa,_0x32cb6e){const _0x2bfe9d=_0x117a34;this[_0x2bfe9d(0xf3)](this[_0x2bfe9d(0x2e0)]['x'],this['_positionType']*(Graphics[_0x2bfe9d(0x118)]-this['height'])/0x2,this['_resetRect'][_0x2bfe9d(0x2b8)],this[_0x2bfe9d(0x2e0)][_0x2bfe9d(0x2fd)],_0x310aaa,_0x32cb6e);},Window_Message[_0x117a34(0x238)][_0x117a34(0x16c)]=function(_0x385795){const _0x3a14f1=_0x117a34,_0x305c99=Window_Base[_0x3a14f1(0x238)][_0x3a14f1(0x16c)][_0x3a14f1(0x1cc)](this,_0x385795);_0x385795[_0x3a14f1(0x1a7)]&&this['launchMessageCommonEvent'](_0x305c99);},Window_Message[_0x117a34(0x238)][_0x117a34(0x23c)]=function(_0x5dfe73){const _0x2dff17=_0x117a34;if($gameParty[_0x2dff17(0xd3)]()){}else{if(_0x2dff17(0x145)!==_0x2dff17(0x145)){function _0x34f424(){const _0x14891c=_0x2dff17;return this['processAutoSize'](_0xd24dda,!![],!![]),this[_0x14891c(0xa1)](_0x14891c(0x179),_0x2294c3(_0x57300c)||0x0),'';}}else $gameMap['addMessageCommonEvent'](_0x5dfe73);}},Window_Message[_0x117a34(0x238)][_0x117a34(0xd4)]=function(_0x2977ed){const _0x5badf6=_0x117a34;this[_0x5badf6(0x140)]--;if(this['_textDelayCount']<=0x0){if('qcste'!=='qcste'){function _0xd19e1a(){const _0x346dfd=_0x5badf6;_0x3eed19=_0x4d474c[_0x346dfd(0x27a)](/\x1bV\[(\d+)\]/gi,(_0x155f13,_0x4438e8)=>this[_0x346dfd(0x237)](_0x8904cd(_0x56a975[_0x346dfd(0x1fb)](_0x2db5ab(_0x4438e8)))));}}else this[_0x5badf6(0x248)](_0x2977ed),Window_Base['prototype'][_0x5badf6(0xd4)][_0x5badf6(0x1cc)](this,_0x2977ed);}},Window_Message['prototype']['onProcessCharacter']=function(_0xb3e334){const _0x2666cc=_0x117a34;this[_0x2666cc(0x140)]=this[_0x2666cc(0x112)];if(this[_0x2666cc(0x112)]<=0x0)this['_showFast']=!![];},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x165)]=Window_Message['prototype'][_0x117a34(0x13c)],Window_Message['prototype'][_0x117a34(0x13c)]=function(_0x519521,_0x32eb3f){const _0x210d92=_0x117a34;if(!_0x32eb3f[_0x210d92(0x1a7)]){if(_0x210d92(0x2a9)===_0x210d92(0xe6)){function _0x353e67(){const _0x5d2b80=_0x210d92;this[_0x5d2b80(0xda)][_0x5d2b80(0x226)]=_0x1245ae(_0x4fde13[0x3])[_0x5d2b80(0x2d0)](_0x5431ec['MessageCore']['Settings'][_0x5d2b80(0x2a6)][_0x5d2b80(0xa2)],_0x350d23[_0x5d2b80(0xd8)][_0x5d2b80(0x1a0)][_0x5d2b80(0x2a6)][_0x5d2b80(0x200)]);}}else Window_Base[_0x210d92(0x238)][_0x210d92(0x13c)][_0x210d92(0x1cc)](this,_0x519521,_0x32eb3f);}else VisuMZ[_0x210d92(0xd8)][_0x210d92(0x165)]['call'](this,_0x519521,_0x32eb3f);},Window_Message[_0x117a34(0x238)][_0x117a34(0x2b0)]=function(_0x35b699){const _0x2d35cd=_0x117a34;let _0x4dfdb9=_0x35b699[_0x2d35cd(0x158)];_0x4dfdb9=_0x4dfdb9[_0x2d35cd(0x27a)](/<(?:AUTO|AUTOSIZE|AUTO SIZE)>/gi,()=>{const _0x18bba5=_0x2d35cd;return this[_0x18bba5(0x102)](_0x4dfdb9,!![],!![]),this[_0x18bba5(0xa1)](_0x18bba5(0x205)),'';}),_0x4dfdb9=_0x4dfdb9[_0x2d35cd(0x27a)](/<(?:AUTOWIDTH|AUTO WIDTH)>/gi,()=>{const _0x2ce175=_0x2d35cd;if(_0x2ce175(0x296)!==_0x2ce175(0x296)){function _0x31f281(){_0x4aa39a['setMessageWindowWordWrap'](_0x4e4bea(_0x18cd13));}}else return this[_0x2ce175(0x102)](_0x4dfdb9,!![],![]),this[_0x2ce175(0xa1)](_0x2ce175(0x205)),'';}),_0x4dfdb9=_0x4dfdb9[_0x2d35cd(0x27a)](/<(?:AUTOHEIGHT|AUTO HEIGHT)>/gi,()=>{const _0x2ab068=_0x2d35cd;if(_0x2ab068(0xa3)==='IDmnc'){function _0x471a6d(){const _0x49f258=_0x2ab068,_0x2a5d85=this[_0x49f258(0x2cd)](_0x1dd693)[_0x49f258(0xfc)](',');if(!_0x4e4e29[_0x49f258(0x1a7)])return;const _0x2d381d=_0x2a5d85[0x0][_0x49f258(0x1d4)](),_0x5056cc=_0x48a08c[_0x49f258(0x2dc)](_0x2d381d),_0x1e133d=_0x43a6ba['makeDeepCopy'](_0x1acc3b),_0x2133f6=this[_0x49f258(0xda)]['paintOpacity'];_0x5056cc['addLoadListener'](this[_0x49f258(0x1d1)][_0x49f258(0x28b)](this,_0x5056cc,_0x1e133d,_0x2133f6));}}else return this['processAutoSize'](_0x4dfdb9,![],!![]),this['processAutoPosition']('none'),'';});if(SceneManager['isSceneBattle']()){if(_0x2d35cd(0x1fc)!==_0x2d35cd(0x1fc)){function _0x33637c(){const _0x3282f0=_0x2d35cd,_0x27ca12=this['obtainEscapeParam'](_0xb4c017);this[_0x3282f0(0xda)]['fontSize']=_0x27ca12[_0x3282f0(0x2d0)](_0x16a52d[_0x3282f0(0xd8)][_0x3282f0(0x1a0)][_0x3282f0(0x2a6)][_0x3282f0(0xa2)],_0x5a5c0a[_0x3282f0(0xd8)]['Settings'][_0x3282f0(0x2a6)]['FontBiggerCap']);}}else _0x4dfdb9=_0x4dfdb9[_0x2d35cd(0x27a)](/<(?:AUTOACTOR|AUTO ACTOR):[ ](.*?)>/gi,(_0x5361e6,_0x15d043)=>{const _0x3f9df0=_0x2d35cd;return this[_0x3f9df0(0x102)](_0x4dfdb9,!![],!![]),this[_0x3f9df0(0xa1)](_0x3f9df0(0x283),Number(_0x15d043)||0x1),'';}),_0x4dfdb9=_0x4dfdb9[_0x2d35cd(0x27a)](/<(?:AUTOPARTY|AUTO PARTY):[ ](.*?)>/gi,(_0xc600b2,_0x400f87)=>{const _0x31690d=_0x2d35cd;if(_0x31690d(0x31e)===_0x31690d(0xbb)){function _0x4a2d10(){const _0x227a74=_0x31690d;if(!_0x20a3bc[_0x227a74(0x1fb)](_0xb393c1))return![];}}else return this[_0x31690d(0x102)](_0x4dfdb9,!![],!![]),this[_0x31690d(0xa1)]('battle\x20party',Number(_0x400f87)||0x0),'';}),_0x4dfdb9=_0x4dfdb9[_0x2d35cd(0x27a)](/<(?:AUTOENEMY|AUTO ENEMY):[ ](.*?)>/gi,(_0x5b4250,_0x5dc5f1)=>{const _0x83ed42=_0x2d35cd;return this[_0x83ed42(0x102)](_0x4dfdb9,!![],!![]),this['processAutoPosition'](_0x83ed42(0xf8),Number(_0x5dc5f1)||0x0),'';});}else SceneManager[_0x2d35cd(0x1e0)]()&&(_0x4dfdb9=_0x4dfdb9['replace'](/<(?:AUTOPLAYER|AUTO PLAYER)>/gi,(_0xfdf1a4,_0x32919f)=>{const _0xa63fa0=_0x2d35cd;if(_0xa63fa0(0x176)!==_0xa63fa0(0x11c))return this[_0xa63fa0(0x102)](_0x4dfdb9,!![],!![]),this[_0xa63fa0(0xa1)](_0xa63fa0(0x256),0x0),'';else{function _0x4a1cb7(){const _0x573be8=_0xa63fa0;if(!_0x5d7222[_0x573be8(0x1fb)](_0x522719))return!![];}}}),_0x4dfdb9=_0x4dfdb9[_0x2d35cd(0x27a)](/<(?:AUTOACTOR|AUTO ACTOR):[ ](.*?)>/gi,(_0x5e6235,_0xfe175f)=>{const _0x53f277=_0x2d35cd;if(_0x53f277(0x162)===_0x53f277(0x20a)){function _0x7a877f(){const _0x285daf=_0x53f277;return _0x3c3ecb[_0x285daf(0x238)][_0x285daf(0x18a)][_0x285daf(0x1cc)](this,_0x2be026);}}else return this[_0x53f277(0x102)](_0x4dfdb9,!![],!![]),this[_0x53f277(0xa1)](_0x53f277(0x31d),Number(_0xfe175f)||0x1),'';}),_0x4dfdb9=_0x4dfdb9['replace'](/<(?:AUTOPARTY|AUTO PARTY):[ ](.*?)>/gi,(_0x590e61,_0x303dc3)=>{const _0x858fb=_0x2d35cd;return this['processAutoSize'](_0x4dfdb9,!![],!![]),this[_0x858fb(0xa1)](_0x858fb(0x292),Number(_0x303dc3)||0x0),'';}),_0x4dfdb9=_0x4dfdb9['replace'](/<(?:AUTOEVENT|AUTO EVENT):[ ](.*?)>/gi,(_0x21b48a,_0x2bc08c)=>{const _0x1323b0=_0x2d35cd;if(_0x1323b0(0x204)===_0x1323b0(0x204))return this[_0x1323b0(0x102)](_0x4dfdb9,!![],!![]),this[_0x1323b0(0xa1)](_0x1323b0(0x273),Number(_0x2bc08c)||0x0),'';else{function _0x4dd686(){const _0x92ed24=_0x1323b0,_0x47f61e=_0xd3a04b[_0x92ed24(0x1f1)]();if(_0x47f61e['id']<=0x0)return'';return _0x47f61e['quantity'];}}}));_0x35b699[_0x2d35cd(0x158)]=_0x4dfdb9;},Window_Message[_0x117a34(0x2ff)]=/<(?:AUTO|AUTOSIZE|AUTO SIZE|AUTOWIDTH|AUTO WIDTH|AUTOHEIGHT|AUTO HEIGHT|AUTOPLAYER|AUTO PLAYER)>/gi,Window_Message[_0x117a34(0x31f)]=/<(?:AUTOPARTY|AUTO PARTY|AUTOPLAYER|AUTO PLAYER|AUTOEVENT|AUTO EVENT|AUTOENEMY|AUTO ENEMY|AUTOACTOR|AUTO ACTOR):[ ](.*?)>/gi,Window_Message[_0x117a34(0x238)][_0x117a34(0x102)]=function(_0x910181,_0x37abcb,_0x16d089){const _0x3f6a39=_0x117a34;_0x910181=_0x910181[_0x3f6a39(0x27a)](Window_Message[_0x3f6a39(0x2ff)],''),_0x910181=_0x910181[_0x3f6a39(0x27a)](Window_Message['_autoPosRegExp'],''),this[_0x3f6a39(0x30d)]=!![];const _0x4b152e=this[_0x3f6a39(0x298)](_0x910181);if(_0x37abcb){let _0x35addf=_0x4b152e[_0x3f6a39(0x2b8)]+$gameSystem['windowPadding']()*0x2+0x6;const _0x1d443a=$gameMessage[_0x3f6a39(0xa6)]()!=='',_0x13001f=ImageManager[_0x3f6a39(0x12b)],_0x1f6c85=0x14;_0x35addf+=_0x1d443a?_0x13001f+_0x1f6c85:0x4;if(_0x35addf%0x2!==0x0)_0x35addf+=0x1;$gameSystem[_0x3f6a39(0x1e8)](_0x35addf);}if(_0x16d089){let _0x57b966=Math[_0x3f6a39(0x2f0)](_0x4b152e[_0x3f6a39(0x2fd)]/this[_0x3f6a39(0x17c)]());$gameSystem[_0x3f6a39(0x12f)](_0x57b966);}this[_0x3f6a39(0x147)](),this['_autoSizeCheck']=![],this['_messagePositionReset']=!![];},Window_Message[_0x117a34(0x238)][_0x117a34(0x147)]=function(){const _0xc15c76=_0x117a34;this['updateDimensions'](),this[_0xc15c76(0x9f)](),this[_0xc15c76(0xac)](),this[_0xc15c76(0x1ca)](),this[_0xc15c76(0xda)][_0xc15c76(0xe1)](),this[_0xc15c76(0x18b)]();},Window_Message['prototype'][_0x117a34(0xa1)]=function(_0x3bd455,_0x8080bd){const _0x573b38=_0x117a34;switch(_0x3bd455['toLowerCase']()[_0x573b38(0x1d4)]()){case _0x573b38(0x283):this['_autoPositionTarget']=$gameActors['actor'](_0x8080bd);break;case _0x573b38(0x179):this[_0x573b38(0x189)]=$gameParty['members']()[_0x8080bd-0x1];break;case _0x573b38(0xf8):this[_0x573b38(0x189)]=$gameTroop['members']()[_0x8080bd-0x1];break;case _0x573b38(0x256):this[_0x573b38(0x189)]=$gamePlayer;break;case _0x573b38(0x31d):const _0x4933e3=$gameActors[_0x573b38(0xb0)](_0x8080bd)[_0x573b38(0x1cb)]();if(_0x4933e3===0x0)this['_autoPositionTarget']=$gamePlayer;else{if(_0x573b38(0x2bc)!==_0x573b38(0x250))this[_0x573b38(0x189)]=$gamePlayer[_0x573b38(0x220)]()[_0x573b38(0x203)](_0x4933e3-0x1);else{function _0xe6ab6(){const _0x462e9f=_0x573b38;_0x8e2d65=_0x29481f['replace'](/<(?:AUTOACTOR|AUTO ACTOR):[ ](.*?)>/gi,(_0x4f31fa,_0x47d9bd)=>{const _0xeb629c=_0x59d5;return this[_0xeb629c(0x102)](_0x8b3fef,!![],!![]),this[_0xeb629c(0xa1)](_0xeb629c(0x283),_0xcdcff9(_0x47d9bd)||0x1),'';}),_0x264365=_0xdd59d2[_0x462e9f(0x27a)](/<(?:AUTOPARTY|AUTO PARTY):[ ](.*?)>/gi,(_0xb47051,_0x53ccab)=>{const _0x218080=_0x462e9f;return this[_0x218080(0x102)](_0x2cd9ff,!![],!![]),this[_0x218080(0xa1)]('battle\x20party',_0x541d16(_0x53ccab)||0x0),'';}),_0x4884fb=_0x4d56cc[_0x462e9f(0x27a)](/<(?:AUTOENEMY|AUTO ENEMY):[ ](.*?)>/gi,(_0x47838f,_0x5ad33d)=>{const _0x3fc02e=_0x462e9f;return this[_0x3fc02e(0x102)](_0x16607c,!![],!![]),this[_0x3fc02e(0xa1)](_0x3fc02e(0xf8),_0x502c83(_0x5ad33d)||0x0),'';});}}}break;case _0x573b38(0x292):if(_0x8080bd===0x1)this[_0x573b38(0x189)]=$gamePlayer;else{if('bBhIq'===_0x573b38(0x11a)){function _0x1a051c(){const _0x4e40b3=_0x573b38;this[_0x4e40b3(0x1c4)](),this['selectDefault'](),this[_0x4e40b3(0x2ec)](),this[_0x4e40b3(0x18e)]();}}else this['_autoPositionTarget']=$gamePlayer['followers']()[_0x573b38(0x203)](_0x8080bd-0x2);}break;case'map\x20event':this[_0x573b38(0x189)]=$gameMap[_0x573b38(0x263)](_0x8080bd);break;}if(this[_0x573b38(0x189)]){if(_0x573b38(0x142)===_0x573b38(0x142))this[_0x573b38(0xb8)]();else{function _0x51fb9c(){const _0x995621=_0x573b38,_0x30ac01=this[_0x995621(0x2c6)](_0x58196d),_0x38f64c=this[_0x995621(0xb7)](_0x317da5);this[_0x995621(0x19d)](_0x30ac01,_0x995621(0x185),_0x38f64c,_0x53dd3f);}}}},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x243)]=Window_Message[_0x117a34(0x238)][_0x117a34(0x258)],Window_Message[_0x117a34(0x238)]['synchronizeNameBox']=function(){const _0x4ca371=_0x117a34;this['updateAutoPosition'](),VisuMZ[_0x4ca371(0xd8)][_0x4ca371(0x243)][_0x4ca371(0x1cc)](this);},Window_Message['prototype'][_0x117a34(0xb8)]=function(){const _0x256fd7=_0x117a34;if(!this['_autoPositionTarget'])return;const _0x1a68e7=SceneManager[_0x256fd7(0x1ae)];if(!_0x1a68e7)return;if(!_0x1a68e7[_0x256fd7(0x31b)])return;const _0x18c126=_0x1a68e7['_spriteset'][_0x256fd7(0x137)](this[_0x256fd7(0x189)]);if(!_0x18c126)return;let _0x2cd120=_0x18c126['x'];_0x2cd120-=this['width']/0x2,_0x2cd120-=(Graphics['width']-Graphics[_0x256fd7(0x16a)])/0x2;let _0x145f9d=_0x18c126['y'];_0x145f9d-=this[_0x256fd7(0x2fd)],_0x145f9d-=(Graphics[_0x256fd7(0x2fd)]-Graphics['boxHeight'])/0x2,_0x145f9d-=_0x18c126[_0x256fd7(0x2fd)]+0x8,this['x']=Math['round'](_0x2cd120),this['y']=Math[_0x256fd7(0x302)](_0x145f9d),this[_0x256fd7(0x216)](!![],![]),this['_nameBoxWindow'][_0x256fd7(0x9f)]();},Window_Message[_0x117a34(0x238)]['messagePositionReset']=function(){const _0x1df39c=_0x117a34;this[_0x1df39c(0x2f1)]=![],this[_0x1df39c(0x189)]=undefined,$gameSystem[_0x1df39c(0x317)](),this[_0x1df39c(0x147)](),this[_0x1df39c(0x119)]=0x0;},Window_Message[_0x117a34(0x238)][_0x117a34(0x1ef)]=function(_0x5df258){const _0x26fd39=_0x117a34;return Window_Base['prototype'][_0x26fd39(0x1ef)]['call'](this,_0x5df258);},Window_Message['prototype']['postConvertEscapeCharacters']=function(_0x491bef){const _0x62ca9b=_0x117a34;return Window_Base[_0x62ca9b(0x238)][_0x62ca9b(0x18a)][_0x62ca9b(0x1cc)](this,_0x491bef);},Window_Message[_0x117a34(0x238)][_0x117a34(0x2ad)]=function(_0x5ad034){const _0x1ff667=_0x117a34;this['preFlushTextState'](_0x5ad034),Window_Base[_0x1ff667(0x238)][_0x1ff667(0x2ad)][_0x1ff667(0x1cc)](this,_0x5ad034),this[_0x1ff667(0x191)](_0x5ad034);},Window_Message[_0x117a34(0x238)][_0x117a34(0x1aa)]=function(_0x28ea7e){},Window_Message[_0x117a34(0x238)][_0x117a34(0x191)]=function(_0xe2808b){},Window_NameBox[_0x117a34(0x238)][_0x117a34(0xbc)]=function(){return![];},Window_NameBox[_0x117a34(0x238)]['resetTextColor']=function(){const _0x19d121=_0x117a34;Window_Base[_0x19d121(0x238)]['resetTextColor'][_0x19d121(0x1cc)](this),this['changeTextColor'](this[_0x19d121(0xfd)]());},Window_NameBox[_0x117a34(0x238)]['defaultColor']=function(){const _0xb88512=_0x117a34,_0xe5ab56=VisuMZ[_0xb88512(0xd8)][_0xb88512(0x1a0)][_0xb88512(0x2a6)][_0xb88512(0x260)];return ColorManager[_0xb88512(0x2f3)](_0xe5ab56);},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x299)]=Window_NameBox[_0x117a34(0x238)][_0x117a34(0x9f)],Window_NameBox[_0x117a34(0x238)]['updatePlacement']=function(){const _0x5b2cb1=_0x117a34;VisuMZ[_0x5b2cb1(0xd8)]['Window_NameBox_updatePlacement']['call'](this),this['updateRelativePosition'](),this[_0x5b2cb1(0x13f)](),this['clampPlacementPosition'](),this[_0x5b2cb1(0xd0)]();},Window_NameBox['prototype'][_0x117a34(0x1ef)]=function(_0x4acfb1){const _0x548fce=_0x117a34;return _0x4acfb1=_0x4acfb1['replace'](/<LEFT>/gi,this['setRelativePosition']['bind'](this,0x0)),_0x4acfb1=_0x4acfb1[_0x548fce(0x27a)](/<CENTER>/gi,this['setRelativePosition'][_0x548fce(0x28b)](this,0x5)),_0x4acfb1=_0x4acfb1[_0x548fce(0x27a)](/<RIGHT>/gi,this[_0x548fce(0x14c)][_0x548fce(0x28b)](this,0xa)),_0x4acfb1=_0x4acfb1[_0x548fce(0x27a)](/<POSITION:[ ](\d+)>/gi,(_0xcf48d6,_0x22409a)=>this[_0x548fce(0x14c)](parseInt(_0x22409a))),_0x4acfb1=_0x4acfb1[_0x548fce(0x27a)](/<\/LEFT>/gi,''),_0x4acfb1=_0x4acfb1[_0x548fce(0x27a)](/<\/CENTER>/gi,''),_0x4acfb1=_0x4acfb1[_0x548fce(0x27a)](/<\/RIGHT>/gi,''),Window_Base[_0x548fce(0x238)]['preConvertEscapeCharacters'][_0x548fce(0x1cc)](this,_0x4acfb1);},Window_NameBox[_0x117a34(0x238)][_0x117a34(0x14c)]=function(_0x4b9579){const _0x220b47=_0x117a34;return this[_0x220b47(0xe3)]=_0x4b9579,'';},Window_NameBox[_0x117a34(0x238)][_0x117a34(0x300)]=function(){const _0x34fa20=_0x117a34;if($gameMessage[_0x34fa20(0x30e)]())return;this[_0x34fa20(0xe3)]=this[_0x34fa20(0xe3)]||0x0;const _0xf0ba37=this[_0x34fa20(0x24b)],_0x5b22d3=Math[_0x34fa20(0x1bc)](_0xf0ba37[_0x34fa20(0x2b8)]*this[_0x34fa20(0xe3)]/0xa);this['x']=_0xf0ba37['x']+_0x5b22d3-Math['floor'](this['width']/0x2),this['x']=this['x'][_0x34fa20(0x2d0)](_0xf0ba37['x'],_0xf0ba37['x']+_0xf0ba37[_0x34fa20(0x2b8)]-this[_0x34fa20(0x2b8)]);},Window_NameBox['prototype'][_0x117a34(0x13f)]=function(){const _0x1608da=_0x117a34;if($gameMessage[_0x1608da(0x30e)]())return;this['_relativePosition']=this[_0x1608da(0xe3)]||0x0;const _0x4873aa=VisuMZ['MessageCore'][_0x1608da(0x1a0)][_0x1608da(0x2a6)][_0x1608da(0xc6)],_0x5986f2=VisuMZ[_0x1608da(0xd8)]['Settings'][_0x1608da(0x2a6)][_0x1608da(0x267)],_0x4c8c91=(0x5-this[_0x1608da(0xe3)])/0x5;this['x']+=Math[_0x1608da(0x1bc)](_0x4873aa*_0x4c8c91),this['y']+=_0x5986f2;},Window_NameBox[_0x117a34(0x238)][_0x117a34(0xd0)]=function(){const _0x47bdd6=_0x117a34,_0x1201f0=this[_0x47bdd6(0x24b)],_0x16da09=_0x1201f0['y'],_0xe89743=VisuMZ[_0x47bdd6(0xd8)][_0x47bdd6(0x1a0)][_0x47bdd6(0x2a6)][_0x47bdd6(0x267)];if(_0x16da09>this['y']&&_0x16da09<this['y']+this[_0x47bdd6(0x2fd)]-_0xe89743){if(_0x47bdd6(0x116)===_0x47bdd6(0x1f6)){function _0x5962b3(){const _0x10aef6=_0x47bdd6;this[_0x10aef6(0xb8)](),_0x54af81[_0x10aef6(0xd8)][_0x10aef6(0x243)][_0x10aef6(0x1cc)](this);}}else this['y']=_0x1201f0['y']+_0x1201f0['height'];}},VisuMZ[_0x117a34(0xd8)]['Window_NameBox_refresh']=Window_NameBox['prototype'][_0x117a34(0x1c4)],Window_NameBox[_0x117a34(0x238)][_0x117a34(0x1c4)]=function(){const _0x4d266e=_0x117a34;this[_0x4d266e(0xe3)]=0x0,VisuMZ[_0x4d266e(0xd8)]['Window_NameBox_refresh']['call'](this);},Window_ChoiceList[_0x117a34(0x238)]['isWordWrapEnabled']=function(){return![];},Window_ChoiceList[_0x117a34(0x238)][_0x117a34(0xbc)]=function(){return!![];},Window_ChoiceList[_0x117a34(0x238)][_0x117a34(0x235)]=function(){return $gameSystem['getChoiceListLineHeight']()+0x8;},Window_ChoiceList[_0x117a34(0x238)][_0x117a34(0x2bd)]=function(){const _0x523fd3=_0x117a34;return $gameSystem[_0x523fd3(0x2d9)]();},Window_ChoiceList[_0x117a34(0x238)][_0x117a34(0x29b)]=function(){const _0x356989=_0x117a34;this['refresh'](),this[_0x356989(0x275)](),this['open'](),this['activate']();},Window_ChoiceList[_0x117a34(0x238)][_0x117a34(0x1c4)]=function(){const _0x2b3b65=_0x117a34;this[_0x2b3b65(0xe8)](),this[_0x2b3b65(0xc2)](),this[_0x2b3b65(0x24b)]&&(this['updatePlacement'](),this['placeCancelButton']()),this[_0x2b3b65(0x18b)](),this[_0x2b3b65(0x19f)](),this[_0x2b3b65(0x16b)](),Window_Selectable[_0x2b3b65(0x238)][_0x2b3b65(0x1c4)][_0x2b3b65(0x1cc)](this);},Window_ChoiceList[_0x117a34(0x238)][_0x117a34(0xc2)]=function(){const _0x48f6e0=_0x117a34,_0x4489ad=$gameMessage[_0x48f6e0(0x149)]();let _0x2a829f=0x0;for(const _0x3a0b10 of _0x4489ad){if(this['isChoiceVisible'](_0x3a0b10)){const _0x63a14b=this[_0x48f6e0(0x2c6)](_0x3a0b10),_0x481a4f=this[_0x48f6e0(0xb7)](_0x3a0b10);this[_0x48f6e0(0x19d)](_0x63a14b,_0x48f6e0(0x185),_0x481a4f,_0x2a829f);}_0x2a829f++;}},Window_ChoiceList['prototype'][_0x117a34(0x104)]=function(_0x2b85e7){const _0x4221f4=_0x117a34;if(_0x2b85e7['match'](/<HIDE>/i))return![];if(_0x2b85e7[_0x4221f4(0x184)](/<SHOW>/i))return!![];if(_0x2b85e7[_0x4221f4(0x184)](/<SHOW[ ](?:SW|SWITCH|SWITCHES):[ ]*(\d+(?:\s*,\s*\d+)*)>/i)){if(_0x4221f4(0x1bf)===_0x4221f4(0x25f)){function _0x382de0(){const _0x17baca=_0x4221f4;_0xa80121[_0x17baca(0x2e4)]=0x3;}}else{const _0x3020bf=JSON[_0x4221f4(0xe7)]('['+RegExp['$1']['match'](/\d+/g)+']');for(const _0x4ce3fc of _0x3020bf){if(!$gameSwitches[_0x4221f4(0x1fb)](_0x4ce3fc))return![];}return!![];}}if(_0x2b85e7[_0x4221f4(0x184)](/<SHOW ALL[ ](?:SW|SWITCH|SWITCHES):[ ]*(\d+(?:\s*,\s*\d+)*)>/i)){if('goqks'===_0x4221f4(0x279)){function _0x3c73b2(){return this['messageCoreWindowX']();}}else{const _0x5a3d89=JSON[_0x4221f4(0xe7)]('['+RegExp['$1'][_0x4221f4(0x184)](/\d+/g)+']');for(const _0x3507c3 of _0x5a3d89){if(!$gameSwitches[_0x4221f4(0x1fb)](_0x3507c3))return![];}return!![];}}if(_0x2b85e7['match'](/<SHOW ANY[ ](?:SW|SWITCH|SWITCHES):[ ]*(\d+(?:\s*,\s*\d+)*)>/i)){if('zUeym'===_0x4221f4(0x1be)){function _0x2ae2f8(){const _0x59142d=_0x4221f4;_0x4573f6['x']=this[_0x59142d(0x2d5)](_0x4e43dd),_0x1e84c9[_0x59142d(0xd8)][_0x59142d(0x1a0)][_0x59142d(0x2a6)][_0x59142d(0x1dc)]&&(_0x55d102['x']+=_0x159839[_0x59142d(0x30a)]);}}else{const _0x5ee348=JSON[_0x4221f4(0xe7)]('['+RegExp['$1'][_0x4221f4(0x184)](/\d+/g)+']');for(const _0x4bce96 of _0x5ee348){if($gameSwitches[_0x4221f4(0x1fb)](_0x4bce96))return!![];}return![];}}if(_0x2b85e7[_0x4221f4(0x184)](/<HIDE[ ](?:SW|SWITCH|SWITCHES):[ ]*(\d+(?:\s*,\s*\d+)*)>/i)){const _0x19d49f=JSON[_0x4221f4(0xe7)]('['+RegExp['$1'][_0x4221f4(0x184)](/\d+/g)+']');for(const _0x2df82b of _0x19d49f){if(!$gameSwitches['value'](_0x2df82b))return!![];}return![];}if(_0x2b85e7[_0x4221f4(0x184)](/<HIDE ALL[ ](?:SW|SWITCH|SWITCHES):[ ]*(\d+(?:\s*,\s*\d+)*)>/i)){const _0x32adbe=JSON['parse']('['+RegExp['$1'][_0x4221f4(0x184)](/\d+/g)+']');for(const _0x3c053e of _0x32adbe){if('zITsc'===_0x4221f4(0xe5)){if(!$gameSwitches[_0x4221f4(0x1fb)](_0x3c053e))return!![];}else{function _0x310f8f(){const _0x10ec7c=_0x4221f4;return this[_0x10ec7c(0x1ae)]&&this[_0x10ec7c(0x1ae)][_0x10ec7c(0x29e)]===_0x3edcce;}}}return![];}if(_0x2b85e7[_0x4221f4(0x184)](/<HIDE ANY[ ](?:SW|SWITCH|SWITCHES):[ ]*(\d+(?:\s*,\s*\d+)*)>/i)){const _0x1b10d6=JSON[_0x4221f4(0xe7)]('['+RegExp['$1'][_0x4221f4(0x184)](/\d+/g)+']');for(const _0x4670de of _0x1b10d6){if('sZnbx'!==_0x4221f4(0x321)){if($gameSwitches['value'](_0x4670de))return![];}else{function _0x51809e(){const _0x4dda38=_0x4221f4,_0x782fc1=_0xe9c9b(_0xe8da54['$1']);_0x782fc1<_0x5ec38f?(_0x2702e5('%1\x20is\x20incorrectly\x20placed\x20on\x20the\x20plugin\x20list.\x0aIt\x20is\x20a\x20Tier\x20%2\x20plugin\x20placed\x20over\x20other\x20Tier\x20%3\x20plugins.\x0aPlease\x20reorder\x20the\x20plugin\x20list\x20from\x20smallest\x20to\x20largest\x20tier\x20numbers.'['format'](_0x1b1b28,_0x782fc1,_0x3c4cec)),_0x2bf0cf[_0x4dda38(0x23d)]()):_0x2cdfed=_0x1b43a0[_0x4dda38(0x1d3)](_0x782fc1,_0x14e0cf);}}}return!![];}return!![];},Window_ChoiceList['prototype'][_0x117a34(0x2c6)]=function(_0x9c37b9){let _0x238317=_0x9c37b9;return _0x238317=_0x238317['replace'](/<(?:BR|LINEBREAK)>/gi,'\x0a'),_0x238317=_0x238317['replace'](/<LINE\x1bWrapBreak[0]BREAK>/gi,'\x0a'),_0x238317;},Window_ChoiceList[_0x117a34(0x238)]['isChoiceEnabled']=function(_0x55bb3f){const _0x945776=_0x117a34;if(_0x55bb3f[_0x945776(0x184)](/<DISABLE>/i))return![];if(_0x55bb3f['match'](/<ENABLE>/i))return!![];if(_0x55bb3f[_0x945776(0x184)](/<ENABLE[ ](?:SWITCH|SWITCHES):[ ]*(\d+(?:\s*,\s*\d+)*)>/i)){const _0x1df5b3=JSON[_0x945776(0xe7)]('['+RegExp['$1'][_0x945776(0x184)](/\d+/g)+']');for(const _0x1bfe71 of _0x1df5b3){if(_0x945776(0x21a)!==_0x945776(0x21a)){function _0x90b86f(){const _0x1f98ca=_0x945776,_0x5be4f5=this[_0x1f98ca(0x2d5)](_0x3e7bb3);this[_0x1f98ca(0x29e)]===_0x5b49cf&&_0x25841f[_0x1f98ca(0x1a7)]&&this[_0x1f98ca(0x10f)](_0x5be4f5);}}else{if(!$gameSwitches[_0x945776(0x1fb)](_0x1bfe71))return![];}}return!![];}if(_0x55bb3f['match'](/<ENABLE ALL[ ](?:SWITCH|SWITCHES):[ ]*(\d+(?:\s*,\s*\d+)*)>/i)){const _0x1eb4d5=JSON[_0x945776(0xe7)]('['+RegExp['$1']['match'](/\d+/g)+']');for(const _0x207a87 of _0x1eb4d5){if(_0x945776(0xbd)!==_0x945776(0xad)){if(!$gameSwitches['value'](_0x207a87))return![];}else{function _0x46af2b(){const _0x50251e=_0x945776;_0x4df258[_0x50251e(0xd8)][_0x50251e(0xa5)]=[];for(let _0x24aaa0=0x1;_0x24aaa0<=0x1f;_0x24aaa0++){const _0x5a0c65=_0x50251e(0x25a)[_0x50251e(0x246)](_0x24aaa0),_0x28c027=_0x345046[_0x50251e(0xd8)]['Settings'][_0x50251e(0x17f)][_0x5a0c65];_0x28c027['sort']((_0x1ecac5,_0x3ca7f8)=>{const _0x332d29=_0x50251e;if(!_0x1ecac5||!_0x3ca7f8)return-0x1;return _0x3ca7f8[_0x332d29(0x2a3)]-_0x1ecac5[_0x332d29(0x2a3)];}),this[_0x50251e(0x18f)](_0x28c027,_0x24aaa0);}}}}return!![];}if(_0x55bb3f['match'](/<ENABLE ANY[ ](?:SWITCH|SWITCHES):[ ]*(\d+(?:\s*,\s*\d+)*)>/i)){const _0x135a44=JSON[_0x945776(0xe7)]('['+RegExp['$1'][_0x945776(0x184)](/\d+/g)+']');for(const _0x2773b1 of _0x135a44){if(_0x945776(0x2d4)===_0x945776(0x2d4)){if($gameSwitches[_0x945776(0x1fb)](_0x2773b1))return!![];}else{function _0x272b6b(){_0x3dd6e2=_0x3b851a['max'](_0x2ce27e,_0x2f8a53);}}}return![];}if(_0x55bb3f[_0x945776(0x184)](/<DISABLE[ ](?:SWITCH|SWITCHES):[ ]*(\d+(?:\s*,\s*\d+)*)>/i)){if(_0x945776(0xc4)===_0x945776(0xc4)){const _0xe5c990=JSON[_0x945776(0xe7)]('['+RegExp['$1']['match'](/\d+/g)+']');for(const _0x47eec5 of _0xe5c990){if(!$gameSwitches[_0x945776(0x1fb)](_0x47eec5))return!![];}return![];}else{function _0x30b962(){const _0x527931=_0x945776;!_0xd71cb7[_0x527931(0x1b6)]?this[_0x527931(0x24d)][_0x527931(0x23a)](_0x594e5b):_0x231b05[_0x527931(0x1e5)]();}}}if(_0x55bb3f['match'](/<DISABLE ALL[ ](?:SWITCH|SWITCHES):[ ]*(\d+(?:\s*,\s*\d+)*)>/i)){const _0x1cd131=JSON['parse']('['+RegExp['$1'][_0x945776(0x184)](/\d+/g)+']');for(const _0x145754 of _0x1cd131){if(!$gameSwitches[_0x945776(0x1fb)](_0x145754))return!![];}return![];}if(_0x55bb3f[_0x945776(0x184)](/<DISABLE ANY[ ](?:SWITCH|SWITCHES):[ ]*(\d+(?:\s*,\s*\d+)*)>/i)){const _0x1c859d=JSON[_0x945776(0xe7)]('['+RegExp['$1']['match'](/\d+/g)+']');for(const _0x1dd760 of _0x1c859d){if(_0x945776(0xd2)!==_0x945776(0xd2)){function _0x4dc881(){const _0x24751e=_0x945776;this['y']=_0x18eb03['y']+_0x40e0a9[_0x24751e(0x2fd)];}}else{if($gameSwitches['value'](_0x1dd760))return![];}}return!![];}return!![];},VisuMZ[_0x117a34(0xd8)][_0x117a34(0x122)]=Window_ChoiceList['prototype'][_0x117a34(0x9f)],Window_ChoiceList[_0x117a34(0x238)][_0x117a34(0x9f)]=function(){const _0x3dfe75=_0x117a34;VisuMZ[_0x3dfe75(0xd8)][_0x3dfe75(0x122)]['call'](this),this[_0x3dfe75(0x216)]();},Window_ChoiceList[_0x117a34(0x238)][_0x117a34(0x251)]=function(){const _0x50bf04=_0x117a34;if(!this['_cancelButton'])return;const _0x5923b5=0x8,_0x4b813c=this[_0x50bf04(0x1e4)],_0x291f67=this['x']+this[_0x50bf04(0x2b8)],_0x17be31=Math['floor']((Graphics[_0x50bf04(0x2b8)]-Graphics['boxWidth'])/0x2);_0x291f67>=Graphics[_0x50bf04(0x16a)]+_0x17be31-_0x4b813c['width']+_0x5923b5?_0x4b813c['x']=-_0x4b813c[_0x50bf04(0x2b8)]-_0x5923b5:_0x4b813c['x']=this['width']+_0x5923b5,_0x4b813c['y']=this[_0x50bf04(0x2fd)]/0x2-_0x4b813c['height']/0x2;},VisuMZ['MessageCore']['Window_ChoiceList_windowX']=Window_ChoiceList[_0x117a34(0x238)][_0x117a34(0x27c)],Window_ChoiceList[_0x117a34(0x238)][_0x117a34(0x27c)]=function(){const _0x198555=_0x117a34;return this[_0x198555(0x24b)]?this[_0x198555(0x2cf)]():VisuMZ[_0x198555(0xd8)][_0x198555(0x190)][_0x198555(0x1cc)](this);},Window_ChoiceList[_0x117a34(0x238)][_0x117a34(0x2cf)]=function(){const _0x57ede9=_0x117a34,_0x3b1e29=$gameMessage['choicePositionType']();if(_0x3b1e29===0x1)return(Graphics['boxWidth']-this[_0x57ede9(0xf7)]())/0x2;else{if(_0x3b1e29===0x2){if(_0x57ede9(0x223)!==_0x57ede9(0x318))return this[_0x57ede9(0x24b)]['x']+this[_0x57ede9(0x24b)][_0x57ede9(0x2b8)]-this['windowWidth']();else{function _0x3abac2(){const _0xa20a6c=_0x57ede9;return this[_0xa20a6c(0x24b)]?this[_0xa20a6c(0x2cf)]():_0x301255['MessageCore'][_0xa20a6c(0x190)]['call'](this);}}}else{if('oSKtG'===_0x57ede9(0x13e))return this[_0x57ede9(0x24b)]['x'];else{function _0x2958df(){var _0x1e36ba=new _0x1d4d6a(_0x507b73,'i');}}}}},Window_ChoiceList[_0x117a34(0x238)][_0x117a34(0xf7)]=function(){const _0x593e94=_0x117a34,_0x5d0352=(this['maxChoiceWidth']()+this[_0x593e94(0x2f5)]())*this[_0x593e94(0x2bd)]()+this[_0x593e94(0x10d)]*0x2;return Math[_0x593e94(0x22f)](_0x5d0352,Graphics['width']);},Window_ChoiceList[_0x117a34(0x238)][_0x117a34(0xee)]=function(){const _0x1b3ac2=_0x117a34,_0x31e878=$gameMessage[_0x1b3ac2(0x149)]()['filter'](_0x201925=>this[_0x1b3ac2(0x104)](_0x201925)),_0x275047=Math['ceil'](_0x31e878['length']/this['maxCols']());return Math[_0x1b3ac2(0x1d3)](0x1,Math[_0x1b3ac2(0x22f)](_0x275047,this['maxLines']()));},Window_ChoiceList[_0x117a34(0x238)][_0x117a34(0x2a2)]=function(){const _0x283838=_0x117a34,_0x518982=this[_0x283838(0x24b)],_0x1726d3=_0x518982?_0x518982['y']:0x0,_0x488da8=_0x518982?_0x518982[_0x283838(0x2fd)]:0x0,_0x3ea7bd=Graphics['boxHeight']/0x2;if(_0x1726d3<_0x3ea7bd&&_0x1726d3+_0x488da8>_0x3ea7bd)return 0x4;else{if('NQqHj'!==_0x283838(0x144))return $gameSystem[_0x283838(0x129)]();else{function _0x4938bd(){const _0x1bf7fb=_0x283838;this[_0x1bf7fb(0x1ab)]();}}}},Window_ChoiceList[_0x117a34(0x238)]['maxChoiceWidth']=function(){const _0x3d1ac2=_0x117a34;let _0x99c59d=0x60;for(const _0x2ea11f of this['_list']){if(_0x3d1ac2(0x215)!==_0x3d1ac2(0x215)){function _0x1c3127(){const _0x28d746=_0x3d1ac2;if(_0x4bf270[_0x28d746(0x1fb)](_0x32a12c))return![];}}else{const _0xed2b49=_0x2ea11f[_0x3d1ac2(0xf9)],_0x4f1c38=this['textSizeEx'](_0xed2b49)[_0x3d1ac2(0x2b8)],_0x5ac80c=Math['ceil'](_0x4f1c38)+this[_0x3d1ac2(0x236)]()*0x2;if(_0x99c59d<_0x5ac80c){if(_0x3d1ac2(0x1c0)==='KYXxp')_0x99c59d=_0x5ac80c;else{function _0x46cc3f(){const _0x3280d4=_0x3d1ac2;this[_0x3280d4(0xda)][_0x3280d4(0x2a8)]=!!_0x46d094;}}}}}return _0x99c59d;},Window_ChoiceList[_0x117a34(0x238)][_0x117a34(0x123)]=function(_0x3fcfd1){const _0x49b012=_0x117a34,_0x59f47e=this[_0x49b012(0x120)](_0x3fcfd1),_0x48ad77=$gameSystem[_0x49b012(0x2be)]()!=='default'?'<%1>'['format']($gameSystem['getChoiceListTextAlign']()):'',_0x1fbbb2=_0x48ad77+this['commandName'](_0x3fcfd1);this[_0x49b012(0x160)](this['isCommandEnabled'](_0x3fcfd1));const _0x107a76=this[_0x49b012(0x298)](_0x1fbbb2)['height'],_0x118d5a=Math[_0x49b012(0x1d3)](_0x59f47e['y'],_0x59f47e['y']+Math[_0x49b012(0x302)]((_0x59f47e[_0x49b012(0x2fd)]-_0x107a76)/0x2));this[_0x49b012(0x15e)](_0x1fbbb2,_0x59f47e['x'],_0x118d5a,_0x59f47e[_0x49b012(0x2b8)]);},Window_ChoiceList[_0x117a34(0x238)][_0x117a34(0x1c5)]=function(){const _0x216d5b=_0x117a34;$gameMessage[_0x216d5b(0x21f)](this['currentExt']()),this[_0x216d5b(0x24b)][_0x216d5b(0xf5)](),this[_0x216d5b(0x287)]();};